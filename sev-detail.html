<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OneMonitoring</title>
  <link rel="icon" type="image/svg+xml" href="favicon.svg?v=2">
  <link rel="stylesheet" href="styles.css?v=58">
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
  <!-- ECharts for Data Exploration charts -->
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.6.0/dist/echarts.min.js"></script>
  <!-- Left Nav Component -->
  <script src="components/left-nav.js"></script>
</head>
<body>
  <!-- Inline SVG Sprite for instant icon loading -->
  <svg xmlns="http://www.w3.org/2000/svg" style="display:none">
    <symbol id="icon-house-outline" viewBox="0 0 24 24">
      <path fill="currentColor" d="M14.39 3.87a3.507 3.507 0 0 0-4.79 0L4.26 8.88C3.46 9.63 3 10.7 3 11.8v6.5c0 1.18.82 2.21 1.96 2.45.91.19 1.86.35 2.81.47.08.01.16.02.24.02.48 0 .95-.17 1.31-.5.43-.38.68-.93.68-1.51V16c0-.55.45-1 1-1h2c.55 0 1 .45 1 1v3.23c0 .58.25 1.12.68 1.51.43.38.99.55 1.56.48.95-.12 1.9-.28 2.81-.47 1.13-.24 1.96-1.27 1.96-2.45v-6.5c0-1.1-.46-2.17-1.26-2.92l-5.34-5.01zM19 18.3c0 .24-.16.45-.38.49-.86.18-1.74.33-2.62.44V16c0-1.65-1.35-3-3-3h-2c-1.65 0-3 1.35-3 3v3.24c-.88-.11-1.77-.26-2.63-.45A.49.49 0 0 1 5 18.3v-6.5c0-.55.23-1.08.63-1.46l5.34-5.01c.29-.27.66-.4 1.03-.4s.74.13 1.03.4l5.34 5.01c.4.38.63.91.63 1.46z"/>
    </symbol>
    <symbol id="icon-house-filled" viewBox="0 0 24 24">
      <path fill="currentColor" d="M14.39 3.87a3.507 3.507 0 0 0-4.79 0L4.26 8.88C3.46 9.63 3 10.7 3 11.8v6.5c0 1.18.82 2.21 1.96 2.45.91.19 1.86.35 2.81.47.08.01.16.02.24.02.48 0 .95-.17 1.31-.5.43-.38.68-.93.68-1.51V16c0-.55.45-1 1-1h2c.55 0 1 .45 1 1v3.23c0 .58.25 1.12.68 1.51.43.38.99.55 1.56.48.95-.12 1.9-.28 2.81-.47 1.13-.24 1.96-1.27 1.96-2.45v-6.5c0-1.1-.46-2.17-1.26-2.92l-5.34-5.01z"/>
    </symbol>
    <symbol id="icon-plus" viewBox="0 0 24 24">
      <path fill="currentColor" d="M12 20c.55 0 1-.45 1-1v-6h6c.55 0 1-.45 1-1s-.45-1-1-1h-6V5c0-.55-.45-1-1-1s-1 .45-1 1v6H5c-.55 0-1 .45-1 1s.45 1 1 1h6v6c0 .55.45 1 1 1"/>
    </symbol>
    <symbol id="icon-star-ai-outline" viewBox="0 0 24 24">
      <path fill="currentColor" d="m13.45 15.11-3.04-1.52-1.52-3.04c-.34-.68-1.45-.68-1.79 0l-1.52 3.04-3.04 1.52a1 1 0 0 0-.55.89c0 .37.21.73.55.89l3.04 1.52 1.52 3.04a1 1 0 0 0 .89.55c.37 0 .73-.21.89-.55l1.52-3.04 3.04-1.52a1 1 0 0 0 .55-.89c0-.37-.21-.73-.55-.89zm-4.23 1.66c-.19.1-.35.25-.45.45L8 18.76l-.77-1.54c-.1-.19-.25-.35-.45-.45L5.24 16l1.54-.77c.19-.1.35-.25.45-.45L8 13.24l.77 1.54c.1.19.25.35.45.45l1.54.77zM8 5.5C8 7.43 9.57 9 11.5 9S15 7.43 15 5.5 13.43 2 11.5 2 8 3.57 8 5.5m5 0c0 .83-.67 1.5-1.5 1.5S10 6.33 10 5.5 10.67 4 11.5 4s1.5.67 1.5 1.5m7.22 2.55a1.008 1.008 0 0 0-1.64-.44l-4.33 4.04c-.27.25-.38.62-.29.97s.36.63.71.72l6.06 1.62c.09.02.17.03.26.03.27 0 .53-.11.72-.31.25-.26.34-.64.24-.99l-1.73-5.66zm-3.28 3.83 1.84-1.72.74 2.41z"/>
    </symbol>
    <symbol id="icon-star-ai-filled" viewBox="0 0 24 24">
      <path fill="currentColor" d="m7.11 10.55-1.52 3.04-3.04 1.52A1 1 0 0 0 2 16c0 .37.21.73.55.89l3.04 1.52 1.52 3.04A1 1 0 0 0 8 22c.37 0 .73-.21.89-.55l1.52-3.04 3.04-1.52A1 1 0 0 0 14 16c0-.37-.21-.73-.55-.89l-3.04-1.52-1.52-3.04c-.34-.68-1.45-.68-1.79 0zM11.5 9a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m8.72-.95a1.008 1.008 0 0 0-1.64-.44l-4.33 4.04c-.27.25-.38.62-.29.97s.36.63.71.72l6.06 1.62c.09.02.17.03.26.03.27 0 .53-.11.72-.31.25-.26.34-.64.24-.99l-1.73-5.66z"/>
    </symbol>
    <symbol id="icon-circles-outline" viewBox="0 0 24 24">
      <path fill="currentColor" d="M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"/><path fill="currentColor" d="M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6m0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4"/><path fill="currentColor" d="M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4"/>
    </symbol>
    <symbol id="icon-circles-filled" viewBox="0 0 24 24">
      <path fill="currentColor" d="M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"/><path fill="currentColor" d="M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6m0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4"/><path fill="currentColor" d="M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4"/>
    </symbol>
    <symbol id="icon-dots-lines-outline" viewBox="0 0 24 24">
      <path fill="currentColor" d="M6.23 10.42c.5.36 1.11.58 1.77.58l.14-.01-1.37 4.59c-.5-.36-1.11-.58-1.77-.58l-.14.01 1.37-4.59zm8.48 2.88c-.62.3-1.12.8-1.42 1.42l-4-4c.62-.3 1.12-.8 1.42-1.42l4 4zm2.52-4.88c.5.36 1.11.58 1.77.58l.14-.01-1.37 4.59c-.5-.36-1.11-.58-1.77-.58l-.15.01 1.38-4.59zM5 15c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 2c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm11-4c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 2c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zM8 5c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 2c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm11-4c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 2c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"/>
    </symbol>
    <symbol id="icon-dots-lines-filled" viewBox="0 0 24 24">
      <path fill="currentColor" d="M19 3c1.66 0 3 1.34 3 3 0 1.61-1.27 2.92-2.86 3l-1.37 4.58c.75.55 1.24 1.43 1.24 2.43 0 1.66-1.34 3-3 3s-3-1.34-3-3c0-.46.11-.9.29-1.29l-4-4c-.4.18-.83.29-1.29.29l-.14-.01-1.37 4.58c.76.55 1.25 1.44 1.25 2.44 0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3l.15.01 1.46-4.88c-.56-.55-.96-1.28-1.12-2.1-.01-.01-.01-.02-.01-.03 0-1.66 1.34-3 3-3l.15.01c.58.03 1.11.22 1.56.52l4.14 4.14c.39-.17.82-.28 1.27-.29l.15.01 1.46-4.89c-.56-.54-.95-1.27-1.11-2.08 0-.01 0-.03-.01-.04 0-1.66 1.34-3 3-3z"/>
    </symbol>
    <symbol id="icon-target-outline" viewBox="0 0 24 24">
      <path fill="currentColor" d="M12 2c.55 0 1 .45 1 1v1.06c3.62.45 6.49 3.32 6.94 6.94H21c.55 0 1 .45 1 1s-.45 1-1 1h-1.06c-.45 3.62-3.32 6.49-6.94 6.94V21c0 .55-.45 1-1 1s-1-.45-1-1v-1.06c-3.62-.45-6.49-3.32-6.94-6.94H3c-.55 0-1-.45-1-1s.45-1 1-1h1.06c.45-3.62 3.32-6.49 6.94-6.94V3c0-.55.45-1 1-1zm1 5c0 .55-.45 1-1 1s-1-.45-1-1v-.92c-2.51.42-4.49 2.4-4.92 4.92H7c.55 0 1 .45 1 1s-.45 1-1 1h-.92c.43 2.51 2.41 4.49 4.92 4.92V17c0-.55.45-1 1-1s1 .45 1 1v.92c2.51-.43 4.49-2.41 4.92-4.92H17c-.55 0-1-.45-1-1s.45-1 1-1h.92c-.43-2.52-2.41-4.5-4.92-4.92V7z"/>
    </symbol>
    <symbol id="icon-target-filled" viewBox="0 0 24 24">
      <path fill="currentColor" d="M12 2c.55 0 1 .45 1 1v1.06c3.62.45 6.49 3.32 6.94 6.94H21c.55 0 1 .45 1 1s-.45 1-1 1h-1.06c-.45 3.62-3.32 6.49-6.94 6.94V21c0 .55-.45 1-1 1s-1-.45-1-1v-1.06c-3.62-.45-6.49-3.32-6.94-6.94H3c-.55 0-1-.45-1-1s.45-1 1-1h1.06c.45-3.62 3.32-6.49 6.94-6.94V3c0-.55.45-1 1-1zm1 5c0 .55-.45 1-1 1s-1-.45-1-1v-.92c-2.51.42-4.49 2.4-4.92 4.92H7c.55 0 1 .45 1 1s-.45 1-1 1h-.92c.43 2.51 2.41 4.49 4.92 4.92V17c0-.55.45-1 1-1s1 .45 1 1v.92c2.51-.43 4.49-2.41 4.92-4.92H17c-.55 0-1-.45-1-1s.45-1 1-1h.92c-.43-2.52-2.41-4.5-4.92-4.92V7z"/>
    </symbol>
    <symbol id="icon-shield-outline" viewBox="0 0 24 24">
      <path fill="currentColor" d="M12 7.88a1 1 0 0 1 1 1v2h2a1 1 0 1 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2v-2a1 1 0 0 1 1-1"/><path fill="currentColor" d="M3.74 5.11a17.18 17.18 0 0 1 16.51 0c.46.25.74.73.74 1.26v3.88a12 12 0 0 1-6.23 10.52l-1.81.99a2 2 0 0 1-1.92 0l-1.81-.99A12 12 0 0 1 3 10.24V6.37c0-.52.29-1 .74-1.26M19 6.71a15.18 15.18 0 0 0-14 0v3.53a10 10 0 0 0 5.2 8.77l1.8.99 1.8-.99A10 10 0 0 0 19 10.24z"/>
    </symbol>
    <symbol id="icon-shield-filled" viewBox="0 0 24 24">
      <path fill="currentColor" d="M3.74 5.11a17.18 17.18 0 0 1 16.51 0c.46.25.74.73.74 1.26v3.88a12 12 0 0 1-6.23 10.52l-1.81.99a2 2 0 0 1-1.92 0l-1.81-.99A12 12 0 0 1 3 10.24V6.37c0-.52.29-1 .74-1.26M12 7.88a1 1 0 0 0-1 1v2H9a1 1 0 1 0 0 2h2v2a1 1 0 0 0 2 0v-2h2a1 1 0 0 0 0-2h-2v-2a1 1 0 0 0-1-1"/>
    </symbol>
    <symbol id="icon-flame-outline" viewBox="0 0 24 24">
      <path fill="currentColor" d="M10.71 21.92c.4.06.8.08 1.2.08 2.2 0 4.3-.85 5.79-2.38 2.13-2.18 3.23-6.73 1.31-10.28-.2-.36-.6-.57-1.01-.52a.99.99 0 0 0-.84.76c-.35 1.48-1.02 2.63-1.76 3-.06.03-.13.06-.19.08.48-2.64.68-7.81-4.22-10.53a1 1 0 0 0-1.04.04c-.31.2-.48.56-.45.94.17 1.71-1.09 3.29-2.42 4.96-1.96 2.46-4.41 5.53-2.27 9.83 1.17 2.19 3.32 3.65 5.89 4.02zM8.65 9.31c1.11-1.4 2.26-2.83 2.69-4.48 2.91 2.69 2.07 7.02 1.7 8.42-.13.48.11.98.56 1.17.91.4 1.84.38 2.7-.04.64-.32 1.21-.86 1.69-1.59.18 2.1-.55 4.25-1.71 5.44-1.32 1.35-3.29 1.99-5.28 1.71-1.94-.27-3.54-1.36-4.4-2.95-1.56-3.13.11-5.24 2.05-7.67z"/>
    </symbol>
    <symbol id="icon-flame-filled" viewBox="0 0 24 24">
      <path fill="currentColor" d="M10.99 2.13a1 1 0 0 0-1.04.04c-.31.2-.48.56-.45.94.17 1.71-1.09 3.29-2.42 4.96-1.96 2.46-4.41 5.53-2.27 9.83 1.17 2.19 3.32 3.65 5.89 4.02.4.06.8.08 1.2.08 2.2 0 4.3-.85 5.79-2.38 2.13-2.18 3.23-6.73 1.31-10.28-.2-.36-.6-.57-1.01-.52a.99.99 0 0 0-.84.76c-.35 1.48-1.02 2.63-1.76 3-.06.03-.13.06-.19.08.48-2.64.68-7.81-4.22-10.53z"/>
    </symbol>
    <symbol id="icon-chart-outline" viewBox="0 0 24 24">
      <path fill="currentColor" d="M20.25 4.96C20.01 3.83 18.98 3 17.81 3H6.2C5.03 3 4 3.82 3.76 4.96c-1 4.67-1 9.41 0 14.09.24 1.13 1.27 1.96 2.44 1.96h11.61c1.17 0 2.2-.82 2.44-1.96 1-4.67 1-9.41 0-14.09m-1.96 13.67c-.05.22-.25.37-.49.37H6.2c-.24 0-.44-.16-.49-.37-.94-4.4-.94-8.86 0-13.25.05-.22.25-.37.49-.37h11.61c.24 0 .44.16.49.37.94 4.4.94 8.86 0 13.25z"/><path fill="currentColor" d="m15.19 8.92-1.94 2.71-2.19-1.46a1 1 0 0 0-1.37.25l-2.5 3.5A1.007 1.007 0 0 0 8 15.51c.31 0 .62-.15.81-.42l1.94-2.71 2.19 1.46c.45.3 1.05.19 1.37-.25l2.5-3.5c.32-.45.22-1.07-.23-1.4-.45-.32-1.07-.22-1.4.23z"/>
    </symbol>
    <symbol id="icon-chart-filled" viewBox="0 0 24 24">
      <path fill="currentColor" d="M20.25 4.96C20.01 3.83 18.98 3 17.81 3H6.2C5.03 3 4 3.82 3.76 4.96c-1 4.67-1 9.41 0 14.09.24 1.13 1.27 1.96 2.44 1.96h11.61c1.17 0 2.2-.82 2.44-1.96 1-4.67 1-9.41 0-14.09m-3.44 5.12-2.5 3.5a1 1 0 0 1-1.37.25l-2.19-1.46-1.94 2.71c-.2.27-.5.42-.81.42a1.006 1.006 0 0 1-.81-1.59l2.5-3.5a1 1 0 0 1 1.37-.25l2.19 1.46 1.94-2.71c.32-.45.95-.55 1.4-.23s.55.95.23 1.4z"/>
    </symbol>
    <symbol id="icon-stardust-outline" viewBox="0 0 24 24">
      <path fill="currentColor" d="M18 11l-.001-.055c.69.16 1.44-.02 1.98-.52.01.19.02.39.02.58 0 2.13-.74 4.08-1.97 5.62l2.68 2.68c.39.39.39 1.02 0 1.41-.39.39-1.02.39-1.41 0l-2.68-2.68c-1.54 1.23-3.49 1.97-5.62 1.97-4.97 0-9-4.03-9-9s4.03-9 9-9c1.55 0 3 .39 4.28 1.08l-.96.41c-.46.2-.81.52-1.03.9-.72-.25-1.49-.39-2.29-.39-3.87 0-7 3.13-7 7s3.13 7 7 7 7-3.13 7-7z"/><path fill="currentColor" d="M19 2.33c-.19-.44-.81-.44-1 0l-.71 1.66c-.05.13-.16.23-.28.29l-1.68.72c-.43.19-.44.8 0 .99l1.62.71c.12.05.22.15.27.27l.78 1.72c.2.43.81.42.99-.01l.73-1.7c.05-.12.16-.23.28-.28l1.67-.71c.44-.19.44-.8 0-.99l-1.67-.71c-.13-.06-.23-.16-.28-.29l-.71-1.66z"/>
    </symbol>
    <symbol id="icon-info-outline" viewBox="0 0 24 24">
      <path fill="currentColor" d="M12 10.28c.48 0 .88.39.88.87v4.98c0 .48-.39.87-.88.87-.48 0-.88-.39-.88-.87v-4.98c0-.48.39-.87.88-.87z"/><path fill="currentColor" d="M12 7c.83 0 1.25.4 1.25 1s-.42 1-1.25 1c-.83 0-1.25-.4-1.25-1s.42-1 1.25-1z"/><path fill="currentColor" d="M12 2c5.52 0 10 4.48 10 10s-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2zm0 2c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8z"/>
    </symbol>
    <symbol id="icon-stardust-circle" viewBox="0 0 24 24">
      <path fill="currentColor" d="M12 2C17.52 2 22 6.48 22 12s-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2zm.86 4.56c-.32-.75-1.38-.75-1.7 0l-1.23 2.85c-.09.22-.27.39-.49.48l-2.89 1.23c-.74.32-.75 1.38 0 1.7l2.77 1.22c.21.09.38.26.47.46l1.34 2.95c.33.73 1.38.72 1.7.02l1.25-2.91c.09-.22.27-.39.49-.49l2.86-1.22c.75-.32.75-1.38 0-1.7l-2.86-1.22c-.22-.09-.39-.27-.49-.49l-1.22-2.85z"/>
    </symbol>
    <symbol id="icon-search" viewBox="0 0 24 24">
      <circle cx="11" cy="11" r="8" fill="none" stroke="currentColor" stroke-width="2"/><path d="M21 21l-4.35-4.35" fill="none" stroke="currentColor" stroke-width="2"/>
    </symbol>
    <symbol id="icon-x" viewBox="0 0 24 24">
      <path fill="none" stroke="currentColor" stroke-width="2" d="M18 6L6 18M6 6l12 12"/>
    </symbol>
    <symbol id="icon-chevron-right" viewBox="0 0 24 24">
      <polyline points="9 18 15 12 9 6" fill="none" stroke="currentColor" stroke-width="2"/>
    </symbol>
    <symbol id="icon-arrow-up" viewBox="0 0 24 24">
      <line x1="12" y1="19" x2="12" y2="5" fill="none" stroke="currentColor" stroke-width="2"/><polyline points="5 12 12 5 19 12" fill="none" stroke="currentColor" stroke-width="2"/>
    </symbol>
    <symbol id="icon-exclamation-arcs-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M12 18.25c1.083 0 1.625.55 1.625 1.375S13.083 21 12 21s-1.625-.55-1.625-1.375.542-1.375 1.625-1.375M12 7a1 1 0 0 1 1 1v8a1 1 0 1 1-2 0V8a1 1 0 0 1 1-1m-3 8.973q-.061.042-.11.08a3 3 0 0 0-.155.129l-.008.008-.021.018a1 1 0 0 1-1.413-1.415l.014-.014.023-.022q.027-.027.073-.067.092-.084.254-.211A6.8 6.8 0 0 1 9 13.664zm6.416-2.101c.4.218.71.437.927.607a5 5 0 0 1 .327.278l.023.022.014.014a1 1 0 1 1-1.414 1.414l-.028-.025a3 3 0 0 0-.155-.13l-.11-.08v-2.308q.222.103.416.208M9 10.933a9.7 9.7 0 0 0-1.722.702 8.5 8.5 0 0 0-1.208.767 6 6 0 0 0-.355.297l-.009.009a1 1 0 0 1-1.413-1.415l.025-.025a2 2 0 0 1 .135-.123 8 8 0 0 1 .399-.329 10.4 10.4 0 0 1 1.495-.95A11.8 11.8 0 0 1 9 8.86zm6-2.072c1.056.261 1.944.631 2.653 1.004.651.343 1.152.687 1.495.951a8 8 0 0 1 .534.452l.025.025a1 1 0 1 1-1.414 1.414l-.009-.008-.006-.006-.057-.052a6 6 0 0 0-.291-.239 8.5 8.5 0 0 0-1.208-.767A9.7 9.7 0 0 0 15 10.933z"/></symbol>
    <symbol id="icon-exclamation-arcs-filled" viewBox="0 0 24 24"><path fill="currentColor" d="M12 18.25c1.083 0 1.625.55 1.625 1.375S13.083 21 12 21s-1.625-.55-1.625-1.375.542-1.375 1.625-1.375M12 7a1 1 0 0 1 1 1v8a1 1 0 1 1-2 0V8a1 1 0 0 1 1-1m-3 8.973q-.061.042-.11.08a3 3 0 0 0-.155.129l-.008.008-.021.018a1 1 0 0 1-1.413-1.415l.014-.014.023-.022q.027-.027.073-.067.092-.084.254-.211A6.8 6.8 0 0 1 9 13.664zm6.416-2.101c.4.218.71.437.927.607a5 5 0 0 1 .327.278l.023.022.014.014a1 1 0 1 1-1.414 1.414l-.028-.025a3 3 0 0 0-.155-.13l-.11-.08v-2.308q.222.103.416.208M9 10.933a9.7 9.7 0 0 0-1.722.702 8.5 8.5 0 0 0-1.208.767 6 6 0 0 0-.355.297l-.009.009a1 1 0 0 1-1.413-1.415l.025-.025a2 2 0 0 1 .135-.123 8 8 0 0 1 .399-.329 10.4 10.4 0 0 1 1.495-.95A11.8 11.8 0 0 1 9 8.86zm6-2.072c1.056.261 1.944.631 2.653 1.004.651.343 1.152.687 1.495.951a8 8 0 0 1 .534.452l.025.025a1 1 0 1 1-1.414 1.414l-.009-.008-.006-.006-.057-.052a6 6 0 0 0-.291-.239 8.5 8.5 0 0 0-1.208-.767A9.7 9.7 0 0 0 15 10.933z"/></symbol>
    <symbol id="icon-dot-double-arcs-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M4.929 4.929a1 1 0 0 1 1.414 1.414 8 8 0 0 0 0 11.314 1 1 0 0 1-1.414 1.414c-3.905-3.906-3.905-10.237 0-14.142m12.728 0a1 1 0 0 1 1.338-.068l.076.068.355.373c3.546 3.925 3.428 9.985-.355 13.769a1 1 0 0 1-1.414-1.415 8 8 0 0 0 .283-11.014l-.283-.299-.07-.076a1 1 0 0 1 .07-1.338m-9.9 2.83a1 1 0 0 1 1.415 1.413 4 4 0 0 0-.143 5.508l.143.15.068.075a1.001 1.001 0 0 1-1.407 1.407l-.075-.069-.213-.223a6 6 0 0 1 .213-8.262m7.071 0a1 1 0 0 1 1.414 0 6 6 0 0 1 0 8.484 1 1 0 0 1-1.414-1.414 4 4 0 0 0 0-5.657 1 1 0 0 1 0-1.414M12 10a2 2 0 1 1 0 4 2 2 0 0 1 0-4"/></symbol>
    <symbol id="icon-dot-double-arcs-filled" viewBox="0 0 24 24"><path fill="currentColor" d="M4.929 4.929a1 1 0 0 1 1.414 1.414 8 8 0 0 0 0 11.314 1 1 0 0 1-1.414 1.414c-3.905-3.906-3.905-10.237 0-14.142m12.728 0a1 1 0 0 1 1.338-.068l.076.068.355.373c3.546 3.925 3.428 9.985-.355 13.769a1 1 0 0 1-1.414-1.415 8 8 0 0 0 .283-11.014l-.283-.299-.07-.076a1 1 0 0 1 .07-1.338m-9.9 2.83a1 1 0 0 1 1.415 1.413 4 4 0 0 0-.143 5.508l.143.15.068.075a1.001 1.001 0 0 1-1.407 1.407l-.075-.069-.213-.223a6 6 0 0 1 .213-8.262m7.071 0a1 1 0 0 1 1.414 0 6 6 0 0 1 0 8.484 1 1 0 0 1-1.414-1.414 4 4 0 0 0 0-5.657 1 1 0 0 1 0-1.414M12 10a2 2 0 1 1 0 4 2 2 0 0 1 0-4"/></symbol>
    <symbol id="icon-exclamation-square-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M12.03 15c-.83 0-1.25.4-1.25 1s.42 1 1.25 1 1.25-.4 1.25-1-.42-1-1.25-1m0-1.27c.48 0 .88-.39.88-.88V7.88c0-.48-.39-.88-.88-.88s-.88.39-.88.88v4.97c0 .48.39.88.88.88"/><path fill="currentColor" d="M19.99 3.77a42.1 42.1 0 0 0-15.98 0C2.84 3.99 2 5.03 2 6.23v11.55c0 1.2.85 2.23 2.01 2.46 2.65.51 5.32.77 7.99.77s5.34-.26 7.99-.77c1.17-.22 2.01-1.26 2.01-2.46V6.23c0-1.2-.85-2.23-2.01-2.46m.01 14c0 .24-.17.45-.39.49-5.05.97-10.17.97-15.22 0a.496.496 0 0 1-.39-.49V6.22c0-.24.17-.45.39-.49C6.91 5.24 9.46 5 12 5s5.09.24 7.61.73c.22.04.39.25.39.49z"/></symbol>
    <symbol id="icon-exclamation-square-filled" viewBox="0 0 24 24"><path fill="currentColor" d="M19.99 3.77a42.1 42.1 0 0 0-15.98 0C2.84 3.99 2 5.03 2 6.23v11.55c0 1.2.85 2.23 2.01 2.46 2.65.51 5.32.77 7.99.77s5.34-.26 7.99-.77c1.17-.22 2.01-1.26 2.01-2.46V6.23c0-1.2-.85-2.23-2.01-2.46m-8.84 4.11c0-.48.39-.88.88-.88s.88.39.88.88v4.97c0 .48-.39.88-.88.88s-.88-.39-.88-.88zm.88 9.12c-.83 0-1.25-.4-1.25-1s.42-1 1.25-1 1.25.4 1.25 1-.42 1-1.25 1"/></symbol>
  </svg>

  <!-- Main Sidebar Container - Rendered by LeftNav component -->
  <div id="mainNavContainer"></div>

  <main class="main-content">
    <!-- Breadcrumb Navigation -->
    <div class="sev-breadcrumb">
      <a href="#" class="breadcrumb-link">Feed</a>
      <svg class="breadcrumb-separator" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
        <polyline points="9 18 15 12 9 6"/>
      </svg>
      <span class="breadcrumb-current">SEVs</span>
      <button class="ask-opsmate-btn" onclick="openOpsmate()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0206 15.0256C10.3164 15.8619 11.1136 16.4613 12.0513 16.4615C12.9891 16.4613 13.7863 15.8619 14.0821 15.0256H15.1493C14.8242 16.4359 13.5606 17.4872 12.0514 17.4872C10.5427 17.4872 9.27906 16.4359 8.95341 15.0256H10.0206ZM12.0508 16.4615H12.0519C12.0517 16.4615 12.0515 16.4615 12.0513 16.4615C12.0512 16.4615 12.051 16.4615 12.0508 16.4615Z" fill="currentColor"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M8.12879 7.38461C9.61545 7.38462 10.8211 8.59026 10.8211 10.0769C10.8211 11.5636 9.61545 12.7692 8.12879 12.7692C6.64213 12.7692 5.43649 11.5636 5.43649 10.0769C5.43649 8.59026 6.64213 7.38461 8.12879 7.38461ZM8.12879 8.41026C7.20828 8.41026 6.46213 9.15641 6.46213 10.0769C6.46213 10.9974 7.20828 11.7436 8.12879 11.7436C9.0493 11.7436 9.79546 10.9974 9.79546 10.0769C9.79546 9.15641 9.0493 8.41026 8.12879 8.41026Z" fill="currentColor"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M15.8724 7.38461C17.359 7.38462 18.5647 8.59026 18.5647 10.0769C18.5647 11.5636 17.359 12.7692 15.8724 12.7692C14.3857 12.7692 13.1801 11.5636 13.1801 10.0769C13.1801 8.59026 14.3857 7.38461 15.8724 7.38461ZM15.8724 8.41026C14.9519 8.41026 14.2057 9.15641 14.2057 10.0769C14.2057 10.9974 14.9519 11.7436 15.8724 11.7436C16.7929 11.7436 17.5391 10.9974 17.5391 10.0769C17.5391 9.15641 16.7929 8.41026 15.8724 8.41026Z" fill="currentColor"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M14.6673 0C15.177 6.43207e-06 15.5903 0.413337 15.5903 0.923077V5.22922C15.9447 5.2087 16.2862 5.18513 16.616 5.16001V0.98152L18.7175 1.42874C20.2498 1.75489 21.3893 3.00361 21.6047 4.51848C21.6688 4.50617 21.7293 4.49385 21.7867 4.48257C22.019 4.43591 22.1944 4.39746 22.3103 4.37079C22.3683 4.35746 22.4114 4.34716 22.439 4.34049C22.4529 4.33742 22.4631 4.33487 22.4693 4.33333C22.4724 4.33282 22.4744 4.33178 22.4755 4.33178H22.476C22.8877 4.22614 23.3067 4.47435 23.4123 4.88562H23.4113C23.517 5.29741 23.2688 5.71642 22.8575 5.82206C22.8483 5.82463 22.8185 5.83178 22.8016 5.83589C22.7673 5.84409 22.718 5.85592 22.6534 5.87079C22.5247 5.90002 22.3354 5.94154 22.0888 5.99129C21.9442 6.02 21.7795 6.05179 21.5954 6.08564C21.6252 6.27487 21.6411 6.46923 21.6411 6.66667V17.7436C21.6411 19.7667 20.0139 21.4103 17.9965 21.4359H14.9744C14.7406 21.7472 14.3683 21.9487 13.9488 21.9487H10.0514C9.63189 21.9487 9.25958 21.7472 9.02573 21.4359H6.00364C3.98621 21.4108 2.35906 19.7672 2.35906 17.7441V6.66717C2.35906 6.46922 2.37494 6.27536 2.40469 6.08614C2.22058 6.05229 2.05596 6.02102 1.91135 5.99179C1.66469 5.94256 1.47597 5.90104 1.34674 5.87129C1.28213 5.85642 1.23287 5.84459 1.19851 5.83639C1.18158 5.83228 1.15184 5.82513 1.14262 5.82257C0.731345 5.71692 0.483149 5.29744 0.58878 4.88617C0.694421 4.47489 1.1139 4.2267 1.52518 4.33233H1.52573C1.52676 4.33235 1.5288 4.33332 1.53184 4.33383C1.53799 4.33537 1.54829 4.33746 1.56214 4.34105C1.58983 4.34771 1.63291 4.35796 1.69084 4.37129C1.80623 4.39796 1.98213 4.43641 2.21443 4.48307C2.27187 4.49487 2.33237 4.50667 2.39647 4.51898C2.61186 3.00411 3.75134 1.75539 5.28364 1.42924L7.3852 0.982071V5.16051C7.71494 5.18563 8.05649 5.20925 8.41085 5.22977V0.923077C8.41085 0.413333 8.82418 0 9.33392 0H14.6673ZM19.9411 6.35181C18.076 6.61233 15.3739 6.87179 12.0011 6.87179C8.62827 6.87179 5.9257 6.61284 4.06109 6.35181C4.01493 6.34515 3.96929 6.339 3.92417 6.33233C3.90673 6.44104 3.89803 6.55283 3.89803 6.66667V17.7436C3.89803 18.9333 4.86213 19.8974 6.05187 19.8974H9.02623C9.26008 19.5862 9.63239 19.3846 10.0519 19.3846H13.9493C14.3688 19.3846 14.7411 19.5862 14.9749 19.8974H17.9493C19.139 19.8974 20.1032 18.9333 20.1032 17.7436H20.1042V6.66667C20.1042 6.55283 20.0949 6.44155 20.078 6.33233C20.0329 6.339 19.9872 6.34515 19.9411 6.35181ZM10.616 1.4359C10.3611 1.4359 10.1544 1.64256 10.1544 1.89744V2.14874C10.1544 3.06155 10.5601 3.92771 11.2616 4.51232L11.7052 4.88206C11.7909 4.95333 11.896 4.98923 12.0006 4.98923C12.1052 4.98923 12.2103 4.95334 12.296 4.88206L12.7396 4.51232C13.4411 3.92771 13.8467 3.06206 13.8467 2.14874V1.89744C13.8467 1.64257 13.6401 1.4359 13.3852 1.4359H10.616Z" fill="currentColor"/>
        </svg>
        Ask Opsmate
      </button>
    </div>

    <!-- Top Bar Card -->
    <header class="top-bar-card top-bar-card-v2">
      <!-- Left: SEV Badge & Status -->
      <div class="top-bar-card-left">
        <div class="sev-badge-large sev-2">
          <span class="sev-level">SEV 2</span>
        </div>
        <div class="status-stack">
          <span class="status-live-badge">Live</span>
          <span class="status-progress-badge">In Progress</span>
        </div>
      </div>

      <!-- Main Content Area -->
      <div class="top-bar-card-main">
        <!-- Title Row with Actions -->
        <div class="top-bar-title-row">
          <h1 class="incident-title-card">S448319 Taylor Swift - Life of a Showgirl - Only In Polish</h1>
          <div class="top-bar-card-actions">
            <button class="card-action-btn" id="editToggleBtn" onclick="toggleEditDrawer()">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
              </svg>
              <span id="editBtnText">Edit</span>
            </button>
            <button class="card-action-btn">Join EAM</button>
            <button class="card-icon-btn" title="Star">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
              </svg>
            </button>
            <button class="card-icon-btn" title="Notifications">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
              </svg>
            </button>
            <button class="card-action-btn affected-btn">+1(0)</button>
            <div class="card-btn-group">
              <button class="card-chat-btn">Join Chat</button>
              <button class="card-chat-dropdown">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </button>
            </div>
            <div class="more-dropdown-wrapper">
              <button class="card-icon-btn" title="More" onclick="toggleMoreDropdown(event)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="1"/>
                  <circle cx="19" cy="12" r="1"/>
                  <circle cx="5" cy="12" r="1"/>
                </svg>
              </button>
              <div class="more-dropdown-menu" id="moreDropdownMenu">
                <button class="more-dropdown-item" onclick="handleMoreOption('capacity')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                    <circle cx="9" cy="7" r="4"/>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                  </svg>
                  Capacity Help
                </button>
                <button class="more-dropdown-item" onclick="handleMoreOption('export')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                    <polyline points="7 10 12 15 17 10"/>
                    <line x1="12" y1="15" x2="12" y2="3"/>
                  </svg>
                  Export
                </button>
                <button class="more-dropdown-item" onclick="handleMoreOption('subscribers')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                    <circle cx="12" cy="7" r="4"/>
                  </svg>
                  Subscribers
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Meta Row -->
        <div class="incident-meta-row">
          <span class="meta-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
              <path d="M12 2L2 7l10 5 10-5-10-5z"/>
              <path d="M2 17l10 5 10-5"/>
              <path d="M2 12l10 5 10-5"/>
            </svg>
            Test
          </span>
          <span class="meta-separator">¬∑</span>
          <div class="meta-user-inline">
            <img src="https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=100&h=100&fit=crop&crop=face" alt="Jamie Gomez" class="user-thumb-small">
            <span>Jamie Gomez</span>
          </div>
          <span class="meta-separator">¬∑</span>
          <span class="meta-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
            </svg>
            0 New (Last comment 4.4 weeks ago)
          </span>
          <span class="meta-separator">¬∑</span>
          <span class="meta-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
              <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
              <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
            </svg>
            No Permission Requests
          </span>
        </div>
      </div>
    </header>

    <!-- Edit Drawer -->
    <div class="edit-drawer" id="editDrawer">
      <div class="edit-drawer-content">
        <!-- Row 1: Level + Hide toggle + Save -->
        <div class="edit-row edit-row-header">
          <div class="edit-field">
            <span class="edit-label">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                <circle cx="12" cy="12" r="10"/>
              </svg>
              Level
              <svg class="info-icon" viewBox="0 0 24 24" fill="currentColor" width="14" height="14">
                <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
                <text x="12" y="16" text-anchor="middle" fill="white" font-size="11" font-weight="bold">i</text>
              </svg>
            </span>
            <div class="edit-dropdown sev-dropdown">
              <span class="sev-dot orange"></span>
              SEV 2
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                <polyline points="6 9 12 15 18 9"/>
              </svg>
            </div>
          </div>
          <div class="edit-actions-right">
            <label class="edit-toggle-label">
              <svg class="info-icon" viewBox="0 0 24 24" fill="currentColor" width="14" height="14">
                <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
                <text x="12" y="16" text-anchor="middle" fill="white" font-size="11" font-weight="bold">i</text>
              </svg>
              Hide duplicate fields in summary
              <label class="toggle-switch-small">
                <input type="checkbox" checked>
                <span class="toggle-slider-small"></span>
              </label>
            </label>
            <button class="edit-save-btn" onclick="saveEditForm()">Save</button>
          </div>
        </div>

        <!-- Row 2: Title -->
        <div class="edit-row">
          <div class="edit-field edit-field-full">
            <span class="edit-label">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                <rect x="3" y="3" width="18" height="18" rx="2"/>
                <path d="M9 9h6M9 13h6M9 17h4"/>
              </svg>
              Title
              <svg class="info-icon" viewBox="0 0 24 24" fill="currentColor" width="14" height="14">
                <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
                <text x="12" y="16" text-anchor="middle" fill="white" font-size="11" font-weight="bold">i</text>
              </svg>
            </span>
            <input type="text" class="edit-input" id="titleInput" value="Taylor Swift - Life of a Showgirl - Only In Polish">
          </div>
        </div>

        <!-- Row 3: Type, Status, Stack -->
        <div class="edit-row">
          <div class="edit-field">
            <span class="edit-label">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                <rect x="3" y="3" width="18" height="18" rx="2"/>
                <path d="M3 9h18M9 21V9"/>
              </svg>
              Type
              <svg class="info-icon" viewBox="0 0 24 24" fill="currentColor" width="14" height="14">
                <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
                <text x="12" y="16" text-anchor="middle" fill="white" font-size="11" font-weight="bold">i</text>
              </svg>
            </span>
            <div class="edit-dropdown">
              Live
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                <polyline points="6 9 12 15 18 9"/>
              </svg>
            </div>
          </div>
          <div class="edit-field">
            <span class="edit-label">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <polyline points="22 4 12 14.01 9 11.01"/>
              </svg>
              Status
              <svg class="info-icon" viewBox="0 0 24 24" fill="currentColor" width="14" height="14">
                <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
                <text x="12" y="16" text-anchor="middle" fill="white" font-size="11" font-weight="bold">i</text>
              </svg>
            </span>
            <div class="status-dropdown-wrapper">
              <div class="edit-dropdown" id="statusDropdownBtn" onclick="toggleStatusDropdown(event)">
                <span class="status-icon" id="statusIcon">üî•</span>
                <span id="statusText">In Progress</span>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </div>
              <div class="status-dropdown-menu" id="statusDropdownMenu">
                <div class="status-option" onclick="selectStatus('planned', 'üìÖ', 'Planned')">
                  <div class="status-radio"></div>
                  <span class="status-option-icon">üìÖ</span>
                  <div class="status-option-content">
                    <div class="status-option-title">Planned</div>
                    <div class="status-option-desc">A planned event, maintenance or similar, that is known to affect production systems.</div>
                  </div>
                </div>
                <div class="status-option selected" onclick="selectStatus('in-progress', 'üî•', 'In Progress')" data-status="in-progress">
                  <div class="status-radio selected"></div>
                  <span class="status-option-icon">üî•</span>
                  <div class="status-option-content">
                    <div class="status-option-title">In Progress</div>
                    <div class="status-option-desc">An ongoing event, where neither a workaround nor fix are available.</div>
                  </div>
                </div>
                <div class="status-option" onclick="selectStatus('mitigated', '‚úÖ', 'Mitigated')">
                  <div class="status-radio"></div>
                  <span class="status-option-icon">‚úÖ</span>
                  <div class="status-option-content">
                    <div class="status-option-title">Mitigated</div>
                    <div class="status-option-desc">An ongoing event, where the issue has been mitigated/contained but cleanup or further fixes (beyond the immediate mitigation) are still required.</div>
                  </div>
                </div>
                <div class="status-option" onclick="selectStatus('blocked', '‚ùå', 'Blocked')">
                  <div class="status-radio"></div>
                  <span class="status-option-icon">‚ùå</span>
                  <div class="status-option-content">
                    <div class="status-option-title">Blocked</div>
                    <div class="status-option-desc">An ongoing event, where work on the issue is blocked in some way (e.g. providers fixing a fibre cut).</div>
                  </div>
                </div>
                <div class="status-option" onclick="selectStatus('fix-ready', 'üîß', 'Fix Ready')">
                  <div class="status-radio"></div>
                  <span class="status-option-icon">üîß</span>
                  <div class="status-option-content">
                    <div class="status-option-title">Fix Ready</div>
                    <div class="status-option-desc">An ongoing event, where a fix has been identified but has not been deployed.</div>
                  </div>
                </div>
                <div class="status-option" onclick="selectStatus('cleanup', 'üßπ', 'Cleanup')">
                  <div class="status-radio"></div>
                  <span class="status-option-icon">üßπ</span>
                  <div class="status-option-content">
                    <div class="status-option-title">Cleanup</div>
                    <div class="status-option-desc">A resolved event, where a fix has been deployed, but there are cleanup steps to be done (e.g. fixing corrupted data, backfilling data, etc).</div>
                  </div>
                </div>
                <div class="status-option" onclick="selectStatus('closed', 'üìÅ', 'Closed')">
                  <div class="status-radio"></div>
                  <span class="status-option-icon">üìÅ</span>
                  <div class="status-option-content">
                    <div class="status-option-title">Closed</div>
                    <div class="status-option-desc">A resolved event, where a fix has been deployed and all required cleanup steps have been completed.</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="edit-field">
            <span class="edit-label">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                <path d="M2 17l10 5 10-5"/>
                <path d="M2 12l10 5 10-5"/>
              </svg>
              Stack
              <svg class="info-icon" viewBox="0 0 24 24" fill="currentColor" width="14" height="14">
                <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
                <text x="12" y="16" text-anchor="middle" fill="white" font-size="11" font-weight="bold">i</text>
              </svg>
            </span>
            <div class="edit-dropdown">
              Test
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                <polyline points="6 9 12 15 18 9"/>
              </svg>
            </div>
          </div>
        </div>

        <!-- Row 4: Owner, Journalist -->
        <div class="edit-row">
          <div class="edit-field">
            <span class="edit-label">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
              </svg>
              Owner
              <svg class="info-icon" viewBox="0 0 24 24" fill="currentColor" width="14" height="14">
                <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
                <text x="12" y="16" text-anchor="middle" fill="white" font-size="11" font-weight="bold">i</text>
              </svg>
            </span>
            <div class="edit-user-field">
              <img src="https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=100&h=100&fit=crop&crop=face" alt="Jamie Gomez" class="edit-user-avatar">
              <span class="edit-user-name">Jamie Gomez</span>
            </div>
            <span class="edit-meta">¬∑ 11:59 AM ¬∑ Remote Location</span>
            <svg class="info-icon" viewBox="0 0 24 24" fill="currentColor" width="14" height="14">
              <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
              <text x="12" y="16" text-anchor="middle" fill="white" font-size="11" font-weight="bold">i</text>
            </svg>
          </div>
          <div class="edit-field">
            <span class="edit-label">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/>
              </svg>
              Journalist
              <svg class="info-icon" viewBox="0 0 24 24" fill="currentColor" width="14" height="14">
                <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
                <text x="12" y="16" text-anchor="middle" fill="white" font-size="11" font-weight="bold">i</text>
              </svg>
            </span>
            <div class="edit-user-field">
              <img src="https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=100&h=100&fit=crop&crop=face" alt="Jamie Gomez" class="edit-user-avatar">
              <span class="edit-user-name">Jamie Gomez</span>
            </div>
            <span class="edit-meta">¬∑ 11:59 AM ¬∑ Remote Location</span>
            <svg class="info-icon" viewBox="0 0 24 24" fill="currentColor" width="14" height="14">
              <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
              <text x="12" y="16" text-anchor="middle" fill="white" font-size="11" font-weight="bold">i</text>
            </svg>
          </div>
        </div>
      </div>
    </div>

    <!-- Two Column Layout -->
    <div class="content-area">
      <!-- Left Column -->
      <aside class="left-column" id="leftColumn">
        <!-- Left Nav Bar (Fixed) -->
        <div class="panel-nav">
          <button class="panel-nav-icon" onclick="scrollToSection('escalations')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
            </svg>
          </button>
          <nav class="panel-tabs">
            <a href="#summary" class="panel-tab active" onclick="scrollToSection('summary', event)">Summary</a>
            <a href="#opsmate" class="panel-tab" onclick="scrollToSection('opsmate', event)">Opsmate</a>
            <a href="#report" class="panel-tab" onclick="scrollToSection('report', event)">Report</a>
            <a href="#live-tracker" class="panel-tab" onclick="scrollToSection('live-tracker', event)">Live Tracker</a>
            <a href="#sevs" class="panel-tab" onclick="scrollToSection('sevs', event)">Related SEVs</a>
            <a href="#related-tasks" class="panel-tab" onclick="scrollToSection('related-tasks', event)">Related Tasks</a>
            <a href="#review" class="panel-tab" onclick="scrollToSection('review', event)">Review</a>
          </nav>
        </div>

        <!-- Scrollable Cards Container -->
        <div class="left-column-scroll" id="leftColumnScroll">
        <!-- Escalations Card -->
        <div class="content-card" id="escalations">
          <div class="card-header">
            <h3 class="card-title">Escalations</h3>
            <div class="escalation-header-actions">
              <label class="toggle-switch">
                <input type="checkbox">
                <span class="toggle-slider"></span>
              </label>
              <span class="toggle-label">Show in Megaphones</span>
              <a href="#" class="link-action">Show main oncalls</a>
            </div>
          </div>
          <div class="card-body">
            <div class="search-input">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="search-icon">
                <circle cx="11" cy="11" r="8"/>
                <path d="M21 21l-4.35-4.35"/>
              </svg>
              <input type="text" placeholder="Type oncall rotation/employee name" class="search-field">
            </div>
            <div class="escalation-row">
              <div class="escalation-left">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="escalation-icon">
                  <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                </svg>
                <span class="escalation-label">Active & Past escalations</span>
              </div>
              <div class="escalation-right">
                <span class="escalation-count">0</span>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="escalation-arrow">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </div>
            </div>
          </div>
        </div>

        <!-- Opsmate Card -->
        <div class="content-card opsmate-card" id="opsmate">
          <div class="card-header">
            <div class="opsmate-header">
              <div class="opsmate-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0206 15.0256C10.3164 15.8619 11.1136 16.4613 12.0513 16.4615C12.9891 16.4613 13.7863 15.8619 14.0821 15.0256H15.1493C14.8242 16.4359 13.5606 17.4872 12.0514 17.4872C10.5427 17.4872 9.27906 16.4359 8.95341 15.0256H10.0206ZM12.0508 16.4615H12.0519C12.0517 16.4615 12.0515 16.4615 12.0513 16.4615C12.0512 16.4615 12.051 16.4615 12.0508 16.4615Z" fill="black"/>
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.12879 7.38461C9.61545 7.38462 10.8211 8.59026 10.8211 10.0769C10.8211 11.5636 9.61545 12.7692 8.12879 12.7692C6.64213 12.7692 5.43649 11.5636 5.43649 10.0769C5.43649 8.59026 6.64213 7.38461 8.12879 7.38461ZM8.12879 8.41026C7.20828 8.41026 6.46213 9.15641 6.46213 10.0769C6.46213 10.9974 7.20828 11.7436 8.12879 11.7436C9.0493 11.7436 9.79546 10.9974 9.79546 10.0769C9.79546 9.15641 9.0493 8.41026 8.12879 8.41026Z" fill="black"/>
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M15.8724 7.38461C17.359 7.38462 18.5647 8.59026 18.5647 10.0769C18.5647 11.5636 17.359 12.7692 15.8724 12.7692C14.3857 12.7692 13.1801 11.5636 13.1801 10.0769C13.1801 8.59026 14.3857 7.38461 15.8724 7.38461ZM15.8724 8.41026C14.9519 8.41026 14.2057 9.15641 14.2057 10.0769C14.2057 10.9974 14.9519 11.7436 15.8724 11.7436C16.7929 11.7436 17.5391 10.9974 17.5391 10.0769C17.5391 9.15641 16.7929 8.41026 15.8724 8.41026Z" fill="black"/>
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M14.6673 0C15.177 6.43207e-06 15.5903 0.413337 15.5903 0.923077V5.22922C15.9447 5.2087 16.2862 5.18513 16.616 5.16001V0.98152L18.7175 1.42874C20.2498 1.75489 21.3893 3.00361 21.6047 4.51848C21.6688 4.50617 21.7293 4.49385 21.7867 4.48257C22.019 4.43591 22.1944 4.39746 22.3103 4.37079C22.3683 4.35746 22.4114 4.34716 22.439 4.34049C22.4529 4.33742 22.4631 4.33487 22.4693 4.33333C22.4724 4.33282 22.4744 4.33178 22.4755 4.33178H22.476C22.8877 4.22614 23.3067 4.47435 23.4123 4.88562H23.4113C23.517 5.29741 23.2688 5.71642 22.8575 5.82206C22.8483 5.82463 22.8185 5.83178 22.8016 5.83589C22.7673 5.84409 22.718 5.85592 22.6534 5.87079C22.5247 5.90002 22.3354 5.94154 22.0888 5.99129C21.9442 6.02 21.7795 6.05179 21.5954 6.08564C21.6252 6.27487 21.6411 6.46923 21.6411 6.66667V17.7436C21.6411 19.7667 20.0139 21.4103 17.9965 21.4359H14.9744C14.7406 21.7472 14.3683 21.9487 13.9488 21.9487H10.0514C9.63189 21.9487 9.25958 21.7472 9.02573 21.4359H6.00364C3.98621 21.4108 2.35906 19.7672 2.35906 17.7441V6.66717C2.35906 6.46922 2.37494 6.27536 2.40469 6.08614C2.22058 6.05229 2.05596 6.02102 1.91135 5.99179C1.66469 5.94256 1.47597 5.90104 1.34674 5.87129C1.28213 5.85642 1.23287 5.84459 1.19851 5.83639C1.18158 5.83228 1.15184 5.82513 1.14262 5.82257C0.731345 5.71692 0.483149 5.29744 0.58878 4.88617C0.694421 4.47489 1.1139 4.2267 1.52518 4.33233H1.52573C1.52676 4.33235 1.5288 4.33332 1.53184 4.33383C1.53799 4.33537 1.54829 4.33746 1.56214 4.34105C1.58983 4.34771 1.63291 4.35796 1.69084 4.37129C1.80623 4.39796 1.98213 4.43641 2.21443 4.48307C2.27187 4.49487 2.33237 4.50667 2.39647 4.51898C2.61186 3.00411 3.75134 1.75539 5.28364 1.42924L7.3852 0.982071V5.16051C7.71494 5.18563 8.05649 5.20925 8.41085 5.22977V0.923077C8.41085 0.413333 8.82418 0 9.33392 0H14.6673ZM19.9411 6.35181C18.076 6.61233 15.3739 6.87179 12.0011 6.87179C8.62827 6.87179 5.9257 6.61284 4.06109 6.35181C4.01493 6.34515 3.96929 6.339 3.92417 6.33233C3.90673 6.44104 3.89803 6.55283 3.89803 6.66667V17.7436C3.89803 18.9333 4.86213 19.8974 6.05187 19.8974H9.02623C9.26008 19.5862 9.63239 19.3846 10.0519 19.3846H13.9493C14.3688 19.3846 14.7411 19.5862 14.9749 19.8974H17.9493C19.139 19.8974 20.1032 18.9333 20.1032 17.7436H20.1042V6.66667C20.1042 6.55283 20.0949 6.44155 20.078 6.33233C20.0329 6.339 19.9872 6.34515 19.9411 6.35181ZM10.616 1.4359C10.3611 1.4359 10.1544 1.64256 10.1544 1.89744V2.14874C10.1544 3.06155 10.5601 3.92771 11.2616 4.51232L11.7052 4.88206C11.7909 4.95333 11.896 4.98923 12.0006 4.98923C12.1052 4.98923 12.2103 4.95334 12.296 4.88206L12.7396 4.51232C13.4411 3.92771 13.8467 3.06206 13.8467 2.14874V1.89744C13.8467 1.64257 13.6401 1.4359 13.3852 1.4359H10.616Z" fill="black"/>
                </svg>
              </div>
              <div class="opsmate-info">
                <h3 class="opsmate-title">Opsmate</h3>
                <p class="opsmate-subtitle">Analysis run on Dec 15, 2025, 6:16 PM</p>
              </div>
            </div>
            <div class="opsmate-actions">
              <button class="pill-btn blue" id="opsmate-explore-btn" onclick="openOpsmateOverlay()">Explore</button>
              <button class="card-toggle" onclick="toggleOpsmate(this)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="18 15 12 9 6 15"/>
                </svg>
              </button>
            </div>
          </div>
          <div class="card-divider opsmate-collapsible"></div>
          <div class="card-body opsmate-collapsible">
            <div class="finding-section">
              <h4 class="finding-label">Root Cause</h4>
              <p class="finding-text">The auth service HTTP client was configured with aggressive timeout settings (500ms) that caused cascading failures during periods of elevated network latency. The retry mechanism lacked exponential backoff, leading to thundering herd issues when multiple services attempted simultaneous reconnections.</p>
            </div>
            <div class="finding-section" style="margin-top: 16px;">
              <h4 class="finding-label">Mitigation</h4>
              <p class="finding-text">Implemented retry logic with exponential backoff across all auth service HTTP calls. Added a circuit breaker pattern to prevent cascade failures during service degradation, along with configurable timeout policies. Error rates have dropped by 94% since deployment, and the system now gracefully handles transient network issues without impacting user sessions.</p>
            </div>
          </div>
        </div>

        <!-- Summary Card -->
        <div class="content-card" id="summary">
          <div class="card-header">
            <h3 class="card-title">Summary</h3>
            <button class="card-toggle" onclick="toggleCard(this)">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="6 9 12 15 18 9"/>
              </svg>
            </button>
          </div>
          <div class="card-body summary-body">
            <!-- Incident Impact -->
            <div class="summary-field">
              <div class="summary-field-header">
                <svg class="summary-field-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="18" height="18" rx="2"/>
                  <line x1="12" y1="8" x2="12" y2="12"/>
                  <circle cx="12" cy="16" r="1"/>
                </svg>
                <span class="summary-field-label">Incident Impact</span>
                <svg class="summary-info-icon" viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                  <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
                  <text x="12" y="16" text-anchor="middle" fill="white" font-size="12" font-weight="bold">i</text>
                </svg>
              </div>
              <input type="text" class="summary-text-input" placeholder="How is this incident affecting our people or our services?">
            </div>

            <!-- Linked SLIs / HealthCompass Metrics -->
            <div class="summary-field">
              <div class="summary-field-header expandable">
                <svg class="summary-field-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                </svg>
                <span class="summary-field-label">Linked SLIs / HealthCompass Metrics</span>
                <span class="summary-count-badge">0</span>
                <svg class="summary-info-icon" viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                  <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
                  <text x="12" y="16" text-anchor="middle" fill="white" font-size="12" font-weight="bold">i</text>
                </svg>
                <button class="summary-expand-btn">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 15 18 9"/>
                  </svg>
                </button>
              </div>
              
              <!-- Sub-items -->
              <div class="summary-sub-item">
                <button class="summary-expand-arrow">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="9 18 15 12 9 6"/>
                  </svg>
                </button>
                <span class="summary-sub-label">Root Cause Area related SLIs</span>
                <svg class="summary-info-icon" viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                  <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
                  <text x="12" y="16" text-anchor="middle" fill="white" font-size="12" font-weight="bold">i</text>
                </svg>
                <div class="summary-sub-actions">
                  <button class="summary-link-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                      <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                      <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                    </svg>
                    Link
                  </button>
                </div>
              </div>
              
              <div class="summary-sub-item">
                <button class="summary-expand-arrow">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="9 18 15 12 9 6"/>
                  </svg>
                </button>
                <span class="summary-sub-label">Impacted Areas related SLIs</span>
                <svg class="summary-info-icon" viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                  <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
                  <text x="12" y="16" text-anchor="middle" fill="white" font-size="12" font-weight="bold">i</text>
                </svg>
                <div class="summary-sub-actions">
                  <button class="summary-link-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                      <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                      <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                    </svg>
                    Link
                  </button>
                </div>
              </div>
            </div>

            <!-- Impacted Areas -->
            <div class="summary-field">
              <div class="summary-field-header">
                <svg class="summary-field-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="3"/>
                  <circle cx="12" cy="5" r="2"/>
                  <circle cx="19" cy="12" r="2"/>
                  <circle cx="12" cy="19" r="2"/>
                  <circle cx="5" cy="12" r="2"/>
                </svg>
                <span class="summary-field-label">Impacted Areas</span>
                <svg class="summary-info-icon" viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                  <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
                  <text x="12" y="16" text-anchor="middle" fill="white" font-size="12" font-weight="bold">i</text>
                </svg>
                <a href="#" class="summary-help-link">Learn How to Link Shaman Project?</a>
              </div>
              <div class="summary-dropdown-input">
                <span>Add impacted areas</span>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </div>
            </div>

            <!-- Impacted Risk Domains -->
            <div class="summary-field">
              <div class="summary-field-header">
                <svg class="summary-field-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                </svg>
                <span class="summary-field-label">Impacted Risk Domains</span>
                <svg class="summary-info-icon" viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                  <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
                  <text x="12" y="16" text-anchor="middle" fill="white" font-size="12" font-weight="bold">i</text>
                </svg>
                <button class="summary-select-dark">
                  Select
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                    <polyline points="6 9 12 15 18 9"/>
                  </svg>
                </button>
              </div>
            </div>

            <!-- Impacted Services -->
            <div class="summary-field">
              <div class="summary-field-header">
                <svg class="summary-field-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="3"/>
                  <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                </svg>
                <span class="summary-field-label">Impacted Services</span>
                <svg class="summary-info-icon" viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                  <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
                  <text x="12" y="16" text-anchor="middle" fill="white" font-size="12" font-weight="bold">i</text>
                </svg>
                <div class="summary-field-actions">
                  <span class="summary-na-badge">Not Applicable</span>
                  <button class="summary-link-dropdown">
                    Link Services
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                      <polyline points="6 9 12 15 18 9"/>
                    </svg>
                  </button>
                </div>
              </div>
            </div>

            <!-- Root Cause Areas -->
            <div class="summary-field">
              <div class="summary-field-header">
                <svg class="summary-field-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                  <polyline points="22 4 12 14.01 9 11.01"/>
                </svg>
                <span class="summary-field-label">Root Cause Areas</span>
                <svg class="summary-info-icon" viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                  <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
                  <text x="12" y="16" text-anchor="middle" fill="white" font-size="12" font-weight="bold">i</text>
                </svg>
              </div>
              <div class="summary-dropdown-input">
                <span>Add root cause areas</span>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </div>
            </div>

            <!-- Root Cause Services -->
            <div class="summary-field">
              <div class="summary-field-header">
                <svg class="summary-field-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="3"/>
                  <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                </svg>
                <span class="summary-field-label">Root Cause Services</span>
                <svg class="summary-info-icon" viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                  <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
                  <text x="12" y="16" text-anchor="middle" fill="white" font-size="12" font-weight="bold">i</text>
                </svg>
                <div class="summary-field-actions">
                  <span class="summary-na-badge">Not Applicable</span>
                  <button class="summary-link-dropdown">
                    Link Services
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                      <polyline points="6 9 12 15 18 9"/>
                    </svg>
                  </button>
                </div>
              </div>
            </div>

            <!-- Detection Method -->
            <div class="summary-field">
              <div class="summary-field-header">
                <svg class="summary-field-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="11" cy="11" r="8"/>
                  <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                </svg>
                <span class="summary-field-label">Detection Method</span>
                <svg class="summary-info-icon" viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                  <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
                  <text x="12" y="16" text-anchor="middle" fill="white" font-size="12" font-weight="bold">i</text>
                </svg>
                <button class="summary-select-dark wide">
                  Select
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                    <polyline points="6 9 12 15 18 9"/>
                  </svg>
                </button>
                <button class="summary-link-text">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                    <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                  </svg>
                  Link Alert
                </button>
                <button class="summary-link-text">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                    <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                  </svg>
                  Link Task
                </button>
              </div>
            </div>

            <div class="summary-divider"></div>

            <!-- Owner -->
            <div class="summary-field">
              <div class="summary-field-header owner-row">
                <svg class="summary-field-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                  <circle cx="12" cy="7" r="4"/>
                </svg>
                <span class="summary-field-label">Owner</span>
                <svg class="summary-info-icon" viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                  <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
                  <text x="12" y="16" text-anchor="middle" fill="white" font-size="12" font-weight="bold">i</text>
                </svg>
                <svg class="summary-expand-arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                  <polyline points="9 18 15 12 9 6"/>
                </svg>
                <div class="owner-info">
                  <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face" alt="Owner" class="owner-avatar">
                  <input type="text" class="owner-name-input" value="Junchen Zhang">
                </div>
                <span class="owner-meta">¬∑ 1:59 PM ¬∑ Sunnyvale</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Report Card -->
        <div class="content-card" id="report">
          <div class="card-header report-card-header">
            <div class="report-header-top">
              <h3 class="card-title">Report</h3>
              <button class="card-toggle" onclick="toggleCard(this)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </button>
            </div>
            <div class="report-status-row">
              <div class="report-status-dropdown">
                <span>Report Required</span>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </div>
              <svg class="info-icon-small" viewBox="0 0 24 24" fill="#9ca3af" width="18" height="18">
                <circle cx="12" cy="12" r="10"/>
                <text x="12" y="16" text-anchor="middle" fill="white" font-size="12" font-weight="bold">i</text>
              </svg>
            </div>
          </div>
          <div class="card-body report-body">
            <!-- Overview Section -->
            <div class="report-section">
              <div class="report-section-header">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                  <line x1="3" y1="9" x2="21" y2="9"/>
                  <line x1="9" y1="21" x2="9" y2="9"/>
                </svg>
                <span class="report-section-title">Overview</span>
                <svg class="info-icon-small" viewBox="0 0 24 24" fill="#9ca3af" width="16" height="16">
                  <circle cx="12" cy="12" r="10"/>
                  <text x="12" y="16" text-anchor="middle" fill="white" font-size="11" font-weight="bold">i</text>
                </svg>
            </div>
              <div class="report-input-row">
                <input type="text" class="report-input" placeholder="A tl;dr of what broke, who it affected, and why it broke.">
                <button class="ai-assist-btn">
                  <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                    <path d="M12 2L9 9H2l6 4.5L5 22l7-5 7 5-3-8.5L22 9h-7L12 2z"/>
                  </svg>
                </button>
            </div>
              <div class="report-followup-row">
                <div class="followup-left">
                  <svg class="followup-icon" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#6b7280" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="3"/>
                    <path d="M7 12l3 3 7-7" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <span class="followup-count">0</span>
                  <span class="followup-label">Other SEV followup tasks</span>
                </div>
                <div class="followup-actions">
                  <button class="followup-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                      <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                      <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                    </svg>
                    Link
                  </button>
                  <button class="followup-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                      <line x1="12" y1="5" x2="12" y2="19"/>
                      <line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                    Create
                  </button>
                  <button class="followup-chevron">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                      <polyline points="9 18 15 12 9 6"/>
                    </svg>
                  </button>
                </div>
              </div>
            </div>

            <!-- Triggers Section -->
            <div class="report-section">
              <div class="report-section-header">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                  <path d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                </svg>
                <span class="report-section-title">Triggers</span>
                <svg class="info-icon-small" viewBox="0 0 24 24" fill="#9ca3af" width="16" height="16">
                  <circle cx="12" cy="12" r="10"/>
                  <text x="12" y="16" text-anchor="middle" fill="white" font-size="11" font-weight="bold">i</text>
                </svg>
              </div>
              <div class="report-dropdown-row">
                <select class="report-select">
                  <option>Please add Trigger(s)</option>
                </select>
              </div>
            </div>

            <!-- Root Cause Detail Section -->
            <div class="report-section">
              <div class="report-section-header">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                  <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                  <polyline points="22 4 12 14.01 9 11.01"/>
                </svg>
                <span class="report-section-title">Root Cause Detail</span>
                <svg class="info-icon-small" viewBox="0 0 24 24" fill="#9ca3af" width="16" height="16">
                  <circle cx="12" cy="12" r="10"/>
                  <text x="12" y="16" text-anchor="middle" fill="white" font-size="11" font-weight="bold">i</text>
                </svg>
              </div>
              <div class="report-input-row">
                <input type="text" class="report-input" placeholder="Explanatory detail around the root cause listed above">
                <button class="ai-assist-btn">
                  <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                    <path d="M12 2L9 9H2l6 4.5L5 22l7-5 7 5-3-8.5L22 9h-7L12 2z"/>
                  </svg>
                </button>
              </div>
              <div class="followup-container expanded">
                <div class="followup-header">
                  <div class="followup-left">
                    <svg class="followup-icon" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#6b7280" stroke-width="2">
                      <rect x="3" y="3" width="18" height="18" rx="3"/>
                      <path d="M7 12l3 3 7-7" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span class="followup-count has-items">1</span>
                    <span class="followup-label">Root Cause SEV followup tasks</span>
                  </div>
                  <div class="followup-actions">
                    <button class="followup-btn">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                      </svg>
                      Link
                    </button>
                    <button class="followup-btn">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                        <line x1="12" y1="5" x2="12" y2="19"/>
                        <line x1="5" y1="12" x2="19" y2="12"/>
                      </svg>
                      Create
                    </button>
                    <button class="followup-chevron">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                        <polyline points="6 9 12 15 18 9"/>
                      </svg>
                    </button>
                  </div>
                </div>
                <div class="followup-content opsmate-suggestions-container" style="display: none;">
                  <div class="ai-suggestions-section">
                    <div class="ai-suggestions-list">
                      <div class="ai-suggestion-task" onclick="openTaskPanelWithTask('T251794064', 'Refactor authentication module to handle token refresh failures', 'Medium Term')">
                        <span class="task-priority medium">Medium Term</span>
                        <a href="#" class="task-id" onclick="event.stopPropagation()">T251794064</a>
                        <span class="task-title">Refactor authentication module to handle token refresh failures</span>
                        <button class="task-menu-btn" onclick="event.stopPropagation()">
                          <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                            <circle cx="5" cy="12" r="2"/>
                            <circle cx="12" cy="12" r="2"/>
                            <circle cx="19" cy="12" r="2"/>
                          </svg>
                        </button>
                      </div>
                      <div class="ai-suggestion-task" onclick="openTaskPanelWithTask('T251794065', 'Add retry logic to auth service calls', 'Short Term')">
                        <span class="task-priority short">Short Term</span>
                        <a href="#" class="task-id" onclick="event.stopPropagation()">T251794065</a>
                        <span class="task-title">Add retry logic to auth service calls</span>
                        <span class="task-closed-inline">Closed</span>
                        <button class="task-menu-btn" onclick="event.stopPropagation()">
                          <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                            <circle cx="5" cy="12" r="2"/>
                            <circle cx="12" cy="12" r="2"/>
                            <circle cx="19" cy="12" r="2"/>
                          </svg>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Detection Section -->
            <div class="report-section-divider">
              <h4 class="report-section-group-title">Detection</h4>
              <p class="report-section-group-subtitle">How we first discovered this SEV to be an incident</p>
            </div>

            <!-- Detection Details Section -->
            <div class="report-section">
              <div class="report-section-header">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                  <circle cx="11" cy="11" r="8"/>
                  <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                </svg>
                <span class="report-section-title">Detection Details</span>
                <svg class="info-icon-small" viewBox="0 0 24 24" fill="#9ca3af" width="16" height="16">
                  <circle cx="12" cy="12" r="10"/>
                  <text x="12" y="16" text-anchor="middle" fill="white" font-size="11" font-weight="bold">i</text>
                </svg>
              </div>
              <div class="report-input-row">
                <input type="text" class="report-input" placeholder="How was this detected? Could we detect this problem more quickly?">
                <button class="ai-assist-btn">
                  <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                    <path d="M12 2L9 9H2l6 4.5L5 22l7-5 7 5-3-8.5L22 9h-7L12 2z"/>
                  </svg>
                </button>
              </div>
              <div class="report-followup-row">
                <div class="followup-left">
                  <svg class="followup-icon" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#6b7280" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="3"/>
                    <path d="M7 12l3 3 7-7" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <span class="followup-count">0</span>
                  <span class="followup-label">Detection SEV followup tasks</span>
                </div>
                <div class="followup-actions">
                  <button class="followup-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                      <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                      <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                    </svg>
                    Link
                  </button>
                  <button class="followup-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                      <line x1="12" y1="5" x2="12" y2="19"/>
                      <line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                    Create
                  </button>
                  <button class="followup-chevron expanded">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                      <polyline points="6 9 12 15 18 9"/>
                    </svg>
                  </button>
                </div>
              </div>
              <div class="followup-content opsmate-suggestions-container" style="display: none;">
                <div class="ai-suggestions-section">
                  <div class="ai-suggestions-list">
                    <div class="ai-suggestion-task" onclick="openTaskPanelWithTask('T251794082', 'Improve alert threshold sensitivity for API latency spikes', 'Short Term')">
                      <span class="task-priority short">Short Term</span>
                      <a href="#" class="task-id" onclick="event.stopPropagation()">T251794082</a>
                      <span class="task-title">Improve alert threshold sensitivity for API latency spikes</span>
                      <button class="task-menu-btn" onclick="event.stopPropagation()">
                        <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                          <circle cx="5" cy="12" r="2"/>
                          <circle cx="12" cy="12" r="2"/>
                          <circle cx="19" cy="12" r="2"/>
                        </svg>
                      </button>
                    </div>
                    <div class="ai-suggestion-task" onclick="openTaskPanelWithTask('T251794083', 'Add automated anomaly detection for traffic patterns', 'Medium Term')">
                      <span class="task-priority medium">Medium Term</span>
                      <a href="#" class="task-id" onclick="event.stopPropagation()">T251794083</a>
                      <span class="task-title">Add automated anomaly detection for traffic patterns</span>
                      <button class="task-menu-btn" onclick="event.stopPropagation()">
                        <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                          <circle cx="5" cy="12" r="2"/>
                          <circle cx="12" cy="12" r="2"/>
                          <circle cx="19" cy="12" r="2"/>
                        </svg>
                      </button>
                    </div>
                    <div class="ai-suggestion-task" onclick="openTaskPanelWithTask('T251794084', 'Configure error rate alerting for payment service', 'Short Term')">
                      <span class="task-priority short">Short Term</span>
                      <a href="#" class="task-id" onclick="event.stopPropagation()">T251794084</a>
                      <span class="task-title">Configure error rate alerting for payment service</span>
                      <span class="task-closed-inline">Closed</span>
                      <button class="task-menu-btn" onclick="event.stopPropagation()">
                        <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                          <circle cx="5" cy="12" r="2"/>
                          <circle cx="12" cy="12" r="2"/>
                          <circle cx="19" cy="12" r="2"/>
                        </svg>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Escalation Section -->
            <div class="report-section">
              <div class="report-section-header">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                  <path d="M7 17l9.2-9.2M17 17V7H7"/>
                </svg>
                <span class="report-section-title">Escalation</span>
                <svg class="info-icon-small" viewBox="0 0 24 24" fill="#9ca3af" width="16" height="16">
                  <circle cx="12" cy="12" r="10"/>
                  <text x="12" y="16" text-anchor="middle" fill="white" font-size="11" font-weight="bold">i</text>
                </svg>
              </div>
              <div class="report-input-row">
                <input type="text" class="report-input" placeholder="How did we escalate? How could we have responded faster?">
                <button class="ai-assist-btn">
                  <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                    <path d="M12 2L9 9H2l6 4.5L5 22l7-5 7 5-3-8.5L22 9h-7L12 2z"/>
                  </svg>
                </button>
              </div>
              <div class="report-followup-row">
                <div class="followup-left">
                  <svg class="followup-icon" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#6b7280" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="3"/>
                    <path d="M7 12l3 3 7-7" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <span class="followup-count">0</span>
                  <span class="followup-label">Escalation SEV followup tasks</span>
                </div>
                <div class="followup-actions">
                  <button class="followup-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                      <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                      <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                    </svg>
                    Link
                  </button>
                  <button class="followup-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                      <line x1="12" y1="5" x2="12" y2="19"/>
                      <line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                    Create
                  </button>
                  <button class="followup-chevron">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                      <polyline points="9 18 15 12 9 6"/>
                    </svg>
                  </button>
                </div>
              </div>
            </div>

            <!-- Remediation Section -->
            <div class="report-section">
              <div class="report-section-header">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                  <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>
                </svg>
                <span class="report-section-title">Remediation</span>
                <svg class="info-icon-small" viewBox="0 0 24 24" fill="#9ca3af" width="16" height="16">
                  <circle cx="12" cy="12" r="10"/>
                  <text x="12" y="16" text-anchor="middle" fill="white" font-size="11" font-weight="bold">i</text>
                </svg>
              </div>
              <div class="report-input-row">
                <input type="text" class="report-input" placeholder="How did we remediate this? How can we mitigate this problem faster?">
                <button class="ai-assist-btn">
                  <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                    <path d="M12 2L9 9H2l6 4.5L5 22l7-5 7 5-3-8.5L22 9h-7L12 2z"/>
                  </svg>
                </button>
              </div>
              <div class="report-followup-row">
                <div class="followup-left">
                  <svg class="followup-icon" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#6b7280" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="3"/>
                    <path d="M7 12l3 3 7-7" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <span class="followup-count">0</span>
                  <span class="followup-label">Mitigation SEV followup tasks</span>
                </div>
                <div class="followup-actions">
                  <button class="followup-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                      <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                      <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                    </svg>
                    Link
                  </button>
                  <button class="followup-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                      <line x1="12" y1="5" x2="12" y2="19"/>
                      <line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                    Create
                  </button>
                  <button class="followup-chevron">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                      <polyline points="9 18 15 12 9 6"/>
                    </svg>
                  </button>
                </div>
              </div>
            </div>

            <!-- Prevention Section -->
            <div class="report-section">
              <div class="report-section-header">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                  <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                  <polyline points="22 4 12 14.01 9 11.01"/>
                </svg>
                <span class="report-section-title">Prevention</span>
                <svg class="info-icon-small" viewBox="0 0 24 24" fill="#9ca3af" width="16" height="16">
                  <circle cx="12" cy="12" r="10"/>
                  <text x="12" y="16" text-anchor="middle" fill="white" font-size="11" font-weight="bold">i</text>
                </svg>
              </div>
              <div class="report-input-row">
                <input type="text" class="report-input" placeholder="What can we do to prevent this problem from happening again?">
                <button class="ai-assist-btn">
                  <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                    <path d="M12 2L9 9H2l6 4.5L5 22l7-5 7 5-3-8.5L22 9h-7L12 2z"/>
                  </svg>
                </button>
              </div>
              <div class="report-followup-row">
                <div class="followup-left">
                  <svg class="followup-icon" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#6b7280" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="3"/>
                    <path d="M7 12l3 3 7-7" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <span class="followup-count">0</span>
                  <span class="followup-label">Prevention SEV followup tasks</span>
                </div>
                <div class="followup-actions">
                  <button class="followup-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                      <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                      <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                    </svg>
                    Link
                  </button>
                  <button class="followup-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                      <line x1="12" y1="5" x2="12" y2="19"/>
                      <line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                    Create
                  </button>
                  <button class="followup-chevron expanded">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                      <polyline points="6 9 12 15 18 9"/>
                    </svg>
                  </button>
                </div>
              </div>
              <div class="followup-content opsmate-suggestions-container" style="display: none;">
                <div class="ai-suggestions-section">
                  <div class="ai-suggestions-list">
                    <div class="ai-suggestion-task" onclick="openTaskPanelWithTask('T251794091', 'Implement circuit breaker pattern for downstream services', 'Long Term')">
                      <span class="task-priority long">Long Term</span>
                      <a href="#" class="task-id" onclick="event.stopPropagation()">T251794091</a>
                      <span class="task-title">Implement circuit breaker pattern for downstream services</span>
                      <button class="task-menu-btn" onclick="event.stopPropagation()">
                        <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                          <circle cx="5" cy="12" r="2"/>
                          <circle cx="12" cy="12" r="2"/>
                          <circle cx="19" cy="12" r="2"/>
                        </svg>
                      </button>
                    </div>
                    <div class="ai-suggestion-task" onclick="openTaskPanelWithTask('T251794092', 'Add rate limiting to prevent cascading failures', 'Medium Term')">
                      <span class="task-priority medium">Medium Term</span>
                      <a href="#" class="task-id" onclick="event.stopPropagation()">T251794092</a>
                      <span class="task-title">Add rate limiting to prevent cascading failures</span>
                      <button class="task-menu-btn" onclick="event.stopPropagation()">
                        <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                          <circle cx="5" cy="12" r="2"/>
                          <circle cx="12" cy="12" r="2"/>
                          <circle cx="19" cy="12" r="2"/>
                        </svg>
                      </button>
                    </div>
                    <div class="ai-suggestion-task" onclick="openTaskPanelWithTask('T251794093', 'Update runbook with rollback procedures', 'Short Term')">
                      <span class="task-priority short">Short Term</span>
                      <a href="#" class="task-id" onclick="event.stopPropagation()">T251794093</a>
                      <span class="task-title">Update runbook with rollback procedures</span>
                      <button class="task-menu-btn" onclick="event.stopPropagation()">
                        <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                          <circle cx="5" cy="12" r="2"/>
                          <circle cx="12" cy="12" r="2"/>
                          <circle cx="19" cy="12" r="2"/>
                        </svg>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Contributing Factors Section -->
            <div class="report-section">
              <div class="report-section-header">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                  <circle cx="12" cy="12" r="3"/>
                  <path d="M12 1v4m0 14v4m-9-9h4m14 0h-4"/>
                  <path d="M5.6 5.6l2.8 2.8m7.2 7.2l2.8 2.8m0-12.8l-2.8 2.8m-7.2 7.2l-2.8 2.8"/>
                </svg>
                <span class="report-section-title">Contributing Factors</span>
                <svg class="info-icon-small" viewBox="0 0 24 24" fill="#9ca3af" width="16" height="16">
                  <circle cx="12" cy="12" r="10"/>
                  <text x="12" y="16" text-anchor="middle" fill="white" font-size="11" font-weight="bold">i</text>
                </svg>
              </div>
              <div class="report-dropdown-row">
                <select class="report-select">
                  <option>Please add Contributing Factor(s)</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <!-- Live Tracker Card -->
        <div class="content-card" id="live-tracker">
          <div class="card-header">
            <h3 class="card-title">Live Tracker</h3>
            <button class="card-toggle collapsed" onclick="toggleCard(this)">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="6 9 12 15 18 9"/>
              </svg>
            </button>
          </div>
          <div class="card-body">
            <!-- Deployment Status Section -->
            <div class="tracker-section">
              <div class="tracker-section-header">
                <div class="tracker-title-row">
                  <svg class="tracker-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                    <circle cx="12" cy="12" r="10"/>
                    <circle cx="12" cy="12" r="6"/>
                    <circle cx="12" cy="12" r="2"/>
                  </svg>
                  <span class="tracker-title">Deployment Status</span>
                  <svg class="tracker-info-icon" viewBox="0 0 24 24" width="16" height="16">
                    <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
                    <text x="12" y="16" text-anchor="middle" fill="white" font-size="12" font-weight="bold">i</text>
                  </svg>
                </div>
                <div class="tracker-actions">
                  <span class="tracker-count-badge">0</span>
                  <button class="tracker-select-btn">
                    Select WWW Diff
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                      <polyline points="6 9 12 15 18 9"/>
                    </svg>
                  </button>
                  <button class="tracker-subscribe-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                      <path d="M4 11a9 9 0 0 1 9 9"/>
                      <path d="M4 4a16 16 0 0 1 16 16"/>
                      <circle cx="5" cy="19" r="1"/>
                    </svg>
                    Subscribe
                  </button>
                </div>
              </div>
              <p class="tracker-description">No artifact tracked yet (add artifacts as mentions in Investigation Progress or by creating subscriptions)</p>
            </div>

            <!-- Recovery Metric Section -->
            <div class="tracker-section">
              <div class="tracker-section-header">
                <div class="tracker-title-row">
                  <svg class="tracker-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                    <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                  </svg>
                  <span class="tracker-title">Recovery Metric</span>
                  <svg class="tracker-info-icon" viewBox="0 0 24 24" width="16" height="16">
                    <circle cx="12" cy="12" r="10" fill="#9ca3af"/>
                    <text x="12" y="16" text-anchor="middle" fill="white" font-size="12" font-weight="bold">i</text>
                  </svg>
                </div>
              </div>
              <div class="tracker-input-row">
                <input type="text" class="tracker-url-input" placeholder="Paste an ODS/Scuba URL to add a recovery metric">
                <button class="tracker-search-btn">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                    <circle cx="11" cy="11" r="8"/>
                    <path d="M21 21l-4.35-4.35"/>
                  </svg>
                  Search SLI
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Related SEVs Card -->
        <div class="content-card related-sevs-card" id="sevs">
          <div class="card-header">
            <div class="card-header-left">
              <h3 class="card-title">Related SEVs</h3>
              <span class="sev-count-badge">
                <svg class="droplet-icon" viewBox="0 0 24 24" fill="none" stroke="#818cf8" stroke-width="2" width="16" height="16">
                  <path d="M12 2C8.5 6 4 9.5 4 14C4 18.4183 7.58172 22 12 22C16.4183 22 20 18.4183 20 14C20 9.5 15.5 6 12 2Z"/>
                </svg>
                0
              </span>
              <svg class="link-icon" viewBox="0 0 24 24" fill="none" stroke="#9ca3af" stroke-width="2" width="16" height="16">
                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
              </svg>
            </div>
            <div class="card-header-right">
              <button class="link-merge-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                  <path d="M12 2C8.5 6 4 9.5 4 14C4 18.4183 7.58172 22 12 22C16.4183 22 20 18.4183 20 14C20 9.5 15.5 6 12 2Z"/>
                </svg>
                Link/Merge SEV
              </button>
              <button class="card-toggle" onclick="toggleCard(this)">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="6 9 12 15 18 9"/>
              </svg>
            </button>
            </div>
          </div>
          <div class="card-body">
            <!-- Triggered By SEVs -->
            <div class="related-sev-row">
              <div class="related-sev-left">
                <svg class="droplet-icon-small" viewBox="0 0 24 24" fill="none" stroke="#d1d5db" stroke-width="2" width="18" height="18">
                  <path d="M12 2C8.5 6 4 9.5 4 14C4 18.4183 7.58172 22 12 22C16.4183 22 20 18.4183 20 14C20 9.5 15.5 6 12 2Z"/>
                </svg>
                <span class="related-sev-count">0</span>
                <div class="related-sev-info">
                  <span class="related-sev-title">Triggered By SEVs</span>
                  <span class="related-sev-desc">This SEV (S448319) happened as a result of the following SEVs</span>
            </div>
            </div>
              <button class="related-sev-toggle">
                <svg viewBox="0 0 24 24" fill="none" stroke="#9ca3af" stroke-width="2" width="18" height="18">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </button>
            </div>

            <!-- Triggered SEVs -->
            <div class="related-sev-row">
              <div class="related-sev-left">
                <svg class="droplet-icon-small" viewBox="0 0 24 24" fill="none" stroke="#d1d5db" stroke-width="2" width="18" height="18">
                  <path d="M12 2C8.5 6 4 9.5 4 14C4 18.4183 7.58172 22 12 22C16.4183 22 20 18.4183 20 14C20 9.5 15.5 6 12 2Z"/>
                </svg>
                <span class="related-sev-count">0</span>
                <div class="related-sev-info">
                  <span class="related-sev-title">Triggered SEVs</span>
                  <span class="related-sev-desc">SEVs that happened as a result of this SEV (S448319)</span>
                </div>
              </div>
              <button class="related-sev-toggle">
                <svg viewBox="0 0 24 24" fill="none" stroke="#9ca3af" stroke-width="2" width="18" height="18">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </button>
            </div>

            <!-- Recurring SEVs -->
            <div class="related-sev-row">
              <div class="related-sev-left">
                <svg class="droplet-icon-small" viewBox="0 0 24 24" fill="none" stroke="#d1d5db" stroke-width="2" width="18" height="18">
                  <path d="M12 2C8.5 6 4 9.5 4 14C4 18.4183 7.58172 22 12 22C16.4183 22 20 18.4183 20 14C20 9.5 15.5 6 12 2Z"/>
                </svg>
                <span class="related-sev-count">0</span>
                <div class="related-sev-info">
                  <span class="related-sev-title">Recurring SEVs</span>
                  <span class="related-sev-desc">This SEV (S448319) is another occurrence of these</span>
                </div>
              </div>
              <button class="related-sev-toggle">
                <svg viewBox="0 0 24 24" fill="none" stroke="#9ca3af" stroke-width="2" width="18" height="18">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </button>
            </div>

            <!-- Other related SEVs -->
            <div class="related-sev-row">
              <div class="related-sev-left">
                <svg class="droplet-icon-small" viewBox="0 0 24 24" fill="none" stroke="#d1d5db" stroke-width="2" width="18" height="18">
                  <path d="M12 2C8.5 6 4 9.5 4 14C4 18.4183 7.58172 22 12 22C16.4183 22 20 18.4183 20 14C20 9.5 15.5 6 12 2Z"/>
                </svg>
                <span class="related-sev-count">0</span>
                <div class="related-sev-info">
                  <span class="related-sev-title">Other related SEVs</span>
                  <span class="related-sev-desc">SEVs related to this SEV (S448319) but without a specific relationship type</span>
                </div>
              </div>
              <button class="related-sev-toggle">
                <svg viewBox="0 0 24 24" fill="none" stroke="#9ca3af" stroke-width="2" width="18" height="18">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </button>
            </div>

            <!-- Parent SEV -->
            <div class="related-sev-row">
              <div class="related-sev-left">
                <svg class="hierarchy-icon" viewBox="0 0 24 24" fill="none" stroke="#d1d5db" stroke-width="2" width="18" height="18">
                  <path d="M12 3v6m0 0l-4 4m4-4l4 4m-8 4h8m-8 0v3m8-3v3"/>
                </svg>
                <span class="related-sev-count">0</span>
                <div class="related-sev-info">
                  <span class="related-sev-title">Parent SEV</span>
                </div>
              </div>
              <button class="related-sev-toggle">
                <svg viewBox="0 0 24 24" fill="none" stroke="#9ca3af" stroke-width="2" width="18" height="18">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </button>
            </div>

            <!-- SEVs merged into this SEV -->
            <div class="related-sev-row">
              <div class="related-sev-left">
                <svg class="merge-icon" viewBox="0 0 24 24" fill="none" stroke="#d1d5db" stroke-width="2" width="18" height="18">
                  <path d="M6 3v12m0 0l6-6m-6 6l6 6m6-18v12m0 0l-6-6m6 6l-6 6"/>
                </svg>
                <span class="related-sev-count">0</span>
                <div class="related-sev-info">
                  <span class="related-sev-title">SEVs merged into this SEV</span>
                </div>
              </div>
              <button class="related-sev-toggle">
                <svg viewBox="0 0 24 24" fill="none" stroke="#9ca3af" stroke-width="2" width="18" height="18">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </button>
            </div>

            <!-- Mentioned SEVs -->
            <div class="related-sev-row">
              <div class="related-sev-left">
                <svg class="droplet-icon-small" viewBox="0 0 24 24" fill="none" stroke="#d1d5db" stroke-width="2" width="18" height="18">
                  <path d="M12 2C8.5 6 4 9.5 4 14C4 18.4183 7.58172 22 12 22C16.4183 22 20 18.4183 20 14C20 9.5 15.5 6 12 2Z"/>
                </svg>
                <span class="related-sev-count">0</span>
                <div class="related-sev-info">
                  <span class="related-sev-title">Mentioned SEVs</span>
                  <span class="related-sev-desc">SEVs mentioned in this SEV (S448319)</span>
                </div>
              </div>
              <button class="related-sev-toggle">
                <svg viewBox="0 0 24 24" fill="none" stroke="#9ca3af" stroke-width="2" width="18" height="18">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </button>
            </div>
          </div>
        </div>

        <!-- Related Tasks Card -->
        <div class="content-card" id="related-tasks">
          <div class="card-header">
            <h3 class="card-title">Related Tasks</h3>
            <button class="card-toggle collapsed" onclick="toggleCard(this)">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="6 9 12 15 18 9"/>
              </svg>
            </button>
          </div>
          <div class="card-body">
            <div class="skeleton-row">
              <div class="skeleton skeleton-avatar"></div>
              <div class="skeleton skeleton-line-long"></div>
            </div>
            <div class="skeleton-row">
              <div class="skeleton skeleton-avatar"></div>
              <div class="skeleton skeleton-line-long"></div>
            </div>
            <div class="skeleton-row">
              <div class="skeleton skeleton-avatar"></div>
              <div class="skeleton skeleton-line-medium"></div>
            </div>
          </div>
        </div>

        <!-- Review Card -->
        <div class="content-card" id="review">
          <div class="card-header">
            <h3 class="card-title">Review</h3>
            <button class="card-toggle collapsed" onclick="toggleCard(this)">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="6 9 12 15 18 9"/>
              </svg>
            </button>
          </div>
          <div class="card-body">
            <div class="skeleton-row">
              <div class="skeleton skeleton-avatar"></div>
              <div class="skeleton skeleton-line-long"></div>
            </div>
            <div class="skeleton-row">
              <div class="skeleton skeleton-avatar"></div>
              <div class="skeleton skeleton-line-long"></div>
            </div>
            <div class="skeleton-row">
              <div class="skeleton skeleton-avatar"></div>
              <div class="skeleton skeleton-line-long"></div>
            </div>
            <div class="skeleton-row">
              <div class="skeleton skeleton-avatar"></div>
              <div class="skeleton skeleton-line-medium"></div>
            </div>
          </div>
        </div>
        </div>
      </aside>

      <!-- Resizable Divider -->
      <div class="column-divider" id="columnDivider"></div>

      <!-- Right Column -->
      <section class="right-column" id="rightColumn">
        <!-- Communication Card -->
        <div class="content-card comm-card">
          <div class="comm-header">
            <nav class="comm-tabs">
              <a href="#" class="comm-tab active" onclick="switchCommTab('comments', event)">Comments</a>
              <a href="#" class="comm-tab" onclick="switchCommTab('investigation', event)">Investigation</a>
              <a href="#" class="comm-tab" onclick="switchCommTab('messaging', event)">Messaging</a>
              <a href="#" class="comm-tab" onclick="switchCommTab('activity', event)">Activity</a>
            </nav>
          </div>

          <!-- Investigation Tab Content -->
          <div class="comm-tab-content" id="investigation-tab" style="display: none;">
            <div class="investigation-content">
              <div class="content-card opsmate-card">
                <div class="card-header">
                  <div class="opsmate-header">
                    <div class="opsmate-icon">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0206 15.0256C10.3164 15.8619 11.1136 16.4613 12.0513 16.4615C12.9891 16.4613 13.7863 15.8619 14.0821 15.0256H15.1493C14.8242 16.4359 13.5606 17.4872 12.0514 17.4872C10.5427 17.4872 9.27906 16.4359 8.95341 15.0256H10.0206ZM12.0508 16.4615H12.0519C12.0517 16.4615 12.0515 16.4615 12.0513 16.4615C12.0512 16.4615 12.051 16.4615 12.0508 16.4615Z" fill="black"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M8.12879 7.38461C9.61545 7.38462 10.8211 8.59026 10.8211 10.0769C10.8211 11.5636 9.61545 12.7692 8.12879 12.7692C6.64213 12.7692 5.43649 11.5636 5.43649 10.0769C5.43649 8.59026 6.64213 7.38461 8.12879 7.38461ZM8.12879 8.41026C7.20828 8.41026 6.46213 9.15641 6.46213 10.0769C6.46213 10.9974 7.20828 11.7436 8.12879 11.7436C9.0493 11.7436 9.79546 10.9974 9.79546 10.0769C9.79546 9.15641 9.0493 8.41026 8.12879 8.41026Z" fill="black"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M15.8724 7.38461C17.359 7.38462 18.5647 8.59026 18.5647 10.0769C18.5647 11.5636 17.359 12.7692 15.8724 12.7692C14.3857 12.7692 13.1801 11.5636 13.1801 10.0769C13.1801 8.59026 14.3857 7.38461 15.8724 7.38461ZM15.8724 8.41026C14.9519 8.41026 14.2057 9.15641 14.2057 10.0769C14.2057 10.9974 14.9519 11.7436 15.8724 11.7436C16.7929 11.7436 17.5391 10.9974 17.5391 10.0769C17.5391 9.15641 16.7929 8.41026 15.8724 8.41026Z" fill="black"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M14.6673 0C15.177 6.43207e-06 15.5903 0.413337 15.5903 0.923077V5.22922C15.9447 5.2087 16.2862 5.18513 16.616 5.16001V0.98152L18.7175 1.42874C20.2498 1.75489 21.3893 3.00361 21.6047 4.51848C21.6688 4.50617 21.7293 4.49385 21.7867 4.48257C22.019 4.43591 22.1944 4.39746 22.3103 4.37079C22.3683 4.35746 22.4114 4.34716 22.439 4.34049C22.4529 4.33742 22.4631 4.33487 22.4693 4.33333C22.4724 4.33282 22.4744 4.33178 22.4755 4.33178H22.476C22.8877 4.22614 23.3067 4.47435 23.4123 4.88562H23.4113C23.517 5.29741 23.2688 5.71642 22.8575 5.82206C22.8483 5.82463 22.8185 5.83178 22.8016 5.83589C22.7673 5.84409 22.718 5.85592 22.6534 5.87079C22.5247 5.90002 22.3354 5.94154 22.0888 5.99129C21.9442 6.02 21.7795 6.05179 21.5954 6.08564C21.6252 6.27487 21.6411 6.46923 21.6411 6.66667V17.7436C21.6411 19.7667 20.0139 21.4103 17.9965 21.4359H14.9744C14.7406 21.7472 14.3683 21.9487 13.9488 21.9487H10.0514C9.63189 21.9487 9.25958 21.7472 9.02573 21.4359H6.00364C3.98621 21.4108 2.35906 19.7672 2.35906 17.7441V6.66717C2.35906 6.46922 2.37494 6.27536 2.40469 6.08614C2.22058 6.05229 2.05596 6.02102 1.91135 5.99179C1.66469 5.94256 1.47597 5.90104 1.34674 5.87129C1.28213 5.85642 1.23287 5.84459 1.19851 5.83639C1.18158 5.83228 1.15184 5.82513 1.14262 5.82257C0.731345 5.71692 0.483149 5.29744 0.58878 4.88617C0.694421 4.47489 1.1139 4.2267 1.52518 4.33233H1.52573C1.52676 4.33235 1.5288 4.33332 1.53184 4.33383C1.53799 4.33537 1.54829 4.33746 1.56214 4.34105C1.58983 4.34771 1.63291 4.35796 1.69084 4.37129C1.80623 4.39796 1.98213 4.43641 2.21443 4.48307C2.27187 4.49487 2.33237 4.50667 2.39647 4.51898C2.61186 3.00411 3.75134 1.75539 5.28364 1.42924L7.3852 0.982071V5.16051C7.71494 5.18563 8.05649 5.20925 8.41085 5.22977V0.923077C8.41085 0.413333 8.82418 0 9.33392 0H14.6673ZM19.9411 6.35181C18.076 6.61233 15.3739 6.87179 12.0011 6.87179C8.62827 6.87179 5.9257 6.61284 4.06109 6.35181C4.01493 6.34515 3.96929 6.339 3.92417 6.33233C3.90673 6.44104 3.89803 6.55283 3.89803 6.66667V17.7436C3.89803 18.9333 4.86213 19.8974 6.05187 19.8974H9.02623C9.26008 19.5862 9.63239 19.3846 10.0519 19.3846H13.9493C14.3688 19.3846 14.7411 19.5862 14.9749 19.8974H17.9493C19.139 19.8974 20.1032 18.9333 20.1032 17.7436H20.1042V6.66667C20.1042 6.55283 20.0949 6.44155 20.078 6.33233C20.0329 6.339 19.9872 6.34515 19.9411 6.35181ZM10.616 1.4359C10.3611 1.4359 10.1544 1.64256 10.1544 1.89744V2.14874C10.1544 3.06155 10.5601 3.92771 11.2616 4.51232L11.7052 4.88206C11.7909 4.95333 11.896 4.98923 12.0006 4.98923C12.1052 4.98923 12.2103 4.95334 12.296 4.88206L12.7396 4.51232C13.4411 3.92771 13.8467 3.06206 13.8467 2.14874V1.89744C13.8467 1.64257 13.6401 1.4359 13.3852 1.4359H10.616Z" fill="black"/>
                      </svg>
                    </div>
                    <div class="opsmate-info">
                      <h3 class="opsmate-title">Opsmate</h3>
                      <p class="opsmate-subtitle">Analysis run on Dec 15, 2025, 6:16 PM</p>
                    </div>
                  </div>
                  <div class="opsmate-actions">
                    <button class="pill-btn blue" onclick="openOpsmateOverlay()">Explore</button>
                    <button class="card-toggle" onclick="toggleInvestigationOpsmate(this)">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="18 15 12 9 6 15"/>
                      </svg>
                    </button>
                  </div>
                </div>
                <div class="card-divider inv-opsmate-collapsible"></div>
                <div class="card-body inv-opsmate-collapsible">
                  <div class="finding-section">
                    <h4 class="finding-label">Root Cause</h4>
                    <p class="finding-text">A spike in the <a href="#" class="code-link">auth_error_rate</a> was traced back to a broken integration introduced in a recent dependency update. The update caused requests to fail silently, leading to an increase in authorization errors across dependent systems.</p>
                  </div>
                  <div class="finding-section">
                    <h4 class="finding-label">Mitigation Steps</h4>
                    <p class="finding-text">Reverting the faulty dependency diff <a href="#" class="code-link">D391491</a> would immediately stabilize error rates. It also recommended adding automated integration tests to catch similar issues.</p>
                  </div>
                </div>
              </div>

              <!-- Investigation Branches Table -->
              <div class="content-card branches-card">
                <div class="card-header">
                  <h3 class="card-title">Investigation branches</h3>
                  <button class="new-branch-btn" onclick="addNewBranch()">+ New branch</button>
                </div>
                <div class="card-body">
                  <table class="branches-table">
                    <thead>
                      <tr>
                        <th class="drag-col"></th>
                        <th class="branch-name-col">Branch</th>
                        <th>Owner</th>
                        <th>Active viewers</th>
                        <th>Status</th>
                        <th>Impact tag</th>
                        <th>Actions</th>
                      </tr>
                    </thead>
                    <tbody id="branchesTableBody">
                      <tr class="branch-row" draggable="true">
                        <td class="drag-handle-cell">
                          <span class="drag-handle">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                              <circle cx="9" cy="5" r="1.5" fill="currentColor" stroke="none"/>
                              <circle cx="15" cy="5" r="1.5" fill="currentColor" stroke="none"/>
                              <circle cx="9" cy="12" r="1.5" fill="currentColor" stroke="none"/>
                              <circle cx="15" cy="12" r="1.5" fill="currentColor" stroke="none"/>
                              <circle cx="9" cy="19" r="1.5" fill="currentColor" stroke="none"/>
                              <circle cx="15" cy="19" r="1.5" fill="currentColor" stroke="none"/>
                            </svg>
                          </span>
                        </td>
                        <td class="branch-name-cell">
                          <span class="branch-name">Investigation 1</span>
                        </td>
                        <td>
                          <img src="https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=100&h=100&fit=crop&crop=face" alt="Owner" class="branch-avatar">
                        </td>
                        <td>
                          <div class="viewers-stack">
                            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face" alt="Viewer" class="viewer-avatar">
                            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face" alt="Viewer" class="viewer-avatar">
                            <span class="viewer-count">+2</span>
                          </div>
                        </td>
                        <td>
                          <button class="dropdown-with-avatar pending">
                            <span class="dropdown-text">
                              Pending
                              <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                              </svg>
                            </span>
                          </button>
                        </td>
                        <td>
                          <button class="dropdown-with-avatar none">
                            <span class="dropdown-text">
                              None
                              <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                              </svg>
                            </span>
                          </button>
                        </td>
                        <td class="actions-cell">
                          <a href="https://www.internalfb.com/canvas/fiddle?entry_point=canvas_home&v=1&document_data=H4sIAAAAAAAAE81VTW%252FbOBD9K4s5S4BsS%252F7Qzemq23QdB%252Bs4DYowEEbSUCZAU1qScuAa%252Fu8FJSupt90mwfawN%252FHxzbw3I2LmAKKAGHiWT0dBNPN5EIR%252BGA3Jx2Aa%252BhgNOc%252BzPBtQBh7kmtBSkaKFeDAZj4PBMAynHlhhJUEM4IGwtDUQ3x%252Far7S%252FuRNFSRY8%252BLshvU%252FzSnFRGojhwOAvB%252F02YBAfGJiq0TkxiBlIVIUUihh4DGrUuDWOc%252FQYmCYzuRa1FZVy4P2DxyDfoFIkTfrtbR%252BxJYsFWuxUCA3JtPMiilYty3nGg2HgT0Zh6Id8GvnZJAv9aMR5VuBkNMuHDI7HI3iwE%252FR4qqErwe7rn3pmsBOmQSm%252B4MkUg5u7y6vFfJmk6%252FnFImkDnCFBbUEHBphbsXNprW7IY1BUWxRduQzmi2S1ZuDq5kJa0n1Ux2oVTpyWQrIrs9ZV8Qyte9%252FGaqHK9qKqSaOtdIu7TB6DHcqmI65XtwmDo%252FeykrFo6V%252BlUtQa9y8K3jMYtEDI4OE1qjxDnTrpxvwC7aDX9nof0St9SLRkbCqUsahySisl97%252Bg7532T1%252FGu%252Bvl%252B8s%252FktV8fb164YGcU8%252F8Y2M3lU5FQcoKu0%252B7F%252F6fG%252Frh9mq%252BdC18YyHp%252BvbqYpHcJcnv39X01lTv5sv56vMbWvMU8T%252Fs0Kfk8w9%252B8ytiP97erP9cXl%252Fc%252FCDYARtR0HtZoRWqvCLVPKdxN6mkkpRrBEdpHLpFXQqValFuLIN4EHqs2wttnYtv5%252BKJKok7ZjRumVu6E6qoHi%252BV80G5m5OJwkzSk4qb4%252B3orUmfhvf5WrAaleGV7oduXslmq242JHf0HcT7vVHqqqkv9mdYLXaV%252FQemq8ezc9eyZ8g56NKbp3NGG9yJSj9vrg1qKjrfdOr4oV0q7SIez%252FhsVownfjaYcj%252FEceRPcTbyg2wWTaPheDiL0HFNWgulqOg78%252BCByZsM03yD2qalRtVI1MLuIYZ5Yys4fgVa78so6wcAAA%253D%253D" target="_blank" class="action-link-btn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                              <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                              <polyline points="15 3 21 3 21 9"/>
                              <line x1="10" y1="14" x2="21" y2="3"/>
                            </svg>
                            Canvas
                          </a>
                          <button class="row-edit-btn" onclick="editBranchRow(this)">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                            </svg>
                          </button>
                        </td>
                      </tr>
                      <tr class="branch-row" draggable="true">
                        <td class="drag-handle-cell">
                          <span class="drag-handle">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                              <circle cx="9" cy="5" r="1.5" fill="currentColor" stroke="none"/>
                              <circle cx="15" cy="5" r="1.5" fill="currentColor" stroke="none"/>
                              <circle cx="9" cy="12" r="1.5" fill="currentColor" stroke="none"/>
                              <circle cx="15" cy="12" r="1.5" fill="currentColor" stroke="none"/>
                              <circle cx="9" cy="19" r="1.5" fill="currentColor" stroke="none"/>
                              <circle cx="15" cy="19" r="1.5" fill="currentColor" stroke="none"/>
                            </svg>
                          </span>
                        </td>
                        <td class="branch-name-cell">
                          <span class="branch-name">Investigation 3</span>
                        </td>
                        <td>
                          <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face" alt="Owner" class="branch-avatar">
                        </td>
                        <td>
                          <div class="viewers-stack">
                            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face" alt="Viewer" class="viewer-avatar">
                            <img src="https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=100&h=100&fit=crop&crop=face" alt="Viewer" class="viewer-avatar">
                            <img src="https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=100&h=100&fit=crop&crop=face" alt="Viewer" class="viewer-avatar">
                          </div>
                        </td>
                        <td>
                          <button class="dropdown-with-avatar pending">
                            <span class="dropdown-text">
                              Pending
                              <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                              </svg>
                            </span>
                          </button>
                        </td>
                        <td>
                          <button class="dropdown-with-avatar none">
                            <span class="dropdown-text">
                              None
                              <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                              </svg>
                            </span>
                          </button>
                        </td>
                        <td class="actions-cell">
                          <a href="https://www.internalfb.com/canvas/fiddle?entry_point=canvas_home&v=1&document_data=H4sIAAAAAAAAE81VTW%252FbOBD9K4s5S4BsS%252F7Qzemq23QdB%252Bs4DYowEEbSUCZAU1qScuAa%252Fu8FJSupt90mwfawN%252FHxzbw3I2LmAKKAGHiWT0dBNPN5EIR%252BGA3Jx2Aa%252BhgNOc%252BzPBtQBh7kmtBSkaKFeDAZj4PBMAynHlhhJUEM4IGwtDUQ3x%252Far7S%252FuRNFSRY8%252BLshvU%252FzSnFRGojhwOAvB%252F02YBAfGJiq0TkxiBlIVIUUihh4DGrUuDWOc%252FQYmCYzuRa1FZVy4P2DxyDfoFIkTfrtbR%252BxJYsFWuxUCA3JtPMiilYty3nGg2HgT0Zh6Id8GvnZJAv9aMR5VuBkNMuHDI7HI3iwE%252FR4qqErwe7rn3pmsBOmQSm%252B4MkUg5u7y6vFfJmk6%252FnFImkDnCFBbUEHBphbsXNprW7IY1BUWxRduQzmi2S1ZuDq5kJa0n1Ux2oVTpyWQrIrs9ZV8Qyte9%252FGaqHK9qKqSaOtdIu7TB6DHcqmI65XtwmDo%252FeykrFo6V%252BlUtQa9y8K3jMYtEDI4OE1qjxDnTrpxvwC7aDX9nof0St9SLRkbCqUsahySisl97%252Bg7532T1%252FGu%252Bvl%252B8s%252FktV8fb164YGcU8%252F8Y2M3lU5FQcoKu0%252B7F%252F6fG%252Frh9mq%252BdC18YyHp%252BvbqYpHcJcnv39X01lTv5sv56vMbWvMU8T%252Fs0Kfk8w9%252B8ytiP97erP9cXl%252Fc%252FCDYARtR0HtZoRWqvCLVPKdxN6mkkpRrBEdpHLpFXQqValFuLIN4EHqs2wttnYtv5%252BKJKok7ZjRumVu6E6qoHi%252BV80G5m5OJwkzSk4qb4%252B3orUmfhvf5WrAaleGV7oduXslmq242JHf0HcT7vVHqqqkv9mdYLXaV%252FQemq8ezc9eyZ8g56NKbp3NGG9yJSj9vrg1qKjrfdOr4oV0q7SIez%252FhsVownfjaYcj%252FEceRPcTbyg2wWTaPheDiL0HFNWgulqOg78%252BCByZsM03yD2qalRtVI1MLuIYZ5Yys4fgVa78so6wcAAA%253D%253D" target="_blank" class="action-link-btn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                              <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                              <polyline points="15 3 21 3 21 9"/>
                              <line x1="10" y1="14" x2="21" y2="3"/>
                            </svg>
                            Canvas
                          </a>
                          <button class="row-edit-btn" onclick="editBranchRow(this)">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                            </svg>
                          </button>
                        </td>
                      </tr>
                      <tr class="branch-row" draggable="true">
                        <td class="drag-handle-cell">
                          <span class="drag-handle">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                              <circle cx="9" cy="5" r="1.5" fill="currentColor" stroke="none"/>
                              <circle cx="15" cy="5" r="1.5" fill="currentColor" stroke="none"/>
                              <circle cx="9" cy="12" r="1.5" fill="currentColor" stroke="none"/>
                              <circle cx="15" cy="12" r="1.5" fill="currentColor" stroke="none"/>
                              <circle cx="9" cy="19" r="1.5" fill="currentColor" stroke="none"/>
                              <circle cx="15" cy="19" r="1.5" fill="currentColor" stroke="none"/>
                            </svg>
                          </span>
                        </td>
                        <td class="branch-name-cell">
                          <span class="branch-name">Investigation 4</span>
                        </td>
                        <td>
                          <img src="https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=100&h=100&fit=crop&crop=face" alt="Owner" class="branch-avatar">
                        </td>
                        <td>
                          <div class="viewers-stack">
                            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face" alt="Viewer" class="viewer-avatar">
                          </div>
                        </td>
                        <td>
                          <button class="dropdown-with-avatar pending">
                            <span class="dropdown-text">
                              Pending
                              <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                              </svg>
                            </span>
                          </button>
                        </td>
                        <td>
                          <button class="dropdown-with-avatar none">
                            <span class="dropdown-text">
                              None
                              <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                              </svg>
                            </span>
                          </button>
                        </td>
                        <td class="actions-cell">
                          <a href="http://localhost:5173/" target="_blank" class="action-link-btn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                              <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                              <polyline points="15 3 21 3 21 9"/>
                              <line x1="10" y1="14" x2="21" y2="3"/>
                            </svg>
                            Opsmate
                          </a>
                          <button class="row-edit-btn" onclick="editBranchRow(this)">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                            </svg>
                          </button>
                        </td>
                      </tr>
                      <tr class="branch-row" draggable="true">
                        <td class="drag-handle-cell">
                          <span class="drag-handle">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                              <circle cx="9" cy="5" r="1.5" fill="currentColor" stroke="none"/>
                              <circle cx="15" cy="5" r="1.5" fill="currentColor" stroke="none"/>
                              <circle cx="9" cy="12" r="1.5" fill="currentColor" stroke="none"/>
                              <circle cx="15" cy="12" r="1.5" fill="currentColor" stroke="none"/>
                              <circle cx="9" cy="19" r="1.5" fill="currentColor" stroke="none"/>
                              <circle cx="15" cy="19" r="1.5" fill="currentColor" stroke="none"/>
                            </svg>
                          </span>
                        </td>
                        <td class="branch-name-cell">
                          <span class="branch-name">Investigation 5</span>
                        </td>
                        <td>
                          <img src="https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=100&h=100&fit=crop&crop=face" alt="Owner" class="branch-avatar">
                        </td>
                        <td>
                          <div class="viewers-stack">
                            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face" alt="Viewer" class="viewer-avatar">
                            <span class="viewer-count">+1</span>
                          </div>
                        </td>
                        <td>
                          <button class="dropdown-with-avatar pending">
                            <span class="dropdown-text">
                              Pending
                              <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                              </svg>
                            </span>
                          </button>
                        </td>
                        <td>
                          <button class="dropdown-with-avatar none">
                            <span class="dropdown-text">
                              None
                              <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                              </svg>
                            </span>
                          </button>
                        </td>
                        <td class="actions-cell">
                          <a href="https://www.internalfb.com/canvas/fiddle?entry_point=canvas_home&v=1&document_data=H4sIAAAAAAAAE81VTW%252FbOBD9K4s5S4BsS%252F7Qzemq23QdB%252Bs4DYowEEbSUCZAU1qScuAa%252Fu8FJSupt90mwfawN%252FHxzbw3I2LmAKKAGHiWT0dBNPN5EIR%252BGA3Jx2Aa%252BhgNOc%252BzPBtQBh7kmtBSkaKFeDAZj4PBMAynHlhhJUEM4IGwtDUQ3x%252Far7S%252FuRNFSRY8%252BLshvU%252FzSnFRGojhwOAvB%252F02YBAfGJiq0TkxiBlIVIUUihh4DGrUuDWOc%252FQYmCYzuRa1FZVy4P2DxyDfoFIkTfrtbR%252BxJYsFWuxUCA3JtPMiilYty3nGg2HgT0Zh6Id8GvnZJAv9aMR5VuBkNMuHDI7HI3iwE%252FR4qqErwe7rn3pmsBOmQSm%252B4MkUg5u7y6vFfJmk6%252FnFImkDnCFBbUEHBphbsXNprW7IY1BUWxRduQzmi2S1ZuDq5kJa0n1Ux2oVTpyWQrIrs9ZV8Qyte9%252FGaqHK9qKqSaOtdIu7TB6DHcqmI65XtwmDo%252FeykrFo6V%252BlUtQa9y8K3jMYtEDI4OE1qjxDnTrpxvwC7aDX9nof0St9SLRkbCqUsahySisl97%252Bg7532T1%252FGu%252Bvl%252B8s%252FktV8fb164YGcU8%252F8Y2M3lU5FQcoKu0%252B7F%252F6fG%252Frh9mq%252BdC18YyHp%252BvbqYpHcJcnv39X01lTv5sv56vMbWvMU8T%252Fs0Kfk8w9%252B8ytiP97erP9cXl%252Fc%252FCDYARtR0HtZoRWqvCLVPKdxN6mkkpRrBEdpHLpFXQqValFuLIN4EHqs2wttnYtv5%252BKJKok7ZjRumVu6E6qoHi%252BV80G5m5OJwkzSk4qb4%252B3orUmfhvf5WrAaleGV7oduXslmq242JHf0HcT7vVHqqqkv9mdYLXaV%252FQemq8ezc9eyZ8g56NKbp3NGG9yJSj9vrg1qKjrfdOr4oV0q7SIez%252FhsVownfjaYcj%252FEceRPcTbyg2wWTaPheDiL0HFNWgulqOg78%252BCByZsM03yD2qalRtVI1MLuIYZ5Yys4fgVa78so6wcAAA%253D%253D" target="_blank" class="action-link-btn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                              <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                              <polyline points="15 3 21 3 21 9"/>
                              <line x1="10" y1="14" x2="21" y2="3"/>
                            </svg>
                            Canvas
                          </a>
                          <button class="row-edit-btn" onclick="editBranchRow(this)">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                            </svg>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <!-- Comments Tab Content -->
          <div class="comm-tab-content" id="comments-tab">
          <div class="comm-toolbar">
            <div class="toolbar-left">
              <span class="toolbar-label">Next Update:</span>
              <span class="toolbar-badge dark">Not planned</span>
            </div>
            <div class="toolbar-right">
              <button class="toolbar-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                  <path d="M7 15l5 5 5-5"/>
                  <path d="M7 9l5-5 5 5"/>
                </svg>
                Oldest First
              </button>
              <button class="toolbar-btn">3 Comment types displayed
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </button>
            </div>
          </div>

          <div class="comm-body">
            <!-- Investigation Progress Section -->
            <div class="progress-section">
              <div class="progress-header">
                <div class="progress-left">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                    <line x1="9" y1="9" x2="15" y2="9"/>
                    <line x1="9" y1="13" x2="15" y2="13"/>
                    <line x1="9" y1="17" x2="12" y2="17"/>
                  </svg>
                  <span class="progress-title">Investigation Progress</span>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14" class="info-icon">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="12" y1="16" x2="12" y2="12"/>
                    <line x1="12" y1="8" x2="12.01" y2="8"/>
                  </svg>
                  <span class="count-badge">0</span>
                  <a href="#" class="artifacts-link">artifacts show</a>
                </div>
                <div class="progress-right">
                  <span class="no-updates">no updates</span>
                  <div class="btn-group">
                    <button class="save-btn-blue">Save</button>
                    <button class="save-dropdown">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                        <polyline points="6 9 12 15 18 9"/>
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
              <div class="progress-input">
                <p class="input-placeholder">Update investigation progress, who is working on what, diffs, GKs, SVs, etc...</p>
              </div>
            </div>

            <!-- Comment 1 -->
            <div class="comment">
              <div class="comment-header">
                <img src="https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=100&h=100&fit=crop&crop=face" alt="Jamie Gomez" class="comment-avatar">
                <div class="comment-meta">
                  <div class="comment-author">
                    <a href="#" class="author-name">Jamie Gomez</a>
                    <span class="author-handle">(jamieg)</span>
                  </div>
                  <span class="comment-time">Yesterday 6:12 PM</span>
                </div>
                <span class="owner-badge">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="12" height="12">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                    <circle cx="12" cy="7" r="4"/>
                  </svg>
                  Owner
                </span>
                <button class="comment-more">
                  <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                    <circle cx="12" cy="12" r="1.5"/>
                    <circle cx="6" cy="12" r="1.5"/>
                    <circle cx="18" cy="12" r="1.5"/>
                  </svg>
                </button>
              </div>
              <div class="comment-content">
                <p class="comment-text">Prod is not affected so far</p>
                <div class="comment-actions">
                  <button class="action-link">Like</button>
                  <span class="like-count">üëç 1</span>
                  <span class="action-dot">‚Ä¢</span>
                  <button class="action-link">Reply</button>
                </div>
              </div>
            </div>

            <!-- Comment 2 -->
            <div class="comment">
              <div class="comment-header">
                <img src="https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=100&h=100&fit=crop&crop=face" alt="Jamie Gomez" class="comment-avatar">
                <div class="comment-meta">
                  <div class="comment-author">
                    <a href="#" class="author-name">Jamie Gomez</a>
                    <span class="author-handle">(jamieg)</span>
                  </div>
                  <span class="comment-time">Yesterday 6:16 PM</span>
                </div>
                <span class="owner-badge">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="12" height="12">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                    <circle cx="12" cy="7" r="4"/>
                  </svg>
                  Owner
                </span>
                <button class="comment-more">
                  <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                    <circle cx="12" cy="12" r="1.5"/>
                    <circle cx="6" cy="12" r="1.5"/>
                    <circle cx="18" cy="12" r="1.5"/>
                  </svg>
                </button>
              </div>
              <div class="comment-content">
                <p class="comment-text">Confirmed that morgan800cc is the only affected platform.<br>Script used to scan various platforms: <a href="#" class="code-link">P2082901265</a></p>
                <div class="comment-actions">
                  <button class="action-link">Like</button>
                  <span class="like-count">üëç 1</span>
                  <span class="action-dot">‚Ä¢</span>
                  <button class="action-link">Reply</button>
                </div>
              </div>
            </div>

            <!-- Comment 3 -->
            <div class="comment">
              <div class="comment-header">
                <img src="https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=100&h=100&fit=crop&crop=face" alt="Jamie Gomez" class="comment-avatar">
                <div class="comment-meta">
                  <div class="comment-author">
                    <a href="#" class="author-name">Jamie Gomez</a>
                    <span class="author-handle">(jamieg)</span>
                  </div>
                  <span class="comment-time">Yesterday 6:35 PM</span>
                </div>
                <span class="owner-badge">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="12" height="12">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                    <circle cx="12" cy="7" r="4"/>
                  </svg>
                  Owner
                </span>
                <button class="comment-more">
                  <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                    <circle cx="12" cy="12" r="1.5"/>
                    <circle cx="6" cy="12" r="1.5"/>
                    <circle cx="18" cy="12" r="1.5"/>
                  </svg>
                </button>
              </div>
              <div class="comment-content">
                <p class="comment-text">Failing to initialize i2c-10:</p>
                <div class="code-block">
                  <pre><code>[<span class="log-num">761864.831063</span>] i2c i2c-10: Failed to register i2c client pca9548 at <span class="log-num">0x76</span> (<span class="log-error">-16</span>)
[<span class="log-num">761864.845702</span>] i2c i2c-16: Failed to register i2c client pmbus at <span class="log-num">0x60</span> (<span class="log-error">-16</span>)</code></pre>
                </div>
                <p class="comment-text" style="margin-top: 12px;">It's name is 0xc000:</p>
                <div class="code-block">
                  <pre><code>[<span class="log-var">root@fboss328988295</span>.ash7 /sys/bus/i2c/devices/i2c-10]# cat name
Cisco <span class="log-var">I2C</span> <span class="log-var">SMB</span> adapter at offset <span class="log-num">0xc000</span></code></pre>
                </div>
                <div class="comment-actions">
                  <button class="action-link">Like</button>
                  <span class="action-dot">‚Ä¢</span>
                  <button class="action-link">Reply</button>
                </div>
              </div>
            </div>

            <!-- Comment 4 -->
            <div class="comment">
              <div class="comment-header">
                <img src="https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=100&h=100&fit=crop&crop=face" alt="Jamie Gomez" class="comment-avatar">
                <div class="comment-meta">
                  <div class="comment-author">
                    <a href="#" class="author-name">Jamie Gomez</a>
                    <span class="author-handle">(jamieg)</span>
                  </div>
                  <span class="comment-time">Yesterday 6:11 PM</span>
                </div>
                <span class="owner-badge">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="12" height="12">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                    <circle cx="12" cy="7" r="4"/>
                  </svg>
                  Owner
                </span>
                <button class="comment-more">
                  <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                    <circle cx="12" cy="12" r="1.5"/>
                    <circle cx="6" cy="12" r="1.5"/>
                    <circle cx="18" cy="12" r="1.5"/>
                  </svg>
                </button>
              </div>
              <div class="comment-content">
                <p class="comment-text">platform_manager:</p>
                <div class="code-block">
                  <pre><code>...
<span class="log-info">I1215 15:09:55.069127 4038490 I2cExplorer.cpp:136]</span> Creating i2c device <span class="log-var">MCB_MUX_A</span> (pca9548) at i2c-10
<span class="log-error">E1215 15:09:55.083533 4038490 PlatformFsUtils.cpp:129]</span> Received error code <span class="log-num">16</span> from writing to path /sys/bus/i2c/devices/i2c-10/new_device: Device or resource busy
<span class="log-error">E1215 15:09:55.083652 4038490 PlatformExplorer.cpp:944]</span> Failed to create i2c device <span class="log-keyword">for</span> <span class="log-var">MCB_MUX_A</span> (pca9548) at bus: <span class="log-num">10</span>, addr: <span class="log-num">0x76</span> ; errno: <span class="log-num">16</span>
<span class="log-error">E1215 15:09:55.083706 4038490 PlatformExplorer.cpp:514]</span> Failed to explore <span class="log-var">I2C</span> device <span class="log-var">MCB_MUX_A</span> at /. Unexpected number mux channels <span class="log-keyword">for</span> <span class="log-var">MCB_MUX_A</span>. Expected: 8. Actual: <span class="log-num">0</span>
...</code></pre>
                </div>
                <div class="comment-actions">
                  <button class="action-link">Like</button>
                  <span class="action-dot">‚Ä¢</span>
                  <button class="action-link">Reply</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Pinned Comment Input -->
          <div class="comment-input-container">
            <div class="comment-input-row">
              <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face" alt="User" class="input-avatar">
              <div class="status-update-toggle">
                <span class="status-label">Status Update</span>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14" class="info-icon">
                  <circle cx="12" cy="12" r="10"/>
                  <line x1="12" y1="16" x2="12" y2="12"/>
                  <line x1="12" y1="8" x2="12.01" y2="8"/>
                </svg>
                <label class="toggle-switch">
                  <input type="checkbox">
                  <span class="toggle-slider"></span>
                </label>
              </div>
              <div class="comment-input-field">
                <p class="input-warning">DO NOT USE COMMENTS to indicate that a customer or you are impacted. If you are reporting customer impact use the "Link Affected Advertisers" plug-in</p>
              </div>
            </div>
            <div class="comment-input-actions">
              <button class="mark-affected-btn">Mark I'm affected</button>
              <button class="add-comment-btn">Add Comment</button>
            </div>
          </div>
        </div>

          <!-- Messaging Tab Content -->
          <div class="comm-tab-content" id="messaging-tab" style="display: none;">
            <div class="messaging-feed">
              <!-- System Message -->
              <div class="system-message">
                SEV Manager added Christian Gin to the group.
              </div>

              <!-- Message Item -->
              <div class="message-item">
                <div class="message-avatar">
                  <svg width="36" height="36" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="12" fill="#0064E0"/>
                    <path d="M12 4C9.5 7 6 9.5 6 13C6 16.3137 8.68629 19 12 19C15.3137 19 18 16.3137 18 13C18 9.5 14.5 7 12 4Z" fill="white"/>
                    <path d="M12 19C13.6569 19 15 17.433 15 15.5C15 13.567 13.6569 12 12 10C10.3431 12 9 13.567 9 15.5C9 17.433 10.3431 19 12 19Z" fill="rgba(255,255,255,0.6)"/>
                  </svg>
                </div>
                <div class="message-content">
                  <div class="message-header">
                    <a href="#" class="message-author">SEV Manager</a>
                    <span class="message-time">Dec 16, 2025, 2:02 PM</span>
                  </div>
                  <p class="message-text">Christian Gin (christiangin) commented in <a href="#" class="message-link">S553136</a></p>
                  <p class="message-quote">> Changed SEV status from Closed to In Progress.</p>
                </div>
              </div>

              <!-- Thread Change -->
              <div class="thread-change">
                Thread name changed to üî• S553136: Taylor Swift - Life of a Showgirl - Only In Polish
              </div>

              <!-- Message Item -->
              <div class="message-item">
                <div class="message-avatar">
                  <svg width="36" height="36" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="12" fill="#0064E0"/>
                    <path d="M12 4C9.5 7 6 9.5 6 13C6 16.3137 8.68629 19 12 19C15.3137 19 18 16.3137 18 13C18 9.5 14.5 7 12 4Z" fill="white"/>
                    <path d="M12 19C13.6569 19 15 17.433 15 15.5C15 13.567 13.6569 12 12 10C10.3431 12 9 13.567 9 15.5C9 17.433 10.3431 19 12 19Z" fill="rgba(255,255,255,0.6)"/>
                  </svg>
                </div>
                <div class="message-content">
                  <div class="message-header">
                    <a href="#" class="message-author">SEV Manager</a>
                    <span class="message-time">Dec 15, 2025, 6:16 PM</span>
                  </div>
                  <p class="message-text">Jamie Gomez (jamieg) commented in <a href="#" class="message-link">S553136</a></p>
                  <p class="message-quote">> Opsmate analysis completed. Root cause identified as auth_error_rate spike.</p>
                </div>
              </div>

              <!-- Thread Change -->
              <div class="thread-change">
                Thread name changed to üìÅ S553136: Taylor Swift - Life of a Showgirl - Only In Polish
              </div>

              <!-- Message Item -->
              <div class="message-item">
                <div class="message-avatar">
                  <svg width="36" height="36" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="12" fill="#0064E0"/>
                    <path d="M12 4C9.5 7 6 9.5 6 13C6 16.3137 8.68629 19 12 19C15.3137 19 18 16.3137 18 13C18 9.5 14.5 7 12 4Z" fill="white"/>
                    <path d="M12 19C13.6569 19 15 17.433 15 15.5C15 13.567 13.6569 12 12 10C10.3431 12 9 13.567 9 15.5C9 17.433 10.3431 19 12 19Z" fill="rgba(255,255,255,0.6)"/>
                  </svg>
                </div>
                <div class="message-content">
                  <div class="message-header">
                    <a href="#" class="message-author">SEV Manager</a>
                    <span class="message-time">Dec 15, 2025, 4:30 PM</span>
                  </div>
                  <p class="message-text">Jamie Gomez (jamieg) commented in <a href="#" class="message-link">S553136</a></p>
                  <p class="message-quote">> Changed SEV status from Mitigated to Closed.</p>
                </div>
              </div>

              <!-- Message Item -->
              <div class="message-item">
                <div class="message-avatar">
                  <svg width="36" height="36" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="12" fill="#0064E0"/>
                    <path d="M12 4C9.5 7 6 9.5 6 13C6 16.3137 8.68629 19 12 19C15.3137 19 18 16.3137 18 13C18 9.5 14.5 7 12 4Z" fill="white"/>
                    <path d="M12 19C13.6569 19 15 17.433 15 15.5C15 13.567 13.6569 12 12 10C10.3431 12 9 13.567 9 15.5C9 17.433 10.3431 19 12 19Z" fill="rgba(255,255,255,0.6)"/>
                  </svg>
                </div>
                <div class="message-content">
                  <div class="message-header">
                    <a href="#" class="message-author">SEV Manager</a>
                    <span class="message-time">Dec 14, 2025, 11:22 AM</span>
                  </div>
                  <p class="message-text">Junchen Zhang (junchenz) commented in <a href="#" class="message-link">S553136</a></p>
                  <p class="message-quote">> Changed SEV status from In Progress to Mitigated.</p>
                </div>
              </div>

              <!-- Thread Change -->
              <div class="thread-change">
                Thread name changed to ‚úÖ S553136: Taylor Swift - Life of a Showgirl - Only In Polish
              </div>

              <!-- Message Item -->
              <div class="message-item">
                <div class="message-avatar">
                  <svg width="36" height="36" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="12" fill="#0064E0"/>
                    <path d="M12 4C9.5 7 6 9.5 6 13C6 16.3137 8.68629 19 12 19C15.3137 19 18 16.3137 18 13C18 9.5 14.5 7 12 4Z" fill="white"/>
                    <path d="M12 19C13.6569 19 15 17.433 15 15.5C15 13.567 13.6569 12 12 10C10.3431 12 9 13.567 9 15.5C9 17.433 10.3431 19 12 19Z" fill="rgba(255,255,255,0.6)"/>
                  </svg>
                </div>
                <div class="message-content">
                  <div class="message-header">
                    <a href="#" class="message-author">SEV Manager</a>
                    <span class="message-time">Dec 13, 2025, 9:15 AM</span>
                  </div>
                  <p class="message-text">Jamie Gomez (jamieg) created SEV <a href="#" class="message-link">S553136</a></p>
                  <p class="message-quote">> SEV 3 incident created: Taylor Swift - Life of a Showgirl - Only In Polish</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Activity Tab Content -->
          <div class="comm-tab-content" id="activity-tab" style="display: none;">
            <div class="activity-feed">
              <!-- Status Change -->
              <div class="activity-item">
                <div class="activity-icon">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20 6L9 17L4 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
                <div class="activity-content">
                  <p class="activity-text"><a href="#" class="activity-author">Jamie</a> changed the Status from 'Closed' to 'In Progress'</p>
                  <div class="activity-meta">
                    <span class="activity-date">December 16, 2025</span>
                    <span class="activity-separator">¬∑</span>
                    <a href="#" class="activity-action">Like</a>
                  </div>
                </div>
              </div>

              <!-- Multiple Changes -->
              <div class="activity-item">
                <div class="activity-icon list-icon">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8 6H21M8 12H21M8 18H21M3 6H3.01M3 12H3.01M3 18H3.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
                <div class="activity-content">
                  <p class="activity-text"><a href="#" class="activity-author">Jamie</a> made several changes</p>
                  <div class="activity-meta">
                    <span class="activity-date">December 4, 2025</span>
                  </div>
                  <a href="#" class="activity-expand">Show all 4 changes...</a>
                </div>
              </div>

              <!-- Multiple Changes -->
              <div class="activity-item">
                <div class="activity-icon list-icon">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8 6H21M8 12H21M8 18H21M3 6H3.01M3 12H3.01M3 18H3.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
                <div class="activity-content">
                  <p class="activity-text"><a href="#" class="activity-author">Jamie</a> made several changes</p>
                  <div class="activity-meta">
                    <span class="activity-date">October 31, 2025</span>
                  </div>
                  <a href="#" class="activity-expand">Show all 5 changes...</a>
                </div>
              </div>

              <!-- Investigation Progress Change -->
              <div class="activity-item">
                <div class="activity-icon text-icon">
                  <span>Aa</span>
                </div>
                <div class="activity-content">
                  <p class="activity-text"><a href="#" class="activity-author">Jamie</a> changed the Investigation Progress</p>
                  <div class="activity-meta">
                    <span class="activity-date">October 8, 2025</span>
                    <span class="activity-separator">¬∑</span>
                    <a href="#" class="activity-action">Like</a>
                    <span class="activity-separator">¬∑</span>
                    <a href="#" class="activity-action-blue">View</a>
                  </div>
                </div>
              </div>

              <!-- Multiple Changes -->
              <div class="activity-item">
                <div class="activity-icon list-icon">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8 6H21M8 12H21M8 18H21M3 6H3.01M3 12H3.01M3 18H3.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
                <div class="activity-content">
                  <p class="activity-text"><a href="#" class="activity-author">Jamie</a> made several changes</p>
                  <div class="activity-meta">
                    <span class="activity-date">October 3, 2025</span>
                  </div>
                  <a href="#" class="activity-expand">Show all 4 changes...</a>
                </div>
              </div>

              <!-- Multiple Changes -->
              <div class="activity-item">
                <div class="activity-icon list-icon">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8 6H21M8 12H21M8 18H21M3 6H3.01M3 12H3.01M3 18H3.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
                <div class="activity-content">
                  <p class="activity-text"><a href="#" class="activity-author">Jamie</a> made several changes</p>
                  <div class="activity-meta">
                    <span class="activity-date">October 3, 2025</span>
                  </div>
                  <a href="#" class="activity-expand">Show all 2 changes...</a>
                </div>
              </div>

              <!-- Report Marked -->
              <div class="activity-item">
                <div class="activity-icon pencil-icon">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M18.5 2.50001C18.8978 2.10219 19.4374 1.87869 20 1.87869C20.5626 1.87869 21.1022 2.10219 21.5 2.50001C21.8978 2.89784 22.1213 3.4374 22.1213 4.00001C22.1213 4.56262 21.8978 5.10219 21.5 5.50001L12 15L8 16L9 12L18.5 2.50001Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
                <div class="activity-content">
                  <p class="activity-text"><a href="#" class="activity-author">Jamie</a> marked the report as 'Required' with the following reason: "rtgr"</p>
                  <div class="activity-meta">
                    <span class="activity-date">September 26, 2025</span>
                    <span class="activity-separator">¬∑</span>
                    <a href="#" class="activity-action">Like</a>
                  </div>
                </div>
              </div>

              <!-- Multiple Changes -->
              <div class="activity-item">
                <div class="activity-icon list-icon">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8 6H21M8 12H21M8 18H21M3 6H3.01M3 12H3.01M3 18H3.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
                <div class="activity-content">
                  <p class="activity-text"><a href="#" class="activity-author">Jamie</a> made several changes</p>
                  <div class="activity-meta">
                    <span class="activity-date">September 26, 2025</span>
                  </div>
                  <a href="#" class="activity-expand">Show all 6 changes...</a>
                </div>
              </div>

              <!-- Subscriber Added -->
              <div class="activity-item">
                <div class="activity-icon person-icon">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M16 21V19C16 17.9391 15.5786 16.9217 14.8284 16.1716C14.0783 15.4214 13.0609 15 12 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="8.5" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <line x1="20" y1="8" x2="20" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <line x1="23" y1="11" x2="17" y2="11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
                <div class="activity-content">
                  <p class="activity-text"><a href="#" class="activity-author">Jamie</a> added <a href="#" class="activity-author">Jamie</a> to Subscribers</p>
                  <div class="activity-meta">
                    <span class="activity-date">September 26, 2025</span>
                    <span class="activity-separator">¬∑</span>
                    <a href="#" class="activity-action">Like</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <script>
      // ====== DISCOVER SEARCH DROPDOWN ======
      const discoverSearchInput = document.getElementById('discoverSearchInput');
      const discoverDropdown = document.getElementById('discoverDropdown');

      if (discoverSearchInput && discoverDropdown) {
        discoverSearchInput.addEventListener('focus', () => {
          discoverDropdown.classList.add('open');
        });

        discoverSearchInput.addEventListener('blur', (e) => {
          setTimeout(() => {
            if (!discoverDropdown.contains(document.activeElement)) {
              discoverDropdown.classList.remove('open');
            }
          }, 150);
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
          if (!discoverSearchInput.contains(e.target) && !discoverDropdown.contains(e.target)) {
            discoverDropdown.classList.remove('open');
          }
        });
      }

      // ====== SK SIDEBAR - Search and Accordion functionality ======
      const sidebarSearchInput = document.getElementById('sidebarSearchInput');
      const sidebarSearchPopover = document.getElementById('sidebarSearchPopover');
      const sidebarSearchClearBtn = document.getElementById('sidebarSearchClearBtn');
      const sidebarDefaultPopoverContent = document.getElementById('sidebarDefaultPopoverContent');
      const sidebarAutocompleteResults = document.getElementById('sidebarAutocompleteResults');
      const sidebarAutocompleteList = document.getElementById('sidebarAutocompleteList');

      const sidebarSearchItems = [
        { name: 'Facebook Ads Manager', category: 'app' },
        { name: 'Facebook Business Suite', category: 'product' },
        { name: 'Facebook Login Integration', category: 'endpoint' },
        { name: 'Instagram Feed API', category: 'GraphQL query' },
        { name: 'Instagram Stories', category: 'comet route' },
        { name: 'Instagram Shopping', category: 'product' }
      ];

      if (sidebarSearchInput) {
        sidebarSearchInput.addEventListener('focus', () => {
          sidebarSearchPopover.classList.add('visible');
        });

        sidebarSearchInput.addEventListener('blur', (e) => {
          setTimeout(() => {
            if (!sidebarSearchPopover.contains(document.activeElement)) {
              sidebarSearchPopover.classList.remove('visible');
            }
          }, 150);
        });

        sidebarSearchInput.addEventListener('input', (e) => {
          const query = e.target.value.toLowerCase().trim();
          
          // Show/hide clear button
          if (query.length > 0) {
            sidebarSearchClearBtn.classList.add('visible');
          } else {
            sidebarSearchClearBtn.classList.remove('visible');
          }

          if (query.length > 0) {
            const filtered = sidebarSearchItems.filter(item => 
              item.name.toLowerCase().includes(query)
            );

            if (filtered.length > 0) {
              sidebarAutocompleteList.innerHTML = filtered.map(item => {
                const highlighted = item.name.replace(
                  new RegExp(`(${query})`, 'gi'),
                  '<span class="highlight">$1</span>'
                );
                return `
                  <div class="autocomplete-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
                    <span>${highlighted}</span>
                    <span style="margin-left: auto; font-size: 11px; color: var(--text-muted);">${item.category}</span>
                  </div>
                `;
              }).join('');
              sidebarDefaultPopoverContent.style.display = 'none';
              sidebarAutocompleteResults.style.display = 'block';
            } else {
              sidebarAutocompleteList.innerHTML = '<div class="no-results">No results found</div>';
              sidebarDefaultPopoverContent.style.display = 'none';
              sidebarAutocompleteResults.style.display = 'block';
            }
          } else {
            sidebarDefaultPopoverContent.style.display = 'block';
            sidebarAutocompleteResults.style.display = 'none';
          }
        });
      }

      // Clear button functionality
      if (sidebarSearchClearBtn) {
        sidebarSearchClearBtn.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          sidebarSearchInput.value = '';
          sidebarSearchClearBtn.classList.remove('visible');
          sidebarDefaultPopoverContent.style.display = 'block';
          sidebarAutocompleteResults.style.display = 'none';
          sidebarSearchInput.focus();
        });
      }

      // Accordion functionality (legacy)
      const skAccordionTriggers = document.querySelectorAll('.sidebar.sk-sidebar .accordion-trigger');
      skAccordionTriggers.forEach(trigger => {
        trigger.addEventListener('click', () => {
          const accordion = trigger.closest('.nav-accordion');
          const content = accordion.querySelector('.accordion-content');
          const isExpanded = trigger.classList.contains('expanded');

          if (isExpanded) {
            trigger.classList.remove('expanded');
            content.classList.remove('open');
          } else {
            trigger.classList.add('expanded');
            content.classList.add('open');
          }
        });
      });

      // Simple Nav Accordion functionality
      const skExpandableTriggers = document.querySelectorAll('.sk-expandable');
      skExpandableTriggers.forEach(trigger => {
        trigger.addEventListener('click', () => {
          const subnav = trigger.nextElementSibling;
          const isExpanded = trigger.classList.contains('expanded');

          if (isExpanded) {
            trigger.classList.remove('expanded');
            if (subnav && subnav.classList.contains('sk-simple-nav-subnav')) {
              subnav.classList.remove('open');
            }
          } else {
            trigger.classList.add('expanded');
            if (subnav && subnav.classList.contains('sk-simple-nav-subnav')) {
              subnav.classList.add('open');
            }
          }
        });
      });
      // ====== END SK SIDEBAR functionality ======

      // Drag and drop row reordering
      let draggedRow = null;

      function initDragAndDrop() {
        const tbody = document.getElementById('branchesTableBody');
        
        tbody.addEventListener('dragstart', (e) => {
          const row = e.target.closest('.branch-row');
          if (!row || row.classList.contains('editing')) return;
          
          draggedRow = row;
          row.classList.add('dragging');
          e.dataTransfer.effectAllowed = 'move';
          e.dataTransfer.setData('text/html', row.innerHTML);
        });

        tbody.addEventListener('dragend', (e) => {
          const row = e.target.closest('.branch-row');
          if (row) {
            row.classList.remove('dragging');
          }
          draggedRow = null;
          
          // Remove all drag-over classes
          document.querySelectorAll('.drag-over, .drag-over-bottom').forEach(el => {
            el.classList.remove('drag-over', 'drag-over-bottom');
          });
        });

        tbody.addEventListener('dragover', (e) => {
          e.preventDefault();
          e.dataTransfer.dropEffect = 'move';
          
          const row = e.target.closest('.branch-row');
          if (!row || row === draggedRow || row.classList.contains('editing')) return;
          
          // Remove previous indicators
          document.querySelectorAll('.drag-over, .drag-over-bottom').forEach(el => {
            el.classList.remove('drag-over', 'drag-over-bottom');
          });
          
          // Determine if we're in the top or bottom half of the row
          const rect = row.getBoundingClientRect();
          const midpoint = rect.top + rect.height / 2;
          
          if (e.clientY < midpoint) {
            row.classList.add('drag-over');
          } else {
            row.classList.add('drag-over-bottom');
          }
        });

        tbody.addEventListener('dragleave', (e) => {
          const row = e.target.closest('.branch-row');
          if (row && !row.contains(e.relatedTarget)) {
            row.classList.remove('drag-over', 'drag-over-bottom');
          }
        });

        tbody.addEventListener('drop', (e) => {
          e.preventDefault();
          
          const targetRow = e.target.closest('.branch-row');
          if (!targetRow || !draggedRow || targetRow === draggedRow) return;
          
          const rect = targetRow.getBoundingClientRect();
          const midpoint = rect.top + rect.height / 2;
          
          if (e.clientY < midpoint) {
            targetRow.parentNode.insertBefore(draggedRow, targetRow);
          } else {
            targetRow.parentNode.insertBefore(draggedRow, targetRow.nextSibling);
          }
          
          // Clean up classes
          document.querySelectorAll('.drag-over, .drag-over-bottom').forEach(el => {
            el.classList.remove('drag-over', 'drag-over-bottom');
          });
        });
      }

      // Initialize drag and drop when DOM is ready
      document.addEventListener('DOMContentLoaded', initDragAndDrop);

      // Draggable divider functionality
      const divider = document.getElementById('columnDivider');
      const leftColumn = document.getElementById('leftColumn');
      const rightColumn = document.getElementById('rightColumn');
      const contentArea = document.querySelector('.content-area');

      let isDragging = false;

      divider.addEventListener('mousedown', (e) => {
        isDragging = true;
        document.body.style.cursor = 'col-resize';
        document.body.style.userSelect = 'none';
      });

      document.addEventListener('mousemove', (e) => {
        if (!isDragging) return;

        const containerRect = contentArea.getBoundingClientRect();
        const containerWidth = containerRect.width;
        const offsetX = e.clientX - containerRect.left;
        
        let leftPercent = (offsetX / containerWidth) * 100;
        leftPercent = Math.max(25, Math.min(75, leftPercent));
        
        leftColumn.style.width = `${leftPercent}%`;
        rightColumn.style.width = `${100 - leftPercent}%`;
      });

      document.addEventListener('mouseup', () => {
        isDragging = false;
        document.body.style.cursor = '';
        document.body.style.userSelect = '';
      });

      // Save Edit Form
      function saveEditForm() {
        // Get values from form
        const titleInput = document.getElementById('titleInput');
        const statusText = document.getElementById('statusText').textContent;
        const statusIcon = document.getElementById('statusIcon').textContent;
        
        // Update the main header title
        const headerTitle = document.querySelector('.incident-title-card');
        if (headerTitle && titleInput) {
          // Keep the SEV ID prefix, update the rest
          const sevId = 'S448319';
          headerTitle.textContent = sevId + ' ' + titleInput.value;
        }
        
        // Update the status badge in the top bar if exists
        const statusBadge = document.querySelector('.status-progress-badge');
        if (statusBadge) {
          statusBadge.textContent = statusText;
        }
        
        // Show/hide Opsmate Suggestions based on mitigated status
        const isMitigated = statusText === 'Mitigated';
        const opsmateContainers = document.querySelectorAll('.opsmate-suggestions-container');
        opsmateContainers.forEach(container => {
          container.style.display = isMitigated ? 'block' : 'none';
        });
        
        // Collapse all cards except Report when mitigated
        if (isMitigated) {
          const cardsToCollapse = ['escalations', 'opsmate', 'summary', 'live-tracker', 'sevs', 'related-tasks', 'review'];
          cardsToCollapse.forEach(cardId => {
            const card = document.getElementById(cardId);
            if (card) {
              const cardBody = card.querySelector('.card-body');
              const toggleBtn = card.querySelector('.card-toggle');
              if (cardBody) cardBody.style.display = 'none';
              if (toggleBtn) toggleBtn.classList.add('collapsed');
              // Handle opsmate card special case
              const opsmateCollapsibles = card.querySelectorAll('.opsmate-collapsible');
              opsmateCollapsibles.forEach(el => el.style.display = 'none');
              const opsmateToggle = card.querySelector('.opsmate-toggle');
              if (opsmateToggle) opsmateToggle.classList.add('collapsed');
            }
          });
          
          // Make sure Report card is expanded
          const reportCard = document.getElementById('report');
          if (reportCard) {
            const cardBody = reportCard.querySelector('.card-body');
            const toggleBtn = reportCard.querySelector('.card-toggle');
            if (cardBody) cardBody.style.display = '';
            if (toggleBtn) toggleBtn.classList.remove('collapsed');
          }
        }
        
        // Show saved confirmation
        const saveBtn = document.querySelector('.edit-save-btn');
        const originalText = saveBtn.textContent;
        saveBtn.textContent = 'Saved!';
        saveBtn.style.background = '#0D8626';
        
        // Close the drawer after brief confirmation
        setTimeout(() => {
          saveBtn.textContent = originalText;
          saveBtn.style.background = '';
          toggleEditDrawer();
        }, 800);
      }

      // Toggle Status Dropdown
      function toggleStatusDropdown(event) {
        event.stopPropagation();
        const btn = document.getElementById('statusDropdownBtn');
        const menu = document.getElementById('statusDropdownMenu');
        const rect = btn.getBoundingClientRect();
        
        menu.style.top = (rect.bottom + 4) + 'px';
        menu.style.left = rect.left + 'px';
        menu.classList.toggle('open');
      }

      // Toggle More Dropdown
      function toggleMoreDropdown(event) {
        event.stopPropagation();
        const menu = document.getElementById('moreDropdownMenu');
        menu.classList.toggle('open');
      }

      function handleMoreOption(option) {
        const menu = document.getElementById('moreDropdownMenu');
        menu.classList.remove('open');
        
        switch(option) {
          case 'capacity':
            console.log('Capacity Help clicked');
            // Add capacity help functionality here
            break;
          case 'export':
            console.log('Export clicked');
            // Add export functionality here
            break;
          case 'subscribers':
            console.log('Subscribers clicked');
            // Add subscribers functionality here
            break;
        }
      }

      // Close more dropdown when clicking outside
      document.addEventListener('click', function(e) {
        const wrapper = document.querySelector('.more-dropdown-wrapper');
        if (wrapper && !wrapper.contains(e.target)) {
          document.getElementById('moreDropdownMenu').classList.remove('open');
        }
      });

      function selectStatus(statusId, icon, text) {
        // Update the button display
        document.getElementById('statusIcon').textContent = icon;
        document.getElementById('statusText').textContent = text;
        
        // Update radio selection
        document.querySelectorAll('.status-option').forEach(opt => {
          opt.classList.remove('selected');
          opt.querySelector('.status-radio').classList.remove('selected');
        });
        
        const selectedOption = document.querySelector(`.status-option[onclick*="${statusId}"]`);
        if (selectedOption) {
          selectedOption.classList.add('selected');
          selectedOption.querySelector('.status-radio').classList.add('selected');
        }
        
        // Close dropdown
        document.getElementById('statusDropdownMenu').classList.remove('open');
        
        // Also update the status badge in the top bar
        const statusBadge = document.querySelector('.status-progress-badge');
        if (statusBadge) {
          statusBadge.textContent = text;
        }
        
      }

      // Close dropdown when clicking outside
      document.addEventListener('click', function(e) {
        const wrapper = document.querySelector('.status-dropdown-wrapper');
        if (wrapper && !wrapper.contains(e.target)) {
          document.getElementById('statusDropdownMenu').classList.remove('open');
        }
      });

      // Toggle Edit Drawer
      function toggleEditDrawer() {
        const drawer = document.getElementById('editDrawer');
        const btnText = document.getElementById('editBtnText');
        const topBarCard = document.querySelector('.top-bar-card');
        
        if (drawer.classList.contains('open')) {
          drawer.classList.remove('open');
          btnText.textContent = 'Edit';
          topBarCard.classList.remove('drawer-open');
        } else {
          // Sync the title input with current header title when opening
          const headerTitle = document.querySelector('.incident-title-card');
          const titleInput = document.getElementById('titleInput');
          if (headerTitle && titleInput) {
            // Extract title without the SEV ID prefix
            const fullTitle = headerTitle.textContent;
            const titleWithoutId = fullTitle.replace(/^S\d+\s*/, '');
            titleInput.value = titleWithoutId;
          }
          
          drawer.classList.add('open');
          btnText.textContent = 'Hide';
          topBarCard.classList.add('drawer-open');
        }
      }

      // Toggle generic card collapse/expand
      function toggleCard(button) {
        const card = button.closest('.content-card');
        const cardBody = card.querySelector('.card-body');
        const isCollapsed = button.classList.contains('collapsed');
        
        if (isCollapsed) {
          // Expand
          cardBody.style.display = '';
          button.classList.remove('collapsed');
        } else {
          // Collapse
          cardBody.style.display = 'none';
          button.classList.add('collapsed');
        }
      }

      // Toggle Opsmate card collapse
      function toggleOpsmate(button) {
        const collapsibleElements = document.querySelectorAll('.opsmate-collapsible');
        const isCollapsed = button.classList.contains('collapsed');
        
        if (isCollapsed) {
          // Expand
          collapsibleElements.forEach(el => {
            el.style.display = '';
          });
          button.classList.remove('collapsed');
        } else {
          // Collapse
          collapsibleElements.forEach(el => {
            el.style.display = 'none';
          });
          button.classList.add('collapsed');
        }
      }

      // Opsmate Overlay functions
      function openOpsmateOverlay() {
        const overlay = document.getElementById('opsmateOverlay');
        const iframe = document.getElementById('opsmateFrame');
        iframe.src = './opsmate-app/';
        overlay.classList.add('open');
        document.body.style.overflow = 'hidden';
      }

      function closeOpsmateOverlay() {
        const overlay = document.getElementById('opsmateOverlay');
        const iframe = document.getElementById('opsmateFrame');
        overlay.classList.remove('open');
        document.body.style.overflow = '';
        // Clear iframe src after animation
        setTimeout(() => {
          iframe.src = '';
        }, 500);
      }

      // Opsmate Panel functions (slide from right, pushes content)
      function openOpsmate() {
        const panel = document.getElementById('opsmatePanel');
        const mainContent = document.querySelector('.main-content');
        const deMain = document.querySelector('.de-main');
        const iframe = document.getElementById('opsmatePanelFrame');
        
        // Toggle panel
        const isOpen = panel.classList.contains('open');
        if (isOpen) {
          panel.classList.remove('open');
          if (mainContent) mainContent.classList.remove('panel-open');
          if (deMain) deMain.classList.remove('panel-open');
          // Clear iframe src after animation
          setTimeout(() => {
            iframe.src = '';
          }, 300);
        } else {
          iframe.src = './opsmate/dist/index.html?chatOnly=true';
          panel.classList.add('open');
          if (mainContent) mainContent.classList.add('panel-open');
          if (deMain) deMain.classList.add('panel-open');
        }
      }

      function closeOpsmatePanel() {
        const panel = document.getElementById('opsmatePanel');
        const mainContent = document.querySelector('.main-content');
        const deMain = document.querySelector('.de-main');
        const iframe = document.getElementById('opsmatePanelFrame');
        panel.classList.remove('open');
        if (mainContent) mainContent.classList.remove('panel-open');
        if (deMain) deMain.classList.remove('panel-open');
        // Clear iframe src after animation
        setTimeout(() => {
          iframe.src = '';
        }, 300);
      }

      // Listen for close message from iframe
      window.addEventListener('message', (event) => {
        if (event.data === 'closeOpsmate') {
          closeOpsmateOverlay();
          closeOpsmatePanel();
        }
      });

      // Close panel on Escape key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          const panel = document.getElementById('opsmatePanel');
          if (panel && panel.classList.contains('open')) {
            closeOpsmatePanel();
          }
        }
      });

      // Toggle Investigation Opsmate card collapse
      function toggleInvestigationOpsmate(button) {
        const collapsibleElements = document.querySelectorAll('.inv-opsmate-collapsible');
        const isCollapsed = button.classList.contains('collapsed');
        
        if (isCollapsed) {
          collapsibleElements.forEach(el => {
            el.style.display = '';
          });
          button.classList.remove('collapsed');
        } else {
          collapsibleElements.forEach(el => {
            el.style.display = 'none';
          });
          button.classList.add('collapsed');
        }
      }

      // Toggle Explore Panel
      function toggleExplorePanel() {
        const panel = document.getElementById('explorePanel');
        const overlay = document.getElementById('explorePanelOverlay');
        panel.classList.toggle('open');
        overlay.classList.toggle('open');
      }

      function closeExplorePanel() {
        const panel = document.getElementById('explorePanel');
        const overlay = document.getElementById('explorePanelOverlay');
        panel.classList.remove('open');
        overlay.classList.remove('open');
      }

      // Switch Communication Tabs
      function switchCommTab(tabName, event) {
        if (event) event.preventDefault();
        
        // Update active tab
        const tabs = document.querySelectorAll('.comm-tab');
        tabs.forEach(tab => tab.classList.remove('active'));
        event.target.closest('.comm-tab').classList.add('active');
        
        // Hide all tab contents
        const tabContents = document.querySelectorAll('.comm-tab-content');
        tabContents.forEach(content => content.style.display = 'none');
        
        // Show selected tab content
        const selectedTab = document.getElementById(tabName + '-tab');
        if (selectedTab) {
          selectedTab.style.display = 'block';
        }
      }

      // Scroll to section functionality
      function scrollToSection(sectionId, event) {
        if (event) event.preventDefault();
        
        const section = document.getElementById(sectionId);
        const scrollContainer = document.getElementById('leftColumnScroll');
        
        if (section && scrollContainer) {
          // Calculate offset within the scroll container
          const containerTop = scrollContainer.getBoundingClientRect().top;
          const sectionTop = section.getBoundingClientRect().top;
          const offset = scrollContainer.scrollTop + (sectionTop - containerTop);
          
          // Scroll only within the scroll container
          scrollContainer.scrollTo({
            top: offset,
            behavior: 'smooth'
          });
          
          // Update active tab
          const tabs = document.querySelectorAll('.panel-tab');
          tabs.forEach(tab => tab.classList.remove('active'));
          
          // Find and activate the correct tab
          const tabMap = {
            'escalations': null, // phone icon, no tab
            'summary': 'Summary',
            'opsmate': 'Opsmate',
            'report': 'Report',
            'live-tracker': 'Live Tracker',
            'sevs': 'Related SEVs',
            'related-tasks': 'Related Tasks',
            'review': 'Review'
          };
          
          tabs.forEach(tab => {
            if (tab.textContent === tabMap[sectionId]) {
              tab.classList.add('active');
            }
          });
        }
      }

      // Add new branch row
      let branchCounter = 6;
      function addNewBranch() {
        const tbody = document.getElementById('branchesTableBody');
        const currentUser = 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face';
        const newRow = document.createElement('tr');
        newRow.className = 'branch-row editing';
        newRow.innerHTML = `
          <td class="drag-handle-cell">
            <span class="drag-handle" style="opacity: 0.3; cursor: not-allowed;">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                <circle cx="9" cy="5" r="1.5" fill="currentColor" stroke="none"/>
                <circle cx="15" cy="5" r="1.5" fill="currentColor" stroke="none"/>
                <circle cx="9" cy="12" r="1.5" fill="currentColor" stroke="none"/>
                <circle cx="15" cy="12" r="1.5" fill="currentColor" stroke="none"/>
                <circle cx="9" cy="19" r="1.5" fill="currentColor" stroke="none"/>
                <circle cx="15" cy="19" r="1.5" fill="currentColor" stroke="none"/>
              </svg>
            </span>
          </td>
          <td class="branch-name-cell">
            <span class="branch-name">
              <input type="text" class="branch-name-input" placeholder="Branch name..." autofocus>
            </span>
          </td>
          <td>
            <img src="${currentUser}" alt="Owner" class="branch-avatar">
          </td>
          <td>
            <span class="viewers-placeholder">‚Äî</span>
          </td>
          <td>
            <select class="status-select">
              <option value="pending">Pending</option>
              <option value="in-progress">In Progress</option>
              <option value="validated">Validated</option>
            </select>
          </td>
          <td>
            <select class="impact-select">
              <option value="none">None</option>
              <option value="root-cause">Root Cause</option>
              <option value="mitigation">Mitigation</option>
              <option value="contributing">Contributing</option>
            </select>
          </td>
          <td class="actions-cell">
            <div class="edit-actions">
              <input type="text" class="link-input" placeholder="Paste link...">
              <button class="save-branch-btn" onclick="saveBranch(this)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" width="14" height="14">
                  <polyline points="20 6 9 17 4 12"/>
                </svg>
              </button>
              <button class="cancel-branch-btn" onclick="cancelBranch(this)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" width="12" height="12">
                  <line x1="18" y1="6" x2="6" y2="18"/>
                  <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
              </button>
            </div>
          </td>
        `;
        tbody.appendChild(newRow);
        newRow.querySelector('.branch-name-input').focus();
        branchCounter++;
      }

      function saveBranch(btn) {
        const row = btn.closest('.branch-row');
        const branchName = row.querySelector('.branch-name-input').value || 'New Investigation';
        const statusSelect = row.querySelector('.status-select');
        const impactSelect = row.querySelector('.impact-select');
        const currentUser = 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face';
        
        const statusClass = statusSelect.value === 'validated' ? 'validated' : 
                           statusSelect.value === 'in-progress' ? 'in-progress' : 'pending';
        const statusText = statusSelect.value === 'validated' ? 'Validated' : 
                          statusSelect.value === 'in-progress' ? 'In Progress' : 'Pending';
        
        row.className = 'branch-row';
        row.setAttribute('draggable', 'true');
        row.innerHTML = `
          <td class="drag-handle-cell">
            <span class="drag-handle">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                <circle cx="9" cy="5" r="1.5" fill="currentColor" stroke="none"/>
                <circle cx="15" cy="5" r="1.5" fill="currentColor" stroke="none"/>
                <circle cx="9" cy="12" r="1.5" fill="currentColor" stroke="none"/>
                <circle cx="15" cy="12" r="1.5" fill="currentColor" stroke="none"/>
                <circle cx="9" cy="19" r="1.5" fill="currentColor" stroke="none"/>
                <circle cx="15" cy="19" r="1.5" fill="currentColor" stroke="none"/>
              </svg>
            </span>
          </td>
          <td class="branch-name-cell">
            <span class="branch-name">${branchName}</span>
          </td>
          <td>
            <img src="${currentUser}" alt="Owner" class="branch-avatar">
          </td>
          <td>
            <div class="viewers-stack">
              <span class="viewer-count">‚Äî</span>
            </div>
          </td>
          <td>
            <button class="dropdown-with-avatar ${statusClass}">
              ${statusClass !== 'pending' ? `<img src="${currentUser}" alt="User" class="dropdown-avatar">` : ''}
              <span class="dropdown-text">
                ${statusText}
                <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </span>
            </button>
          </td>
          <td>
            <button class="dropdown-with-avatar none">
              <span class="dropdown-text">
                ${impactSelect.options[impactSelect.selectedIndex].text}
                <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </span>
            </button>
          </td>
          <td class="actions-cell">
            <a href="https://www.internalfb.com/canvas/fiddle?entry_point=canvas_home&v=1&document_data=H4sIAAAAAAAAE81VTW%252FbOBD9K4s5S4BsS%252F7Qzemq23QdB%252Bs4DYowEEbSUCZAU1qScuAa%252Fu8FJSupt90mwfawN%252FHxzbw3I2LmAKKAGHiWT0dBNPN5EIR%252BGA3Jx2Aa%252BhgNOc%252BzPBtQBh7kmtBSkaKFeDAZj4PBMAynHlhhJUEM4IGwtDUQ3x%252Far7S%252FuRNFSRY8%252BLshvU%252FzSnFRGojhwOAvB%252F02YBAfGJiq0TkxiBlIVIUUihh4DGrUuDWOc%252FQYmCYzuRa1FZVy4P2DxyDfoFIkTfrtbR%252BxJYsFWuxUCA3JtPMiilYty3nGg2HgT0Zh6Id8GvnZJAv9aMR5VuBkNMuHDI7HI3iwE%252FR4qqErwe7rn3pmsBOmQSm%252B4MkUg5u7y6vFfJmk6%252FnFImkDnCFBbUEHBphbsXNprW7IY1BUWxRduQzmi2S1ZuDq5kJa0n1Ux2oVTpyWQrIrs9ZV8Qyte9%252FGaqHK9qKqSaOtdIu7TB6DHcqmI65XtwmDo%252FeykrFo6V%252BlUtQa9y8K3jMYtEDI4OE1qjxDnTrpxvwC7aDX9nof0St9SLRkbCqUsahySisl97%252Bg7532T1%252FGu%252Bvl%252B8s%252FktV8fb164YGcU8%252F8Y2M3lU5FQcoKu0%252B7F%252F6fG%252Frh9mq%252BdC18YyHp%252BvbqYpHcJcnv39X01lTv5sv56vMbWvMU8T%252Fs0Kfk8w9%252B8ytiP97erP9cXl%252Fc%252FCDYARtR0HtZoRWqvCLVPKdxN6mkkpRrBEdpHLpFXQqValFuLIN4EHqs2wttnYtv5%252BKJKok7ZjRumVu6E6qoHi%252BV80G5m5OJwkzSk4qb4%252B3orUmfhvf5WrAaleGV7oduXslmq242JHf0HcT7vVHqqqkv9mdYLXaV%252FQemq8ezc9eyZ8g56NKbp3NGG9yJSj9vrg1qKjrfdOr4oV0q7SIez%252FhsVownfjaYcj%252FEceRPcTbyg2wWTaPheDiL0HFNWgulqOg78%252BCByZsM03yD2qalRtVI1MLuIYZ5Yys4fgVa78so6wcAAA%253D%253D" target="_blank" class="action-link-btn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                <polyline points="15 3 21 3 21 9"/>
                <line x1="10" y1="14" x2="21" y2="3"/>
              </svg>
              Canvas
            </a>
            <button class="row-edit-btn" onclick="editBranchRow(this)">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
              </svg>
            </button>
          </td>
        `;
      }

      function cancelBranch(btn) {
        const row = btn.closest('.branch-row');
        row.remove();
      }

      // Edit existing branch row
      function editBranchRow(btn) {
        const row = btn.closest('.branch-row');
        const cells = row.querySelectorAll('td');
        
        // Get current values (branch name is now at index 1 due to drag handle)
        const branchName = cells[1]?.querySelector('.branch-name')?.textContent.trim() || 'Investigation';
        const currentUser = 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face';
        
        // Store original HTML for cancel
        row.dataset.originalHtml = row.innerHTML;
        row.dataset.originalDraggable = row.getAttribute('draggable');
        
        row.className = 'branch-row editing';
        row.removeAttribute('draggable');
        row.innerHTML = `
          <td class="drag-handle-cell">
            <span class="drag-handle" style="opacity: 0.3; cursor: not-allowed;">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                <circle cx="9" cy="5" r="1.5" fill="currentColor" stroke="none"/>
                <circle cx="15" cy="5" r="1.5" fill="currentColor" stroke="none"/>
                <circle cx="9" cy="12" r="1.5" fill="currentColor" stroke="none"/>
                <circle cx="15" cy="12" r="1.5" fill="currentColor" stroke="none"/>
                <circle cx="9" cy="19" r="1.5" fill="currentColor" stroke="none"/>
                <circle cx="15" cy="19" r="1.5" fill="currentColor" stroke="none"/>
              </svg>
            </span>
          </td>
          <td class="branch-name-cell">
            <span class="branch-name">
              <input type="text" class="branch-name-input" value="${branchName.replace(/[^a-zA-Z0-9\s]/g, '').trim()}" autofocus>
            </span>
          </td>
          <td>
            <img src="${currentUser}" alt="Owner" class="branch-avatar">
          </td>
          <td>
            <span class="viewers-placeholder">‚Äî</span>
          </td>
          <td>
            <select class="status-select">
              <option value="pending">Pending</option>
              <option value="in-progress">In Progress</option>
              <option value="validated">Validated</option>
            </select>
          </td>
          <td>
            <select class="impact-select">
              <option value="none">None</option>
              <option value="root-cause">Root Cause</option>
              <option value="mitigation">Mitigation</option>
              <option value="contributing">Contributing</option>
            </select>
          </td>
          <td class="actions-cell">
            <div class="edit-actions">
              <input type="text" class="link-input" placeholder="Paste link...">
              <button class="save-branch-btn" onclick="saveEditedBranch(this)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" width="14" height="14">
                  <polyline points="20 6 9 17 4 12"/>
                </svg>
              </button>
              <button class="cancel-branch-btn" onclick="cancelEditBranch(this)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" width="12" height="12">
                  <line x1="18" y1="6" x2="6" y2="18"/>
                  <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
              </button>
            </div>
          </td>
        `;
        row.querySelector('.branch-name-input').focus();
        row.querySelector('.branch-name-input').select();
      }

      function saveEditedBranch(btn) {
        const row = btn.closest('.branch-row');
        const branchName = row.querySelector('.branch-name-input').value || 'Investigation';
        const statusSelect = row.querySelector('.status-select');
        const impactSelect = row.querySelector('.impact-select');
        const currentUser = 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face';
        
        const statusClass = statusSelect.value === 'validated' ? 'validated' : 
                           statusSelect.value === 'in-progress' ? 'in-progress' : 'pending';
        const statusText = statusSelect.value === 'validated' ? 'Validated' : 
                          statusSelect.value === 'in-progress' ? 'In Progress' : 'Pending';
        
        row.className = 'branch-row';
        row.setAttribute('draggable', 'true');
        row.innerHTML = `
          <td class="drag-handle-cell">
            <span class="drag-handle">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                <circle cx="9" cy="5" r="1.5" fill="currentColor" stroke="none"/>
                <circle cx="15" cy="5" r="1.5" fill="currentColor" stroke="none"/>
                <circle cx="9" cy="12" r="1.5" fill="currentColor" stroke="none"/>
                <circle cx="15" cy="12" r="1.5" fill="currentColor" stroke="none"/>
                <circle cx="9" cy="19" r="1.5" fill="currentColor" stroke="none"/>
                <circle cx="15" cy="19" r="1.5" fill="currentColor" stroke="none"/>
              </svg>
            </span>
          </td>
          <td class="branch-name-cell">
            <span class="branch-name">${branchName}</span>
          </td>
          <td>
            <img src="${currentUser}" alt="Owner" class="branch-avatar">
          </td>
          <td>
            <div class="viewers-stack">
              <span class="viewer-count">‚Äî</span>
            </div>
          </td>
          <td>
            <button class="dropdown-with-avatar ${statusClass}">
              ${statusClass !== 'pending' ? `<img src="${currentUser}" alt="User" class="dropdown-avatar">` : ''}
              <span class="dropdown-text">
                ${statusText}
                <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </span>
            </button>
          </td>
          <td>
            <button class="dropdown-with-avatar none">
              <span class="dropdown-text">
                ${impactSelect.options[impactSelect.selectedIndex].text}
                <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </span>
            </button>
          </td>
          <td class="actions-cell">
            <a href="https://www.internalfb.com/canvas/fiddle?entry_point=canvas_home&v=1&document_data=H4sIAAAAAAAAE81VTW%252FbOBD9K4s5S4BsS%252F7Qzemq23QdB%252Bs4DYowEEbSUCZAU1qScuAa%252Fu8FJSupt90mwfawN%252FHxzbw3I2LmAKKAGHiWT0dBNPN5EIR%252BGA3Jx2Aa%252BhgNOc%252BzPBtQBh7kmtBSkaKFeDAZj4PBMAynHlhhJUEM4IGwtDUQ3x%252Far7S%252FuRNFSRY8%252BLshvU%252FzSnFRGojhwOAvB%252F02YBAfGJiq0TkxiBlIVIUUihh4DGrUuDWOc%252FQYmCYzuRa1FZVy4P2DxyDfoFIkTfrtbR%252BxJYsFWuxUCA3JtPMiilYty3nGg2HgT0Zh6Id8GvnZJAv9aMR5VuBkNMuHDI7HI3iwE%252FR4qqErwe7rn3pmsBOmQSm%252B4MkUg5u7y6vFfJmk6%252FnFImkDnCFBbUEHBphbsXNprW7IY1BUWxRduQzmi2S1ZuDq5kJa0n1Ux2oVTpyWQrIrs9ZV8Qyte9%252FGaqHK9qKqSaOtdIu7TB6DHcqmI65XtwmDo%252FeykrFo6V%252BlUtQa9y8K3jMYtEDI4OE1qjxDnTrpxvwC7aDX9nof0St9SLRkbCqUsahySisl97%252Bg7532T1%252FGu%252Bvl%252B8s%252FktV8fb164YGcU8%252F8Y2M3lU5FQcoKu0%252B7F%252F6fG%252Frh9mq%252BdC18YyHp%252BvbqYpHcJcnv39X01lTv5sv56vMbWvMU8T%252Fs0Kfk8w9%252B8ytiP97erP9cXl%252Fc%252FCDYARtR0HtZoRWqvCLVPKdxN6mkkpRrBEdpHLpFXQqValFuLIN4EHqs2wttnYtv5%252BKJKok7ZjRumVu6E6qoHi%252BV80G5m5OJwkzSk4qb4%252B3orUmfhvf5WrAaleGV7oduXslmq242JHf0HcT7vVHqqqkv9mdYLXaV%252FQemq8ezc9eyZ8g56NKbp3NGG9yJSj9vrg1qKjrfdOr4oV0q7SIez%252FhsVownfjaYcj%252FEceRPcTbyg2wWTaPheDiL0HFNWgulqOg78%252BCByZsM03yD2qalRtVI1MLuIYZ5Yys4fgVa78so6wcAAA%253D%253D" target="_blank" class="action-link-btn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                <polyline points="15 3 21 3 21 9"/>
                <line x1="10" y1="14" x2="21" y2="3"/>
              </svg>
              Canvas
            </a>
            <button class="row-edit-btn" onclick="editBranchRow(this)">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
              </svg>
            </button>
          </td>
        `;
      }

      function cancelEditBranch(btn) {
        const row = btn.closest('.branch-row');
        if (row.dataset.originalHtml) {
          row.className = 'branch-row';
          row.setAttribute('draggable', 'true');
          row.innerHTML = row.dataset.originalHtml;
        }
      }

      // ============================================
      // TASK PANEL FUNCTIONS
      // ============================================
      
      // Dummy task data for demonstration
      const taskDataMap = {
        'T251794064': {
          description: 'opsmate_generated',
          resolution: 'Opsmate has identified silent failures in the authentication module. Recommended plan: Implement error handling with retry logic using exponential backoff, surface clear error states to users, and add telemetry tracking. Expected improvement: Token refresh success rate from 87% to 99.2%.',
          tags: ['Authentication', 'Token Management', 'Error Handling', 'P1 Fix']
        },
        'T251794065': {
          description: 'opsmate_generated',
          resolution: 'Opsmate automatically identified and resolved this issue by implementing retry logic with exponential backoff across all auth service HTTP calls. The fix includes a circuit breaker pattern that prevents cascade failures during service degradation. Error rates dropped 94% since deployment.',
          label: 'Resolution',
          tags: ['Auth Service', 'Reliability', 'Circuit Breaker', 'Quick Win']
        },
        'T251794082': {
          description: 'opsmate_generated',
          resolution: 'Opsmate analyzed historical latency distributions across P50, P95, and P99 percentiles. Recommended action: Recalibrate alert thresholds using the proposed values. Expected improvement: Detection time from 12 minutes to under 2 minutes.',
          tags: ['Alerting', 'Performance', 'API Monitoring', 'Tuning']
        },
        'T251794083': {
          description: 'opsmate_generated',
          resolution: 'Opsmate recommends deploying ML-based anomaly detection to monitor traffic patterns. Implementation plan: Set up data pipeline, train baseline model, integrate real-time scoring. Expected outcome: Identify issues 15 minutes before user impact.',
          tags: ['Machine Learning', 'Anomaly Detection', 'Traffic Analysis', 'Proactive']
        },
        'T251794084': {
          description: 'opsmate_generated',
          resolution: 'Opsmate successfully configured and deployed error rate alerting for the payment service. Alert thresholds set at 0.1% for warnings and 0.5% for critical alerts. Integration with PagerDuty complete. Since deployment: 3 incidents detected within 30 seconds, zero customer-facing payment failures.',
          label: 'Resolution',
          tags: ['Payment Service', 'Error Rates', 'Alerting', 'Deployed']
        },
        'T251794091': {
          description: 'opsmate_generated',
          resolution: 'Opsmate recommends implementing a circuit breaker pattern across all downstream dependencies. Plan includes: Configurable failure thresholds per service, automatic recovery testing, monitoring integration. Expected outcome: ~78% reduction in blast radius.',
          tags: ['Circuit Breaker', 'Resilience', 'Architecture', 'Long-term']
        },
        'T251794092': {
          description: 'opsmate_generated',
          resolution: 'Opsmate recommends adding rate limiting at the API gateway level. Implementation plan: Deploy token bucket algorithm with per-client and per-endpoint limits, add graceful degradation responses. Expected outcome: ~89% reduction in timeout errors.',
          tags: ['Rate Limiting', 'API Gateway', 'Protection', 'Scalability']
        },
        'T251794093': {
          description: 'opsmate_generated',
          resolution: 'Opsmate has drafted rollback procedures based on deployment history analysis. Review needed: Decision trees, step-by-step commands, and verification checkpoints. Expected improvement: Rollback time from 45 minutes to 8 minutes.',
          tags: ['Documentation', 'Runbook', 'Rollback', 'Incident Response']
        }
      };

      function openTaskPanel() {
        const panel = document.getElementById('taskPanel');
        const overlay = document.getElementById('taskPanelOverlay');
        
        panel.classList.add('open');
        overlay.classList.add('open');
        document.body.style.overflow = 'hidden';
      }

      function openTaskPanelWithTask(taskId, taskName, criticality) {
        // Update task panel content
        const taskTitle = document.getElementById('taskPanelTitle');
        const taskIdEl = document.getElementById('taskPanelId');
        const taskContent = document.getElementById('taskPanelContent');
        const taskTermBadge = document.getElementById('taskPanelTermBadge');
        const tagsContainer = document.getElementById('taskPanelTags');
        const taskStatusBtn = document.getElementById('taskStatusBtn');
        const taskStatusClosed = document.getElementById('taskStatusClosed');
        
        if (taskTitle) {
          taskTitle.textContent = taskId + ': ' + taskName;
        }
        
        if (taskIdEl) {
          taskIdEl.textContent = taskId;
        }
        
        // Show "Closed" badge for closed tasks
        var taskStatusText = document.getElementById('taskStatusText');
        var closedTasks = ['T251794065', 'T251794084'];
        if (closedTasks.includes(taskId)) {
          if (taskStatusText) taskStatusText.style.display = 'none';
          if (taskStatusClosed) taskStatusClosed.style.display = 'inline-flex';
        } else {
          if (taskStatusText) taskStatusText.style.display = 'inline';
          if (taskStatusClosed) taskStatusClosed.style.display = 'none';
        }
        
        // Set Opsmate as owner for specific tasks
        var taskOwnerBtn = document.querySelector('.task-owner-btn');
        var opsmateTasks = ['T251794065', 'T251794084'];
        if (opsmateTasks.includes(taskId)) {
          if (taskOwnerBtn) {
            taskOwnerBtn.innerHTML = '<svg class="task-user-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.0206 15.0256C10.3164 15.8619 11.1136 16.4613 12.0513 16.4615C12.9891 16.4613 13.7863 15.8619 14.0821 15.0256H15.1493C14.8242 16.4359 13.5606 17.4872 12.0514 17.4872C10.5427 17.4872 9.27906 16.4359 8.95341 15.0256H10.0206ZM12.0508 16.4615H12.0519C12.0517 16.4615 12.0515 16.4615 12.0513 16.4615C12.0512 16.4615 12.051 16.4615 12.0508 16.4615Z" fill="#000000"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.12879 7.38461C9.61545 7.38462 10.8211 8.59026 10.8211 10.0769C10.8211 11.5636 9.61545 12.7692 8.12879 12.7692C6.64213 12.7692 5.43649 11.5636 5.43649 10.0769C5.43649 8.59026 6.64213 7.38461 8.12879 7.38461ZM8.12879 8.41026C7.20828 8.41026 6.46213 9.15641 6.46213 10.0769C6.46213 10.9974 7.20828 11.7436 8.12879 11.7436C9.0493 11.7436 9.79546 10.9974 9.79546 10.0769C9.79546 9.15641 9.0493 8.41026 8.12879 8.41026Z" fill="#000000"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15.8724 7.38461C17.359 7.38462 18.5647 8.59026 18.5647 10.0769C18.5647 11.5636 17.359 12.7692 15.8724 12.7692C14.3857 12.7692 13.1801 11.5636 13.1801 10.0769C13.1801 8.59026 14.3857 7.38461 15.8724 7.38461ZM15.8724 8.41026C14.9519 8.41026 14.2057 9.15641 14.2057 10.0769C14.2057 10.9974 14.9519 11.7436 15.8724 11.7436C16.7929 11.7436 17.5391 10.9974 17.5391 10.0769C17.5391 9.15641 16.7929 8.41026 15.8724 8.41026Z" fill="#000000"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.6673 0C15.177 0 15.5903 0.413337 15.5903 0.923077V5.22922C15.9447 5.2087 16.2862 5.18513 16.616 5.16001V0.98152L18.7175 1.42874C20.2498 1.75489 21.3893 3.00361 21.6047 4.51848C21.6688 4.50617 21.7293 4.49385 21.7867 4.48257C22.019 4.43591 22.1944 4.39746 22.3103 4.37079C22.3683 4.35746 22.4114 4.34716 22.439 4.34049C22.4529 4.33742 22.4631 4.33487 22.4693 4.33333C22.4724 4.33282 22.4744 4.33178 22.4755 4.33178H22.476C22.8877 4.22614 23.3067 4.47435 23.4123 4.88562H23.4113C23.517 5.29741 23.2688 5.71642 22.8575 5.82206C22.8483 5.82463 22.8185 5.83178 22.8016 5.83589C22.7673 5.84409 22.718 5.85592 22.6534 5.87079C22.5247 5.90002 22.3354 5.94154 22.0888 5.99129C21.9442 6.02 21.7795 6.05179 21.5954 6.08564C21.6252 6.27487 21.6411 6.46923 21.6411 6.66667V17.7436C21.6411 19.7667 20.0139 21.4103 17.9965 21.4359H14.9744C14.7406 21.7472 14.3683 21.9487 13.9488 21.9487H10.0514C9.63189 21.9487 9.25958 21.7472 9.02573 21.4359H6.00364C3.98621 21.4108 2.35906 19.7672 2.35906 17.7441V6.66717C2.35906 6.46922 2.37494 6.27536 2.40469 6.08614C2.22058 6.05229 2.05596 6.02102 1.91135 5.99179C1.66469 5.94256 1.47597 5.90104 1.34674 5.87129C1.28213 5.85642 1.23287 5.84459 1.19851 5.83639C1.18158 5.83228 1.15184 5.82513 1.14262 5.82257C0.731345 5.71692 0.483149 5.29744 0.58878 4.88617C0.694421 4.47489 1.1139 4.2267 1.52518 4.33233H1.52573C1.52676 4.33235 1.5288 4.33332 1.53184 4.33383C1.53799 4.33537 1.54829 4.33746 1.56214 4.34105C1.58983 4.34771 1.63291 4.35796 1.69084 4.37129C1.80623 4.39796 1.98213 4.43641 2.21443 4.48307C2.27187 4.49487 2.33237 4.50667 2.39647 4.51898C2.61186 3.00411 3.75134 1.75539 5.28364 1.42924L7.3852 0.982071V5.16051C7.71494 5.18563 8.05649 5.20925 8.41085 5.22977V0.923077C8.41085 0.413333 8.82418 0 9.33392 0H14.6673ZM19.9411 6.35181C18.076 6.61233 15.3739 6.87179 12.0011 6.87179C8.62827 6.87179 5.9257 6.61284 4.06109 6.35181C4.01493 6.34515 3.96929 6.339 3.92417 6.33233C3.90673 6.44104 3.89803 6.55283 3.89803 6.66667V17.7436C3.89803 18.9333 4.86213 19.8974 6.05187 19.8974H9.02623C9.26008 19.5862 9.63239 19.3846 10.0519 19.3846H13.9493C14.3688 19.3846 14.7411 19.5862 14.9749 19.8974H17.9493C19.139 19.8974 20.1032 18.9333 20.1032 17.7436H20.1042V6.66667C20.1042 6.55283 20.0949 6.44155 20.078 6.33233C20.0329 6.339 19.9872 6.34515 19.9411 6.35181ZM10.616 1.4359C10.3611 1.4359 10.1544 1.64256 10.1544 1.89744V2.14874C10.1544 3.06155 10.5601 3.92771 11.2616 4.51232L11.7052 4.88206C11.7909 4.95333 11.896 4.98923 12.0006 4.98923C12.1052 4.98923 12.2103 4.95334 12.296 4.88206L12.7396 4.51232C13.4411 3.92771 13.8467 3.06206 13.8467 2.14874V1.89744C13.8467 1.64257 13.6401 1.4359 13.3852 1.4359H10.616Z" fill="#000000"/></svg> Opsmate';
          }
        } else {
          if (taskOwnerBtn) {
            taskOwnerBtn.innerHTML = '<svg class="task-user-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg> Owner';
          }
        }
        
        // Get dummy data for this task
        const taskData = taskDataMap[taskId] || {
          description: 'Task description pending...',
          tags: ['SEV Task']
        };
        
        if (taskContent) {
          if (taskData.description === 'opsmate_generated') {
            taskContent.style.whiteSpace = 'normal';
            var resolutionText = taskData.resolution || 'Opsmate automatically analyzed and resolved this issue.';
            var labelText = taskData.label || 'Recommended Plan';
            // Use different button action for tasks with protection pages
            var buttonAction = 'openOpsmateOverlay()';
            if (taskId === 'T251794065') buttonAction = 'window.location.href=\'task-T251794065.html\'';
            if (taskId === 'T251794082') buttonAction = 'window.location.href=\'task-T251794082.html\'';
            if (taskId === 'T251794083') buttonAction = 'window.location.href=\'task-T251794083.html\'';
            if (taskId === 'T251794084') buttonAction = 'window.location.href=\'task-T251794084.html\'';
            taskContent.innerHTML = '<div style="background:#f8f9fa;border:1px solid #e5e7eb;border-radius:8px;padding:12px;margin-bottom:12px;"><div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;"><div style="display:flex;align-items:center;gap:8px;"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.0206 15.0256C10.3164 15.8619 11.1136 16.4613 12.0513 16.4615C12.9891 16.4613 13.7863 15.8619 14.0821 15.0256H15.1493C14.8242 16.4359 13.5606 17.4872 12.0514 17.4872C10.5427 17.4872 9.27906 16.4359 8.95341 15.0256H10.0206ZM12.0508 16.4615H12.0519C12.0517 16.4615 12.0515 16.4615 12.0513 16.4615C12.0512 16.4615 12.051 16.4615 12.0508 16.4615Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.12879 7.38461C9.61545 7.38462 10.8211 8.59026 10.8211 10.0769C10.8211 11.5636 9.61545 12.7692 8.12879 12.7692C6.64213 12.7692 5.43649 11.5636 5.43649 10.0769C5.43649 8.59026 6.64213 7.38461 8.12879 7.38461ZM8.12879 8.41026C7.20828 8.41026 6.46213 9.15641 6.46213 10.0769C6.46213 10.9974 7.20828 11.7436 8.12879 11.7436C9.0493 11.7436 9.79546 10.9974 9.79546 10.0769C9.79546 9.15641 9.0493 8.41026 8.12879 8.41026Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15.8724 7.38461C17.359 7.38462 18.5647 8.59026 18.5647 10.0769C18.5647 11.5636 17.359 12.7692 15.8724 12.7692C14.3857 12.7692 13.1801 11.5636 13.1801 10.0769C13.1801 8.59026 14.3857 7.38461 15.8724 7.38461ZM15.8724 8.41026C14.9519 8.41026 14.2057 9.15641 14.2057 10.0769C14.2057 10.9974 14.9519 11.7436 15.8724 11.7436C16.7929 11.7436 17.5391 10.9974 17.5391 10.0769C17.5391 9.15641 16.7929 8.41026 15.8724 8.41026Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.6673 0C15.177 0 15.5903 0.413337 15.5903 0.923077V5.22922C15.9447 5.2087 16.2862 5.18513 16.616 5.16001V0.98152L18.7175 1.42874C20.2498 1.75489 21.3893 3.00361 21.6047 4.51848C21.6688 4.50617 21.7293 4.49385 21.7867 4.48257C22.019 4.43591 22.1944 4.39746 22.3103 4.37079C22.3683 4.35746 22.4114 4.34716 22.439 4.34049C22.4529 4.33742 22.4631 4.33487 22.4693 4.33333C22.4724 4.33282 22.4744 4.33178 22.4755 4.33178H22.476C22.8877 4.22614 23.3067 4.47435 23.4123 4.88562H23.4113C23.517 5.29741 23.2688 5.71642 22.8575 5.82206C22.8483 5.82463 22.8185 5.83178 22.8016 5.83589C22.7673 5.84409 22.718 5.85592 22.6534 5.87079C22.5247 5.90002 22.3354 5.94154 22.0888 5.99129C21.9442 6.02 21.7795 6.05179 21.5954 6.08564C21.6252 6.27487 21.6411 6.46923 21.6411 6.66667V17.7436C21.6411 19.7667 20.0139 21.4103 17.9965 21.4359H14.9744C14.7406 21.7472 14.3683 21.9487 13.9488 21.9487H10.0514C9.63189 21.9487 9.25958 21.7472 9.02573 21.4359H6.00364C3.98621 21.4108 2.35906 19.7672 2.35906 17.7441V6.66717C2.35906 6.46922 2.37494 6.27536 2.40469 6.08614C2.22058 6.05229 2.05596 6.02102 1.91135 5.99179C1.66469 5.94256 1.47597 5.90104 1.34674 5.87129C1.28213 5.85642 1.23287 5.84459 1.19851 5.83639C1.18158 5.83228 1.15184 5.82513 1.14262 5.82257C0.731345 5.71692 0.483149 5.29744 0.58878 4.88617C0.694421 4.47489 1.1139 4.2267 1.52518 4.33233H1.52573C1.52676 4.33235 1.5288 4.33332 1.53184 4.33383C1.53799 4.33537 1.54829 4.33746 1.56214 4.34105C1.58983 4.34771 1.63291 4.35796 1.69084 4.37129C1.80623 4.39796 1.98213 4.43641 2.21443 4.48307C2.27187 4.49487 2.33237 4.50667 2.39647 4.51898C2.61186 3.00411 3.75134 1.75539 5.28364 1.42924L7.3852 0.982071V5.16051C7.71494 5.18563 8.05649 5.20925 8.41085 5.22977V0.923077C8.41085 0.413333 8.82418 0 9.33392 0H14.6673ZM19.9411 6.35181C18.076 6.61233 15.3739 6.87179 12.0011 6.87179C8.62827 6.87179 5.9257 6.61284 4.06109 6.35181C4.01493 6.34515 3.96929 6.339 3.92417 6.33233C3.90673 6.44104 3.89803 6.55283 3.89803 6.66667V17.7436C3.89803 18.9333 4.86213 19.8974 6.05187 19.8974H9.02623C9.26008 19.5862 9.63239 19.3846 10.0519 19.3846H13.9493C14.3688 19.3846 14.7411 19.5862 14.9749 19.8974H17.9493C19.139 19.8974 20.1032 18.9333 20.1032 17.7436H20.1042V6.66667C20.1042 6.55283 20.0949 6.44155 20.078 6.33233C20.0329 6.339 19.9872 6.34515 19.9411 6.35181ZM10.616 1.4359C10.3611 1.4359 10.1544 1.64256 10.1544 1.89744V2.14874C10.1544 3.06155 10.5601 3.92771 11.2616 4.51232L11.7052 4.88206C11.7909 4.95333 11.896 4.98923 12.0006 4.98923C12.1052 4.98923 12.2103 4.95334 12.296 4.88206L12.7396 4.51232C13.4411 3.92771 13.8467 3.06206 13.8467 2.14874V1.89744C13.8467 1.64257 13.6401 1.4359 13.3852 1.4359H10.616Z" fill="black"/></svg><div><div style="font-weight:600;font-size:13px;color:#1a1a1a;">Opsmate</div><div style="font-size:11px;color:#6b7280;">Analysis run on Dec 15, 2025</div></div></div><button class="pill-btn blue" style="padding:6px 12px;font-size:12px;" onclick="' + buttonAction + '">See Protection</button></div><div style="border-top:1px solid #e5e7eb;padding-top:10px;"><div style="font-weight:600;font-size:12px;color:#1a1a1a;margin-bottom:6px;">' + labelText + '</div><p style="margin:0;font-size:13px;color:#374151;line-height:1.5;">' + resolutionText + '</p></div></div><div style="font-size:13px;color:#374151;"><strong>Criticality:</strong> ' + criticality + '</div>';
          } else {
            taskContent.textContent = 'Criticality: ' + criticality + '\n\n' + taskData.description;
          }
        }
        
        if (taskTermBadge) {
          taskTermBadge.textContent = criticality;
        }
        
        // Update tags
        if (tagsContainer) {
          tagsContainer.innerHTML = taskData.tags.map(tag => 
            '<span class="task-tag">' + tag + ' <button>√ó</button></span>'
          ).join('');
        }
        
        openTaskPanel();
      }

      function closeTaskPanel() {
        const panel = document.getElementById('taskPanel');
        const overlay = document.getElementById('taskPanelOverlay');
        panel.classList.remove('open');
        overlay.classList.remove('open');
        document.body.style.overflow = '';
      }

      // Toggle owner/team dropdown
      function toggleOwnerDropdown(event) {
        event.stopPropagation();
        const dropdown = document.getElementById('ownerDropdown');
        if (dropdown.style.display === 'none' || dropdown.style.display === '') {
          dropdown.style.display = 'block';
        } else {
          dropdown.style.display = 'none';
        }
      }

      // Close owner dropdown when clicking outside
      document.addEventListener('click', function(e) {
        const dropdown = document.getElementById('ownerDropdown');
        const wrapper = document.querySelector('.task-owner-team-wrapper');
        if (dropdown && wrapper && !wrapper.contains(e.target)) {
          dropdown.style.display = 'none';
        }
        // Also close suggestions
        const suggestions = document.getElementById('ownerSuggestions');
        const inputContainer = document.querySelector('.task-owner-input-container');
        if (suggestions && inputContainer && !inputContainer.contains(e.target)) {
          suggestions.classList.remove('visible');
        }
      });

      // Owner suggestions data
      const ownerSuggestionsData = [
        { id: 1, name: 'Marcus Chen', username: 'mchen', role: 'IeX AI & Data Infra Product Manager', avatar: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face' },
        { id: 2, name: 'Sarah Mitchell', username: 'smitchell', role: 'Monitoring Interfaces', avatar: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop&crop=face' },
        { id: 3, name: 'David Park', username: 'dpark', role: 'DevInfra Product Manager', avatar: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100&h=100&fit=crop&crop=face' },
        { id: 4, name: 'Emily Rodriguez', username: 'erodriguez', role: 'Devices_ MR Devices Engineering', avatar: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face' },
        { id: 5, name: 'James Wilson', username: 'jwilson', role: 'Platform Engineering Lead', avatar: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face' },
        { id: 6, name: 'Lisa Thompson', username: 'lthompson', role: 'SRE Team Lead', avatar: 'https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=100&h=100&fit=crop&crop=face' },
        { id: 7, name: 'Michael Kim', username: 'mkim', role: 'Infrastructure Oncall', avatar: 'https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=100&h=100&fit=crop&crop=face' }
      ];

      let selectedOwner = null;

      function showOwnerSuggestions() {
        renderOwnerSuggestions(ownerSuggestionsData);
        document.getElementById('ownerSuggestions').classList.add('visible');
      }

      function filterOwnerSuggestions(query) {
        const filtered = ownerSuggestionsData.filter(person => 
          person.name.toLowerCase().includes(query.toLowerCase()) ||
          person.username.toLowerCase().includes(query.toLowerCase()) ||
          person.role.toLowerCase().includes(query.toLowerCase())
        );
        renderOwnerSuggestions(filtered);
        document.getElementById('ownerSuggestions').classList.add('visible');
      }

      function renderOwnerSuggestions(people) {
        const container = document.getElementById('ownerSuggestions');
        if (people.length === 0) {
          container.innerHTML = '<div class="task-owner-suggestion-item" style="color: #6b7280; justify-content: center;">No results found</div>';
          return;
        }
        container.innerHTML = people.map(person => `
          <div class="task-owner-suggestion-item" onclick="selectOwner(${person.id})">
            <img class="task-owner-suggestion-avatar" src="${person.avatar}" alt="${person.name}" />
            <div class="task-owner-suggestion-info">
              <div class="task-owner-suggestion-name">${person.name}</div>
              <div class="task-owner-suggestion-role">Employee (${person.username}) - ${person.role}</div>
            </div>
          </div>
        `).join('');
      }

      function selectOwner(ownerId) {
        const person = ownerSuggestionsData.find(p => p.id === ownerId);
        if (!person) return;
        
        selectedOwner = person;
        
        // Update the input area to show selected owner
        const inputWrapper = document.querySelector('.task-owner-input-container .task-owner-input-wrapper');
        inputWrapper.innerHTML = `
          <div class="task-owner-selected">
            <img class="task-owner-selected-avatar" src="${person.avatar}" alt="${person.name}" />
            <span class="task-owner-selected-name">${person.name}</span>
            <button class="task-owner-selected-remove" onclick="removeSelectedOwner(event)">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
            </button>
          </div>
        `;
        
        // Update the button in the meta row
        const ownerBtn = document.querySelector('.task-owner-btn');
        ownerBtn.innerHTML = `
          <img src="${person.avatar}" alt="${person.name}" style="width: 20px; height: 20px; border-radius: 50%; object-fit: cover;" />
          ${person.name.split(' ')[0]}
        `;
        
        // Hide suggestions and close dropdown
        document.getElementById('ownerSuggestions').classList.remove('visible');
        document.getElementById('ownerDropdown').style.display = 'none';
      }

      function removeSelectedOwner(event) {
        event.stopPropagation();
        selectedOwner = null;
        
        // Restore the input field
        const inputWrapper = document.querySelector('.task-owner-input-container .task-owner-input-wrapper');
        inputWrapper.innerHTML = `
          <svg class="task-owner-input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
          <input type="text" class="task-owner-input" id="ownerSearchInput" placeholder="Enter owner (user or oncall)" onfocus="showOwnerSuggestions()" oninput="filterOwnerSuggestions(this.value)" />
        `;
        
        // Reset the button
        const ownerBtn = document.querySelector('.task-owner-btn');
        ownerBtn.innerHTML = `
          <svg class="task-user-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
          Owner
        `;
      }

      function claimOwnership(event) {
        event.preventDefault();
        // Simulate claiming with a default user (you)
        const currentUser = { id: 0, name: 'Christian Gin', username: 'cgin', role: 'Current User', avatar: 'https://images.unsplash.com/photo-1519345182560-3f2917c472ef?w=100&h=100&fit=crop&crop=face' };
        selectedOwner = currentUser;
        
        const inputWrapper = document.querySelector('.task-owner-input-container .task-owner-input-wrapper');
        inputWrapper.innerHTML = `
          <div class="task-owner-selected">
            <img class="task-owner-selected-avatar" src="${currentUser.avatar}" alt="${currentUser.name}" />
            <span class="task-owner-selected-name">${currentUser.name}</span>
            <button class="task-owner-selected-remove" onclick="removeSelectedOwner(event)">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
            </button>
          </div>
        `;
        
        const ownerBtn = document.querySelector('.task-owner-btn');
        ownerBtn.innerHTML = `
          <img src="${currentUser.avatar}" alt="${currentUser.name}" style="width: 20px; height: 20px; border-radius: 50%; object-fit: cover;" />
          ${currentUser.name.split(' ')[0]}
        `;
        
        document.getElementById('ownerSuggestions').classList.remove('visible');
        document.getElementById('ownerDropdown').style.display = 'none';
      }

      // Close task panel with Escape key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          closeTaskPanel();
          closeDataExploration();
        }
      });

      // ============================================
      // DATA EXPLORATION FUNCTIONS
      // ============================================
      
      // ============================================
      // DOC VIEW STATE & FUNCTIONS
      // ============================================
      
      // All saved docs
      let savedDocs = [];
      let currentDocIndex = -1; // Index in savedDocs array, -1 means new unsaved doc
      
      // Current doc state
      let currentDoc = null;
      let docQueries = [];
      let editingQueryIndex = -1; // -1 means adding new query
      
      function createNewDoc() {
        const now = new Date();
        currentDoc = {
          id: Date.now(), // Unique ID
          name: 'Untitled Doc',
          owner: 'Christian Gin',
          createdAt: now,
          updatedAt: now
        };
        docQueries = [];
        currentDocIndex = -1;
        editingQueryIndex = -1;
        updateDocHeader();
      }
      
      function saveCurrentDoc() {
        if (!currentDoc) return;
        
        currentDoc.updatedAt = new Date();
        currentDoc.queries = [...docQueries];
        
        if (currentDocIndex >= 0) {
          // Update existing doc
          savedDocs[currentDocIndex] = { ...currentDoc };
        } else {
          // Add new doc
          savedDocs.push({ ...currentDoc });
          currentDocIndex = savedDocs.length - 1;
        }
        renderDocList();
      }
      
      function openDocFromList(docId) {
        const idx = savedDocs.findIndex(d => d.id === docId);
        if (idx < 0) return;
        
        const doc = savedDocs[idx];
        currentDoc = { ...doc };
        docQueries = doc.queries ? [...doc.queries] : [];
        currentDocIndex = idx;
        editingQueryIndex = -1;
        
        updateDocHeader();
        showView('doc');
      }
      
      function deleteDoc(docId, event) {
        event.stopPropagation();
        const idx = savedDocs.findIndex(d => d.id === docId);
        if (idx >= 0) {
          savedDocs.splice(idx, 1);
          renderDocList();
        }
      }
      
      function renderDocList() {
        const tbody = document.getElementById('deDocListBody');
        const emptyState = document.getElementById('deDocListEmpty');
        const tableWrapper = document.querySelector('.de-doc-list-table-wrapper');
        
        if (!tbody) return;
        
        if (savedDocs.length === 0) {
          tbody.innerHTML = '';
          if (emptyState) emptyState.style.display = 'flex';
          if (tableWrapper) tableWrapper.style.display = 'none';
          return;
        }
        
        if (emptyState) emptyState.style.display = 'none';
        if (tableWrapper) tableWrapper.style.display = 'block';
        
        tbody.innerHTML = savedDocs.map(doc => {
          const queryCount = doc.queries ? doc.queries.length : 0;
          const queryText = queryCount === 1 ? '1 query' : `${queryCount} queries`;
          return `
            <tr class="de-doc-list-row" onclick="openDocFromList(${doc.id})">
              <td class="de-doc-list-name">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
                <span>${doc.name}</span>
              </td>
              <td class="de-doc-list-owner">${doc.owner}</td>
              <td class="de-doc-list-date">${doc.createdAt.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}</td>
              <td class="de-doc-list-queries">${queryText}</td>
              <td class="de-doc-list-actions">
                <button class="de-doc-list-menu-btn" onclick="toggleDocMenu(${doc.id}, event)">
                  <svg viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="5" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="12" cy="19" r="2"/></svg>
                </button>
                <div class="de-doc-list-menu" id="docMenu${doc.id}">
                  <button onclick="openDocFromList(${doc.id}); event.stopPropagation();">Open</button>
                  <button onclick="deleteDoc(${doc.id}, event)">Delete</button>
                </div>
              </td>
            </tr>
          `;
        }).join('');
      }
      
      function toggleDocMenu(docId, event) {
        event.stopPropagation();
        // Close all other menus
        document.querySelectorAll('.de-doc-list-menu').forEach(menu => {
          if (menu.id !== 'docMenu' + docId) {
            menu.classList.remove('open');
          }
        });
        // Toggle this menu
        const menu = document.getElementById('docMenu' + docId);
        if (menu) {
          menu.classList.toggle('open');
        }
      }
      
      // Close menu when clicking outside
      document.addEventListener('click', () => {
        document.querySelectorAll('.de-doc-list-menu').forEach(menu => {
          menu.classList.remove('open');
        });
      });
      
      function createNewDocFromList() {
        createNewDoc();
        showView('landing');
      }
      
      function updateDocHeader() {
        if (!currentDoc) return;
        document.getElementById('deDocTitle').textContent = currentDoc.name;
        document.getElementById('deDocCreatedAt').textContent = 'Created ' + 
          currentDoc.createdAt.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: 'numeric', minute: '2-digit' });
        document.getElementById('deDocOwner').textContent = currentDoc.owner;
      }
      
      function startEditingDocName() {
        const titleEl = document.getElementById('deDocTitle');
        const inputEl = document.getElementById('deDocTitleInput');
        titleEl.style.display = 'none';
        document.querySelector('.de-doc-edit-btn').style.display = 'none';
        inputEl.style.display = 'block';
        inputEl.value = currentDoc.name;
        inputEl.focus();
        inputEl.select();
      }
      
      function saveDocName() {
        const titleEl = document.getElementById('deDocTitle');
        const inputEl = document.getElementById('deDocTitleInput');
        currentDoc.name = inputEl.value || 'Untitled Doc';
        titleEl.textContent = currentDoc.name;
        titleEl.style.display = 'block';
        document.querySelector('.de-doc-edit-btn').style.display = 'flex';
        inputEl.style.display = 'none';
        // Save to list when name changes
        if (currentDocIndex >= 0) {
          saveCurrentDoc();
        }
      }
      
      function handleDocNameKeydown(e) {
        if (e.key === 'Enter') saveDocName();
        if (e.key === 'Escape') {
          document.getElementById('deDocTitleInput').value = currentDoc.name;
          saveDocName();
        }
      }
      
      function renderDocQueries() {
        const container = document.getElementById('deDocQueries');
        const emptyState = document.getElementById('deDocEmpty');
        
        // Show/hide empty state
        if (docQueries.length === 0) {
          emptyState.style.display = 'flex';
          // Clear any existing query cards
          const existingCards = container.querySelectorAll('.de-doc-query-card');
          existingCards.forEach(card => card.remove());
          return;
        }
        
        emptyState.style.display = 'none';
        
        // Clear existing cards
        const existingCards = container.querySelectorAll('.de-doc-query-card');
        existingCards.forEach(card => card.remove());
        
        // Add query cards
        docQueries.forEach((query, idx) => {
          const card = document.createElement('div');
          card.className = 'de-doc-query-card';
          card.innerHTML = `
            <div class="de-doc-query-header">
              <div class="de-doc-query-header-left">
                <span class="de-doc-query-type">ODS</span>
                <span class="de-doc-query-name">Query ${idx + 1}</span>
              </div>
              <div class="de-doc-query-header-right">
                <label class="de-doc-query-checkbox"><input type="checkbox" /> Start at 0</label>
                <label class="de-doc-query-checkbox"><input type="checkbox" /> Log Y-axis</label>
                <button class="de-doc-query-menu" onclick="openQueryMenu(${idx})">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/></svg>
                </button>
              </div>
            </div>
            <div class="de-doc-query-info">
              Entities: ${query.entities.join(', ') || 'None'} ‚Ä¢ Keys: ${query.keys.join(', ') || 'None'}
            </div>
            <div class="de-doc-query-chart" id="deDocChart${idx}"></div>
          `;
          container.insertBefore(card, emptyState);
          
          // Initialize chart for this query
          setTimeout(() => {
            initDocQueryChart(idx, query);
          }, 100);
        });
      }
      
      function initDocQueryChart(idx, query) {
        const chartEl = document.getElementById('deDocChart' + idx);
        if (!chartEl) return;
        
        const chart = echarts.init(chartEl);
        
        // Generate chart data
        const now = Date.now();
        const data = [];
        for (let i = 0; i < 180; i++) {
          const time = now - (180 - i) * 60000;
          const value = 40 + Math.random() * 20 + Math.sin(i / 10) * 15 + (i > 120 ? Math.random() * 20 : 0);
          data.push([time, Math.round(value)]);
        }
        
        const seriesName = query.entities[0] || 'Query ' + (idx + 1);
        
        const option = {
          tooltip: {
            trigger: 'axis',
            backgroundColor: 'rgba(255, 255, 255, 0.95)',
            borderColor: '#e5e7eb',
            borderWidth: 1,
            textStyle: { color: '#1f2937', fontSize: 12 },
            formatter: function(params) {
              const date = new Date(params[0].value[0]);
              const timeStr = date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
              let html = '<div style="font-weight: 500; margin-bottom: 4px;">' + timeStr + '</div>';
              params.forEach(p => {
                html += '<div style="display: flex; align-items: center; gap: 6px;">' +
                  '<span style="width: 8px; height: 8px; border-radius: 50%; background: ' + p.color + ';"></span>' +
                  '<span>' + p.seriesName + ': <strong>' + p.value[1] + '</strong></span></div>';
              });
              return html;
            }
          },
          grid: { left: 50, right: 20, top: 20, bottom: 30 },
          xAxis: {
            type: 'time',
            axisLine: { lineStyle: { color: '#e5e7eb' } },
            axisTick: { show: false },
            axisLabel: { color: '#6b7280', fontSize: 11, formatter: '{HH}:{mm}' },
            splitLine: { show: false }
          },
          yAxis: {
            type: 'value',
            axisLine: { show: false },
            axisTick: { show: false },
            axisLabel: { color: '#6b7280', fontSize: 11 },
            splitLine: { lineStyle: { color: '#f3f4f6', type: 'dashed' } }
          },
          series: [{
            name: seriesName,
            type: 'line',
            smooth: true,
            symbol: 'none',
            lineStyle: { width: 2, color: '#3b82f6' },
            areaStyle: {
              color: {
                type: 'linear', x: 0, y: 0, x2: 0, y2: 1,
                colorStops: [
                  { offset: 0, color: 'rgba(59, 130, 246, 0.15)' },
                  { offset: 1, color: 'rgba(59, 130, 246, 0)' }
                ]
              }
            },
            data: data
          }],
          animation: true,
          animationDuration: 3000,
          animationDurationUpdate: 1000,
          animationEasing: 'linear',
          animationDelay: function(idx) { return idx * 35; }
        };
        
        chart.setOption(option);
        
        // Store reference for resize
        if (!window.docChartInstances) window.docChartInstances = {};
        window.docChartInstances[idx] = chart;
      }
      
      function openQueryMenu(idx) {
        // For now, just allow editing the query
        editQueryFromDoc(idx);
      }
      
      function editQueryFromDoc(idx) {
        editingQueryIndex = idx;
        const query = docQueries[idx];
        
        // Populate query builder with existing query data
        fieldPills.entities = [...query.entities];
        fieldPills.keys = [...query.keys];
        fieldPills.transform = [...query.transform];
        fieldPills.reduce = [...query.reduce];
        
        // Update pills UI
        renderAllPills();
        
        // Show query builder
        showView('queryBuilder');
      }
      
      function renderAllPills() {
        ['entities', 'keys', 'transform', 'reduce'].forEach(fieldName => {
          const pillsContainer = document.getElementById(fieldName + 'Pills');
          pillsContainer.innerHTML = '';
          fieldPills[fieldName].forEach(value => {
            pillsContainer.appendChild(createPill(value, fieldName));
          });
        });
        // Update Run button state
        updateRunButtonState();
      }
      
      // Toggle Data Source Dropdown
      function toggleDataSourceDropdown(event, location) {
        event.stopPropagation();
        
        // Close all dropdowns first
        document.querySelectorAll('.de-datasource-dropdown').forEach(dd => {
          dd.classList.remove('open');
        });
        
        // Open the appropriate dropdown
        let dropdownId = 'dataSourceDropdown';
        if (location === 'emptyState') dropdownId = 'dataSourceDropdownEmpty';
        if (location === 'bottomBar') dropdownId = 'dataSourceDropdownBottom';
        
        const dropdown = document.getElementById(dropdownId);
        if (dropdown) {
          dropdown.classList.toggle('open');
        }
      }
      
      // Select Data Source and open query builder
      function selectDataSource(source) {
        // Close all dropdowns
        document.querySelectorAll('.de-datasource-dropdown').forEach(dd => {
          dd.classList.remove('open');
        });
        
        // Store selected data source for later use
        window.selectedDataSource = source;
        
        // Open query builder (same as addWidgetFromDoc)
        addWidgetFromDoc();
      }
      
      // Close dropdowns when clicking outside
      document.addEventListener('click', function(e) {
        if (!e.target.closest('.de-doc-add-widget-wrapper')) {
          document.querySelectorAll('.de-datasource-dropdown').forEach(dd => {
            dd.classList.remove('open');
          });
        }
      });
      
      function addWidgetFromDoc() {
        editingQueryIndex = -1; // Adding new query
        // Clear pills
        clearAllFields();
        // Reset chart to empty state
        const chartEmpty = document.getElementById('deChartEmpty');
        const chartContainer = document.getElementById('deChartEcharts');
        if (chartEmpty) chartEmpty.style.display = 'flex';
        if (chartContainer) chartContainer.style.display = 'none';
        // Show query builder
        showView('queryBuilder');
      }
      
      function saveQueryToDoc() {
        const query = {
          entities: [...fieldPills.entities],
          keys: [...fieldPills.keys],
          transform: [...fieldPills.transform],
          reduce: [...fieldPills.reduce],
          chartData: null // Will be regenerated
        };
        
        if (editingQueryIndex >= 0) {
          // Update existing query
          docQueries[editingQueryIndex] = query;
        } else {
          // Add new query
          docQueries.push(query);
        }
        
        editingQueryIndex = -1;
        
        // Auto-save doc to the list when queries are added
        saveCurrentDoc();
      }
      
      // ============================================
      // VIEW NAVIGATION
      // ============================================
      
      function showView(view) {
        const docList = document.getElementById('deDocListView');
        const landing = document.getElementById('deLandingView');
        const docView = document.getElementById('deDocView');
        const queryBuilder = document.getElementById('deQueryBuilderView');
        const breadcrumb = document.getElementById('deBreadcrumb');
        
        docList.style.display = 'none';
        landing.style.display = 'none';
        docView.style.display = 'none';
        queryBuilder.style.display = 'none';
        
        // Update breadcrumb
        updateBreadcrumb(view);
        
        // Hide breadcrumb on landing view (no docs created state)
        if (breadcrumb) {
          breadcrumb.style.display = view === 'landing' ? 'none' : 'flex';
        }
        
        if (view === 'docList') {
          docList.style.display = 'flex';
          renderDocList();
        } else if (view === 'landing') {
          landing.style.display = 'block';
        } else if (view === 'doc') {
          docView.style.display = 'flex';
          renderDocQueries();
          // Resize all doc charts
          setTimeout(() => {
            if (window.docChartInstances) {
              Object.values(window.docChartInstances).forEach(chart => {
                if (chart) chart.resize();
              });
            }
          }, 100);
        } else if (view === 'queryBuilder') {
          queryBuilder.style.display = 'flex';
          // Update query time
          const now = new Date();
          document.getElementById('deQueryTime').textContent = 
            now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' }) + ' ' +
            now.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
          // Initialize autocomplete
          setupAutocomplete();
          // Update Run button state based on existing pills
          updateRunButtonState();
          // Resize chart if it exists
          setTimeout(() => {
            if (deChartInstance) deChartInstance.resize();
          }, 100);
        }
      }
      
      function updateBreadcrumb(view) {
        const extraElements = document.querySelectorAll('.de-breadcrumb-extra');
        const docLink = document.getElementById('deBreadcrumbDoc');
        const widgetSep = document.getElementById('deBreadcrumbWidgetSep');
        const widgetText = document.getElementById('deBreadcrumbWidget');
        
        // Hide all extra elements first
        extraElements.forEach(el => el.style.display = 'none');
        
        if (view === 'doc' || view === 'landing') {
          // Show: Data Exploration > Docs (Docs as current, not link)
          docLink.style.display = 'inline';
          docLink.previousElementSibling.style.display = 'inline'; // separator before Docs
          docLink.classList.remove('de-breadcrumb-link');
          docLink.classList.add('de-breadcrumb-current');
        } else if (view === 'queryBuilder') {
          // Show: Data Exploration > Docs > Create Widget
          docLink.style.display = 'inline';
          docLink.previousElementSibling.style.display = 'inline'; // separator before Docs
          docLink.classList.add('de-breadcrumb-link');
          docLink.classList.remove('de-breadcrumb-current');
          widgetSep.style.display = 'inline';
          widgetText.style.display = 'inline';
        }
        // docList view just shows "Data Exploration"
      }
      
      function setActiveNavItem(itemName) {
        // Use LeftNav component's setActive method
        if (window.LeftNav) {
          LeftNav.setActive(itemName);
        }
      }

      function openDataExploration() {
        const page = document.getElementById('dataExplorationPage');
        page.classList.add('open');
        // Set Data Exploration as active in nav
        setActiveNavItem('Data Exploration');
        // If no docs exist, go to widget selection; otherwise show doc list
        if (savedDocs.length === 0) {
          createNewDoc();
          showView('landing');
        } else {
          showView('docList');
        }
        document.body.style.overflow = 'hidden';
        // Resize ECharts instance if it exists
        setTimeout(() => {
          if (deChartInstance) {
            deChartInstance.resize();
          }
        }, 100);
      }
      
      function closeDataExploration() {
        const page = document.getElementById('dataExplorationPage');
        page.classList.remove('open');
        document.body.style.overflow = '';
        // Save current doc if it has queries before closing
        if (currentDoc && docQueries.length > 0) {
          saveCurrentDoc();
        }
        // Reset to doc list view
        showView('docList');
        // Clear current doc state (but savedDocs persists)
        currentDoc = null;
        currentDocIndex = -1;
        docQueries = [];
        window.docChartInstances = {};
        // Set Incidents as active since we're returning to main page
        setActiveNavItem('Incidents');
      }

      function showIncidents() {
        // Close Data Exploration if open (this also sets Incidents as active)
        closeDataExploration();
      }

      function openODSQueryBuilder() {
        // Create a new doc if none exists
        if (!currentDoc) {
          createNewDoc();
        }
        // Go directly to query builder (flow: landing -> query builder -> run -> doc view)
        showView('queryBuilder');
      }

      function backToLanding() {
        // If we have a doc with queries, go to doc view to see all charts
        if (currentDoc && docQueries.length > 0) {
          showView('doc');
        } else if (currentDoc) {
          // Doc exists but no queries yet - go back to landing
          showView('landing');
          currentDoc = null;
          currentDocIndex = -1;
        } else {
          showView('landing');
        }
        // Reset chart to empty state in query builder
        const chartEmpty = document.getElementById('deChartEmpty');
        const chartContainer = document.getElementById('deChartEcharts');
        if (chartEmpty) chartEmpty.style.display = 'flex';
        if (chartContainer) chartContainer.style.display = 'none';
        // Clear all pills for next query
        clearAllFields();
        // Reset autocomplete init flag so it can reinitialize
        autocompleteInitialized = false;
      }
      
      function backToDocList() {
        // Save current doc if it has queries
        if (currentDoc && docQueries.length > 0) {
          saveCurrentDoc();
        }
        // Clear doc state
        currentDoc = null;
        currentDocIndex = -1;
        docQueries = [];
        window.docChartInstances = {};
        // Go to doc list
        showView('docList');
      }

      // ============================================
      // AUTOCOMPLETE & PILLS FUNCTIONALITY
      // ============================================
      
      // Store pills data for each field
      const fieldPills = {
        entities: [],
        keys: [],
        transform: [],
        reduce: []
      };

      // Generate autocomplete suggestions based on input
      function generateSuggestions(input) {
        if (input.length < 2) return [];
        const suffixes = ['_ct59_ct44', '_m819217776', '.online-serving', '_model_v2', '_ranker_v3', '_queue_01'];
        return [
          input + '_m819217776',
          input + '_c821f3',
          input + '_elastic_m' + Math.floor(Math.random() * 999),
          input + '-mtia-local-ct59-ct44-s' + Math.floor(Math.random() * 99) + '.online-serving',
          input.toUpperCase() + Math.floor(Math.random() * 99999),
        ];
      }

      // Create a pill element
      function createPill(value, fieldName) {
        const pill = document.createElement('div');
        pill.className = 'de-qb-tile';
        pill.innerHTML = `
          <span>${value}</span>
          <button onclick="removePill('${fieldName}', '${value}')">&times;</button>
        `;
        return pill;
      }

      // Add a pill to a field
      function addPill(fieldName, value) {
        if (fieldPills[fieldName].includes(value)) return; // Prevent duplicates
        fieldPills[fieldName].push(value);
        
        const pillsContainer = document.getElementById(fieldName + 'Pills');
        pillsContainer.appendChild(createPill(value, fieldName));
        
        // Clear input
        const input = document.getElementById(fieldName + 'Input');
        input.value = '';
        
        // Hide dropdown
        hideDropdown(fieldName);
        
        // Update Run button state
        updateRunButtonState();
      }

      // Remove a pill from a field
      function removePill(fieldName, value) {
        const index = fieldPills[fieldName].indexOf(value);
        if (index > -1) {
          fieldPills[fieldName].splice(index, 1);
        }
        
        // Re-render pills
        const pillsContainer = document.getElementById(fieldName + 'Pills');
        pillsContainer.innerHTML = '';
        fieldPills[fieldName].forEach(v => {
          pillsContainer.appendChild(createPill(v, fieldName));
        });
        
        // Update Run button state
        updateRunButtonState();
      }

      // Check if any pills exist and update Run button state
      function updateRunButtonState() {
        const runBtn = document.getElementById('runQueryBtn');
        if (!runBtn) return;
        
        const hasPills = Object.values(fieldPills).some(arr => arr.length > 0);
        runBtn.disabled = !hasPills;
      }

      // Show dropdown with suggestions
      function showDropdown(fieldName, suggestions) {
        const dropdown = document.getElementById(fieldName + 'Dropdown');
        dropdown.innerHTML = '';
        
        suggestions.forEach((s, i) => {
          const item = document.createElement('div');
          item.className = 'de-qb-dropdown-item' + (i === 0 ? ' selected' : '');
          item.textContent = s;
          item.onmousedown = function(e) {
            e.preventDefault(); // Prevent blur from firing first
            addPill(fieldName, s);
          };
          dropdown.appendChild(item);
        });
        
        dropdown.classList.add('visible');
      }

      // Hide dropdown
      function hideDropdown(fieldName) {
        const dropdown = document.getElementById(fieldName + 'Dropdown');
        if (dropdown) {
          dropdown.classList.remove('visible');
        }
      }

      // Track if autocomplete is initialized
      let autocompleteInitialized = false;

      // Setup autocomplete for all fields
      function setupAutocomplete() {
        if (autocompleteInitialized) return;
        
        const fields = ['entities', 'keys', 'transform', 'reduce'];
        
        fields.forEach(fieldName => {
          const input = document.getElementById(fieldName + 'Input');
          const dropdown = document.getElementById(fieldName + 'Dropdown');
          
          if (!input || !dropdown) return;
          
          // Input event for autocomplete
          input.oninput = function(e) {
            const value = e.target.value.trim();
            if (value.length >= 2) {
              const suggestions = generateSuggestions(value);
              showDropdown(fieldName, suggestions);
            } else {
              hideDropdown(fieldName);
            }
          };
          
          // Handle Enter key to select first suggestion
          input.onkeydown = function(e) {
            if (e.key === 'Enter') {
              e.preventDefault();
              const selected = dropdown.querySelector('.de-qb-dropdown-item.selected');
              if (selected) {
                addPill(fieldName, selected.textContent);
              } else if (input.value.trim().length >= 2) {
                addPill(fieldName, input.value.trim());
              }
            } else if (e.key === 'Escape') {
              hideDropdown(fieldName);
            } else if (e.key === 'ArrowDown') {
              e.preventDefault();
              const selected = dropdown.querySelector('.de-qb-dropdown-item.selected');
              if (selected && selected.nextElementSibling) {
                selected.classList.remove('selected');
                selected.nextElementSibling.classList.add('selected');
              }
            } else if (e.key === 'ArrowUp') {
              e.preventDefault();
              const selected = dropdown.querySelector('.de-qb-dropdown-item.selected');
              if (selected && selected.previousElementSibling) {
                selected.classList.remove('selected');
                selected.previousElementSibling.classList.add('selected');
              }
            }
          };
          
          // Hide dropdown on blur (with delay for click)
          input.onblur = function() {
            setTimeout(() => hideDropdown(fieldName), 200);
          };
          
          // Focus input
          input.onfocus = function(e) {
            const value = e.target.value.trim();
            if (value.length >= 2) {
              const suggestions = generateSuggestions(value);
              showDropdown(fieldName, suggestions);
            }
          };
        });
        
        autocompleteInitialized = true;
      }

      // Clear all pills for all fields
      function clearAllFields() {
        const fields = ['entities', 'keys', 'transform', 'reduce'];
        fields.forEach(fieldName => {
          fieldPills[fieldName] = [];
          const pillsContainer = document.getElementById(fieldName + 'Pills');
          if (pillsContainer) pillsContainer.innerHTML = '';
          const input = document.getElementById(fieldName + 'Input');
          if (input) input.value = '';
        });
        // Update Run button state
        updateRunButtonState();
      }

      // ECharts instance for Data Exploration
      let deChartInstance = null;

      function runQuery() {
        const runBtn = document.getElementById('runQueryBtn');
        const chartEmpty = document.getElementById('deChartEmpty');
        const chartContainer = document.getElementById('deChartEcharts');
        
        // Set loading state
        runBtn.classList.add('loading');
        runBtn.innerHTML = '<span class="spinner"></span>Running...';
        
        // 2 second delay before showing chart
        setTimeout(() => {
          // Reset button
          runBtn.classList.remove('loading');
          runBtn.innerHTML = 'Run (‚åò ‚Üµ)';
          
          // Show chart
          chartEmpty.style.display = 'none';
          chartContainer.style.display = 'block';
          
          // Initialize ECharts if not already done
          if (!deChartInstance) {
            deChartInstance = echarts.init(chartContainer);
            // Handle resize
            window.addEventListener('resize', () => {
              if (deChartInstance) deChartInstance.resize();
            });
          }
          
          // Get series name from first entity pill or use default
          const seriesName = fieldPills.entities.length > 0 
            ? fieldPills.entities[0] 
            : 'query_result';
          
          // Generate time series data (single series)
          const now = new Date();
          const data = [];
          
          for (let i = 180; i >= 0; i--) {
            const time = new Date(now.getTime() - i * 60000);
            const baseValue = 50;
            const noise = Math.random() * 15 - 7.5;
            const trend = Math.sin(i / 30) * 10;
            const spike = i > 60 && i < 80 ? Math.random() * 30 : 0;
            data.push([time.toISOString(), Math.max(0, baseValue + noise + trend + spike).toFixed(2)]);
          }
          
          // ECharts option configuration - SINGLE SERIES
          const option = {
            backgroundColor: '#ffffff',
            tooltip: {
              trigger: 'axis',
              backgroundColor: 'rgba(255, 255, 255, 0.95)',
              borderColor: '#e5e7eb',
              borderWidth: 1,
              textStyle: { 
                color: '#374151', 
                fontSize: 12 
              },
              axisPointer: { 
                type: 'cross', 
                lineStyle: { 
                  color: '#9ca3af', 
                  type: 'dashed' 
                } 
              },
              formatter: function(params) {
                const time = new Date(params[0].axisValue);
                const timeStr = time.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false });
                let result = '<div style="font-weight:600;margin-bottom:4px;">' + timeStr + '</div>';
                params.forEach(function(item) {
                  result += '<div style="display:flex;align-items:center;gap:8px;">' +
                    '<span style="width:8px;height:8px;border-radius:50%;background:' + item.color + ';"></span>' +
                    '<span style="flex:1;">' + item.seriesName + '</span>' +
                    '<span style="font-weight:500;">' + parseFloat(item.value[1]).toFixed(1) + '</span>' +
                  '</div>';
                });
                return result;
              }
            },
            legend: {
              data: [seriesName],
              bottom: 10,
              icon: 'circle',
              itemWidth: 8,
              itemHeight: 8,
              textStyle: { 
                color: '#6b7280', 
                fontSize: 11 
              }
            },
            grid: { 
              left: 60, 
              right: 40, 
              top: 30, 
              bottom: 50, 
              containLabel: false 
            },
            xAxis: {
              type: 'time',
              boundaryGap: false,
              axisLine: { 
                lineStyle: { color: '#e5e7eb' } 
              },
              axisTick: { show: false },
              axisLabel: {
                color: '#9ca3af',
                fontSize: 11,
                formatter: function(value) {
                  const date = new Date(value);
                  return date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false });
                }
              },
              splitLine: { show: false }
            },
            yAxis: {
              type: 'value',
              axisLine: { show: false },
              axisTick: { show: false },
              axisLabel: { 
                color: '#9ca3af', 
                fontSize: 11 
              },
              splitLine: { 
                lineStyle: { 
                  color: '#f3f4f6', 
                  type: 'dashed' 
                } 
              }
            },
            series: [
              {
                name: seriesName,
                type: 'line',
                smooth: true,
                symbol: 'none',
                lineStyle: { 
                  width: 2, 
                  color: '#3B82F6' 
                },
                areaStyle: {
                  color: {
                    type: 'linear',
                    x: 0, y: 0, x2: 0, y2: 1,
                    colorStops: [
                      { offset: 0, color: 'rgba(59, 130, 246, 0.2)' },
                      { offset: 1, color: 'rgba(59, 130, 246, 0)' }
                    ]
                  }
                },
                data: data
              }
            ],
            dataZoom: [
              { 
                type: 'inside', 
                start: 0, 
                end: 100, 
                zoomOnMouseWheel: true, 
                moveOnMouseMove: true 
              }
            ],
            // Animation settings - line drawing effect
            animation: true,
            animationDuration: 3000,
            animationDurationUpdate: 1000,
            animationEasing: 'linear',
            animationDelay: function(idx) {
              return idx * 35; // Stagger each point for drawing effect (~6.5s total)
            }
          };
          
          // Set the option and render
          deChartInstance.setOption(option, true); // true = clear previous options
          
          // Ensure proper sizing after render
          setTimeout(() => {
            if (deChartInstance) deChartInstance.resize();
          }, 100);
          
          // Save query to doc (user can click "Back to Doc" to see all saved charts)
          saveQueryToDoc();
        }, 2000); // 2 second delay
      }
    </script>
  </main>

  <!-- Explore Panel Overlay -->
  <div class="explore-panel-overlay" id="explorePanelOverlay" onclick="closeExplorePanel()"></div>

  <!-- Explore Panel -->
  <div class="explore-panel" id="explorePanel">
    <div class="explore-panel-header">
      <h2 class="explore-panel-title">Explore Analysis</h2>
      <button class="explore-panel-close" onclick="closeExplorePanel()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"/>
          <line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>
    </div>
    <div class="explore-panel-body">
      <div class="explore-section">
        <h3 class="explore-section-title">Root Cause Analysis</h3>
        <p class="explore-section-text">A spike in the <a href="#" class="code-link">auth_error_rate</a> was traced back to a broken integration introduced in a recent dependency update. The update caused requests to fail silently, leading to an increase in authorization errors across dependent systems.</p>
      </div>
      <div class="explore-section">
        <h3 class="explore-section-title">Mitigation Steps</h3>
        <p class="explore-section-text">Reverting the faulty dependency diff <a href="#" class="code-link">D391491</a> would immediately stabilize error rates. It also recommended adding automated integration tests to catch similar issues.</p>
      </div>
      <div class="explore-section">
        <h3 class="explore-section-title">Impact Assessment</h3>
        <p class="explore-section-text">Approximately 15% of authentication requests were affected during the incident window. No data loss was detected, but user sessions were intermittently dropped.</p>
      </div>
      <div class="explore-section">
        <h3 class="explore-section-title">Related Signals</h3>
        <ul class="explore-list">
          <li>Error rate spike detected at 14:32 UTC</li>
          <li>Dependency update deployed at 14:15 UTC</li>
          <li>First user reports at 14:45 UTC</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Data Exploration Full Page -->
  <div class="data-exploration-page" id="dataExplorationPage">
    <!-- Left Sidebar Container - Rendered by LeftNav component -->
    <div id="deNavContainer"></div>

    <!-- Main Content -->
    <main class="de-main">
      <!-- Breadcrumb -->
      <div class="de-breadcrumb" id="deBreadcrumb">
        <a href="#" onclick="closeDataExploration(); return false;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
        </a>
        <span class="de-breadcrumb-sep">/</span>
        <a href="#" class="de-breadcrumb-link" onclick="showView('docList'); return false;">Data Exploration</a>
        <span class="de-breadcrumb-sep de-breadcrumb-extra" style="display: none;">/</span>
        <a href="#" class="de-breadcrumb-link de-breadcrumb-extra" id="deBreadcrumbDoc" style="display: none;" onclick="showView('doc'); return false;">Docs</a>
        <span class="de-breadcrumb-sep de-breadcrumb-extra" id="deBreadcrumbWidgetSep" style="display: none;">/</span>
        <span class="de-breadcrumb-current de-breadcrumb-extra" id="deBreadcrumbWidget" style="display: none;">Create Widget</span>
      </div>

      <!-- Doc List View -->
      <div class="de-content de-doc-list-view" id="deDocListView">
        <div class="de-doc-list-header">
          <h1 class="de-doc-list-title">Data Exploration</h1>
          <button class="de-doc-list-new-btn" onclick="createNewDocFromList()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="5" x2="12" y2="19"></line>
              <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
            <span>New Doc</span>
          </button>
        </div>
        
        <!-- Empty State (hidden by default, shown when no docs) -->
        <div class="de-doc-list-empty" id="deDocListEmpty" style="display: none;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
            <line x1="3" y1="9" x2="21" y2="9"/>
            <line x1="9" y1="21" x2="9" y2="9"/>
          </svg>
          <h3>No documents yet</h3>
          <p>Create a new doc to start exploring your data</p>
          <button class="de-doc-list-empty-btn" onclick="createNewDocFromList()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="5" x2="12" y2="19"></line>
              <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
            <span>Create New Doc</span>
          </button>
        </div>
        
        <!-- Doc Table -->
        <div class="de-doc-list-table-wrapper">
          <table class="de-doc-list-table">
            <thead>
              <tr>
                <th>NAME</th>
                <th>OWNER</th>
                <th>CREATED</th>
                <th>QUERIES</th>
                <th>ACTIONS</th>
              </tr>
            </thead>
            <tbody id="deDocListBody">
              <!-- Rows populated by JS -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Landing Content -->
      <div class="de-content" id="deLandingView" style="display: none;">
        <h1 class="de-title">Get started by adding a widget</h1>
        
        <!-- Input Bar -->
        <div class="de-input-bar">
          <button class="de-input-add">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="5" x2="12" y2="19"></line>
              <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
          </button>
          <input type="text" placeholder="Type a note or paste a chart URL: <chart link> <title>" class="de-input-field" />
          <button class="de-input-submit">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9 18 15 12 9 6"/>
            </svg>
          </button>
        </div>

        <!-- Widget Grid -->
        <div class="de-widget-grid">
          <div class="de-widget-card" onclick="openODSQueryBuilder()">
            <div class="de-widget-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/></svg>
            </div>
            <div class="de-widget-content">
              <h3>Landline</h3>
              <p>Event discovery tool for root-causing issues and regressions.</p>
            </div>
          </div>
          <div class="de-widget-card" onclick="openODSQueryBuilder()">
            <div class="de-widget-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
            </div>
            <div class="de-widget-content">
              <h3>Logarithm</h3>
              <p>Unstructured logs viewer with federated search</p>
            </div>
          </div>
          <div class="de-widget-card" onclick="openODSQueryBuilder()">
            <div class="de-widget-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/></svg>
            </div>
            <div class="de-widget-content">
              <h3>ODS</h3>
              <p>Monitoring and alerting timeseries data source.</p>
            </div>
          </div>
          <div class="de-widget-card de-widget-card-badge">
            <div class="de-widget-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
            </div>
            <div class="de-widget-content">
              <div class="de-widget-title-row">
                <h3>Metrics Catalog</h3>
                <span class="de-widget-badge">Early Access</span>
              </div>
              <p>Query pre-defined metrics via Metrics Catalog</p>
            </div>
          </div>
          <div class="de-widget-card" onclick="openODSQueryBuilder()">
            <div class="de-widget-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/></svg>
            </div>
            <div class="de-widget-content">
              <h3>ODS3</h3>
              <p>Next-gen monitoring and alerting timeseries data source.</p>
            </div>
          </div>
          <div class="de-widget-card" onclick="openODSQueryBuilder()">
            <div class="de-widget-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>
            </div>
            <div class="de-widget-content">
              <h3>Scuba</h3>
              <p>Interactive real-time data for debugging and monitoring.</p>
            </div>
          </div>
          <div class="de-widget-card de-widget-card-badge">
            <div class="de-widget-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>
            </div>
            <div class="de-widget-content">
              <div class="de-widget-title-row">
                <h3>Scuba Lite</h3>
                <span class="de-widget-badge">Early Access</span>
              </div>
              <p>Interactive real-time data for debugging and monitoring.</p>
            </div>
          </div>
          <div class="de-widget-card" onclick="openODSQueryBuilder()">
            <div class="de-widget-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>
            </div>
            <div class="de-widget-content">
              <h3>Service Dependencies</h3>
              <p>Aggregated Traces & Insights</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Doc View (shows saved queries/charts) -->
      <div class="de-content de-doc-view" id="deDocView" style="display: none;">
        <!-- Doc Header -->
        <div class="de-doc-header">
          <div class="de-doc-header-left">
            <button class="de-doc-back-btn" onclick="backToDocList()">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>
            </button>
            <div class="de-doc-title-area">
              <div class="de-doc-title-row">
                <h1 class="de-doc-title" id="deDocTitle" onclick="startEditingDocName()">Untitled Doc</h1>
                <button class="de-doc-edit-btn" onclick="startEditingDocName()">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>
                </button>
                <input type="text" class="de-doc-title-input" id="deDocTitleInput" style="display: none;" onblur="saveDocName()" onkeydown="handleDocNameKeydown(event)" />
              </div>
              <div class="de-doc-meta">
                <span id="deDocCreatedAt">Created Jan 20, 2026, 2:16 PM</span>
                <span>‚Ä¢</span>
                <span>Owner: <span id="deDocOwner">Christian Gin</span></span>
              </div>
            </div>
          </div>
          <div class="de-doc-header-right">
            <button class="ask-opsmate-btn de-ask-opsmate" onclick="openOpsmate()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0206 15.0256C10.3164 15.8619 11.1136 16.4613 12.0513 16.4615C12.9891 16.4613 13.7863 15.8619 14.0821 15.0256H15.1493C14.8242 16.4359 13.5606 17.4872 12.0514 17.4872C10.5427 17.4872 9.27906 16.4359 8.95341 15.0256H10.0206Z" fill="currentColor"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M8.12879 7.38461C9.61545 7.38462 10.8211 8.59026 10.8211 10.0769C10.8211 11.5636 9.61545 12.7692 8.12879 12.7692C6.64213 12.7692 5.43649 11.5636 5.43649 10.0769C5.43649 8.59026 6.64213 7.38461 8.12879 7.38461Z" fill="currentColor"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M15.8724 7.38461C17.359 7.38462 18.5647 8.59026 18.5647 10.0769C18.5647 11.5636 17.359 12.7692 15.8724 12.7692C14.3857 12.7692 13.1801 11.5636 13.1801 10.0769C13.1801 8.59026 14.3857 7.38461 15.8724 7.38461Z" fill="currentColor"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M14.6673 0C15.177 6.43207e-06 15.5903 0.413337 15.5903 0.923077V5.22922C15.9447 5.2087 16.2862 5.18513 16.616 5.16001V0.98152L18.7175 1.42874C20.2498 1.75489 21.3893 3.00361 21.6047 4.51848C21.6688 4.50617 21.7293 4.49385 21.7867 4.48257C22.019 4.43591 22.1944 4.39746 22.3103 4.37079C22.3683 4.35746 22.4114 4.34716 22.439 4.34049C22.4529 4.33742 22.4631 4.33487 22.4693 4.33333C22.4724 4.33282 22.4744 4.33178 22.4755 4.33178H22.476C22.8877 4.22614 23.3067 4.47435 23.4123 4.88562H23.4113C23.517 5.29741 23.2688 5.71642 22.8575 5.82206C22.8483 5.82463 22.8185 5.83178 22.8016 5.83589C22.7673 5.84409 22.718 5.85592 22.6534 5.87079C22.5247 5.90002 22.3354 5.94154 22.0888 5.99129C21.9442 6.02 21.7795 6.05179 21.5954 6.08564C21.6252 6.27487 21.6411 6.46923 21.6411 6.66667V17.7436C21.6411 19.7667 20.0139 21.4103 17.9965 21.4359H14.9744C14.7406 21.7472 14.3683 21.9487 13.9488 21.9487H10.0514C9.63189 21.9487 9.25958 21.7472 9.02573 21.4359H6.00364C3.98621 21.4108 2.35906 19.7672 2.35906 17.7441V6.66717C2.35906 6.46922 2.37494 6.27536 2.40469 6.08614C2.22058 6.05229 2.05596 6.02102 1.91135 5.99179C1.66469 5.94256 1.47597 5.90104 1.34674 5.87129C1.28213 5.85642 1.23287 5.84459 1.19851 5.83639C1.18158 5.83228 1.15184 5.82513 1.14262 5.82257C0.731345 5.71692 0.483149 5.29744 0.58878 4.88617C0.694421 4.47489 1.1139 4.2267 1.52518 4.33233H1.52573C1.52676 4.33235 1.5288 4.33332 1.53184 4.33383C1.53799 4.33537 1.54829 4.33746 1.56214 4.34105C1.58983 4.34771 1.63291 4.35796 1.69084 4.37129C1.80623 4.39796 1.98213 4.43641 2.21443 4.48307C2.27187 4.49487 2.33237 4.50667 2.39647 4.51898C2.61186 3.00411 3.75134 1.75539 5.28364 1.42924L7.3852 0.982071V5.16051C7.71494 5.18563 8.05649 5.20925 8.41085 5.22977V0.923077C8.41085 0.413333 8.82418 0 9.33392 0H14.6673Z" fill="currentColor"/>
              </svg>
              Ask Opsmate
            </button>
            <button class="de-doc-action-btn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
            </button>
            <button class="de-doc-action-btn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
              <span>Share</span>
            </button>
            <div class="de-doc-add-widget-wrapper">
              <button class="de-doc-add-widget-btn" onclick="toggleDataSourceDropdown(event)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                <span>Add Widget</span>
                <svg class="dropdown-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14"><polyline points="6 9 12 15 18 9"/></svg>
              </button>
              <div class="de-datasource-dropdown" id="dataSourceDropdown">
                <div class="de-datasource-grid">
                  <button class="de-datasource-item" onclick="selectDataSource('landline')">
                    <span class="de-datasource-name">Landline</span>
                    <span class="de-datasource-desc">Event discovery tool for root-causing issues and...</span>
                  </button>
                  <button class="de-datasource-item" onclick="selectDataSource('ods')">
                    <span class="de-datasource-name">ODS</span>
                    <span class="de-datasource-desc">Monitoring and alerting timeseries data source.</span>
                  </button>
                  <button class="de-datasource-item" onclick="selectDataSource('scuba-lite')">
                    <span class="de-datasource-badge">
                      <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                      Early Access
                    </span>
                    <span class="de-datasource-name">Scuba Lite</span>
                    <span class="de-datasource-desc">Interactive real-time data for debugging and...</span>
                  </button>
                  <button class="de-datasource-item" onclick="selectDataSource('logarithm')">
                    <span class="de-datasource-name">Logarithm</span>
                    <span class="de-datasource-desc">Unstructured logs viewer with federated search</span>
                  </button>
                  <button class="de-datasource-item" onclick="selectDataSource('ods3')">
                    <span class="de-datasource-name">ODS3</span>
                    <span class="de-datasource-desc">Next-gen monitoring and alerting timeseries data...</span>
                  </button>
                  <button class="de-datasource-item" onclick="selectDataSource('service-dependencies')">
                    <span class="de-datasource-name">Service Dependenc...</span>
                    <span class="de-datasource-desc">Aggregated Traces & Insights</span>
                  </button>
                  <button class="de-datasource-item" onclick="selectDataSource('logarithm-early')">
                    <span class="de-datasource-badge">
                      <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                      Early Access
                    </span>
                    <span class="de-datasource-name">Logarithm</span>
                    <span class="de-datasource-desc">Next-gen unstructured logs</span>
                  </button>
                  <button class="de-datasource-item" onclick="selectDataSource('scuba')">
                    <span class="de-datasource-name">Scuba</span>
                    <span class="de-datasource-desc">Real-time data exploration and debugging</span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Time Bar -->
        <div class="de-doc-timebar">
          <div class="de-doc-time-range">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
            <span>3 hours ago</span>
          </div>
          <span class="de-doc-time-sep">‚Äî</span>
          <div class="de-doc-time-range">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
            <span>now</span>
          </div>
          <div class="de-doc-time-pills">
            <button class="de-doc-time-pill">30M</button>
            <button class="de-doc-time-pill">1H</button>
            <button class="de-doc-time-pill active">3H</button>
            <button class="de-doc-time-pill">6H</button>
            <button class="de-doc-time-pill">12H</button>
            <button class="de-doc-time-pill">1D</button>
            <button class="de-doc-time-pill">3D</button>
            <button class="de-doc-time-pill">7D</button>
            <button class="de-doc-time-pill">14D</button>
            <button class="de-doc-time-pill">30D</button>
          </div>
          <button class="de-doc-refresh-btn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>
            <span>Refresh</span>
          </button>
        </div>

        <!-- Queries Content -->
        <div class="de-doc-queries" id="deDocQueries">
          <!-- Empty state -->
          <div class="de-doc-empty" id="deDocEmpty">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/></svg>
            <h3>No queries yet</h3>
            <p>Add a widget to start exploring data</p>
            <div class="de-doc-add-widget-wrapper empty-state-wrapper">
              <button class="de-doc-empty-btn" onclick="toggleDataSourceDropdown(event, 'emptyState')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                <span>Add Widget</span>
                <svg class="dropdown-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14"><polyline points="6 9 12 15 18 9"/></svg>
              </button>
              <div class="de-datasource-dropdown" id="dataSourceDropdownEmpty">
                <div class="de-datasource-grid">
                  <button class="de-datasource-item" onclick="selectDataSource('landline')">
                    <span class="de-datasource-name">Landline</span>
                    <span class="de-datasource-desc">Event discovery tool for root-causing issues and...</span>
                  </button>
                  <button class="de-datasource-item" onclick="selectDataSource('ods')">
                    <span class="de-datasource-name">ODS</span>
                    <span class="de-datasource-desc">Monitoring and alerting timeseries data source.</span>
                  </button>
                  <button class="de-datasource-item" onclick="selectDataSource('scuba-lite')">
                    <span class="de-datasource-badge">
                      <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                      Early Access
                    </span>
                    <span class="de-datasource-name">Scuba Lite</span>
                    <span class="de-datasource-desc">Interactive real-time data for debugging and...</span>
                  </button>
                  <button class="de-datasource-item" onclick="selectDataSource('logarithm')">
                    <span class="de-datasource-name">Logarithm</span>
                    <span class="de-datasource-desc">Unstructured logs viewer with federated search</span>
                  </button>
                  <button class="de-datasource-item" onclick="selectDataSource('ods3')">
                    <span class="de-datasource-name">ODS3</span>
                    <span class="de-datasource-desc">Next-gen monitoring and alerting timeseries data...</span>
                  </button>
                  <button class="de-datasource-item" onclick="selectDataSource('service-dependencies')">
                    <span class="de-datasource-name">Service Dependenc...</span>
                    <span class="de-datasource-desc">Aggregated Traces & Insights</span>
                  </button>
                  <button class="de-datasource-item" onclick="selectDataSource('logarithm-early')">
                    <span class="de-datasource-badge">
                      <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                      Early Access
                    </span>
                    <span class="de-datasource-name">Logarithm</span>
                    <span class="de-datasource-desc">Next-gen unstructured logs</span>
                  </button>
                  <button class="de-datasource-item" onclick="selectDataSource('scuba')">
                    <span class="de-datasource-name">Scuba</span>
                    <span class="de-datasource-desc">Real-time data exploration and debugging</span>
                  </button>
                </div>
              </div>
            </div>
          </div>
          <!-- Query cards will be added here dynamically -->
        </div>

        <!-- Bottom Input -->
        <div class="de-doc-bottom">
          <div class="de-doc-input-bar">
            <div class="de-doc-add-widget-wrapper bottom-bar-wrapper">
              <button class="de-doc-input-add" onclick="toggleDataSourceDropdown(event, 'bottomBar')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
              </button>
              <div class="de-datasource-dropdown bottom-dropdown" id="dataSourceDropdownBottom">
                <div class="de-datasource-grid">
                  <button class="de-datasource-item" onclick="selectDataSource('landline')">
                    <span class="de-datasource-name">Landline</span>
                    <span class="de-datasource-desc">Event discovery tool for root-causing issues and...</span>
                  </button>
                  <button class="de-datasource-item" onclick="selectDataSource('ods')">
                    <span class="de-datasource-name">ODS</span>
                    <span class="de-datasource-desc">Monitoring and alerting timeseries data source.</span>
                  </button>
                  <button class="de-datasource-item" onclick="selectDataSource('scuba-lite')">
                    <span class="de-datasource-badge">
                      <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                      Early Access
                    </span>
                    <span class="de-datasource-name">Scuba Lite</span>
                    <span class="de-datasource-desc">Interactive real-time data for debugging and...</span>
                  </button>
                  <button class="de-datasource-item" onclick="selectDataSource('logarithm')">
                    <span class="de-datasource-name">Logarithm</span>
                    <span class="de-datasource-desc">Unstructured logs viewer with federated search</span>
                  </button>
                  <button class="de-datasource-item" onclick="selectDataSource('ods3')">
                    <span class="de-datasource-name">ODS3</span>
                    <span class="de-datasource-desc">Next-gen monitoring and alerting timeseries data...</span>
                  </button>
                  <button class="de-datasource-item" onclick="selectDataSource('service-dependencies')">
                    <span class="de-datasource-name">Service Dependenc...</span>
                    <span class="de-datasource-desc">Aggregated Traces & Insights</span>
                  </button>
                  <button class="de-datasource-item" onclick="selectDataSource('logarithm-early')">
                    <span class="de-datasource-badge">
                      <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                      Early Access
                    </span>
                    <span class="de-datasource-name">Logarithm</span>
                    <span class="de-datasource-desc">Next-gen unstructured logs</span>
                  </button>
                  <button class="de-datasource-item" onclick="selectDataSource('scuba')">
                    <span class="de-datasource-name">Scuba</span>
                    <span class="de-datasource-desc">Real-time data exploration and debugging</span>
                  </button>
                </div>
              </div>
            </div>
            <input type="text" placeholder="Type a note or paste a chart URL: <chart link> <title>" class="de-doc-input-field" />
          </div>
        </div>
      </div>

      <!-- ODS Query Builder View (hidden by default) -->
      <div class="de-content de-query-builder" id="deQueryBuilderView" style="display: none;">
        <!-- Toolbar -->
        <div class="de-qb-toolbar">
          <button class="de-qb-back-btn" onclick="backToLanding()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>
            Back to Doc
          </button>
          <div class="de-qb-toolbar-right">
            <button class="de-qb-toolbar-btn">Copy URL</button>
            <button class="de-qb-toolbar-btn">Exports <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg></button>
            <div class="de-qb-toolbar-divider"></div>
            <button class="de-qb-toolbar-btn de-qb-toolbar-btn-active">Pixelcloud</button>
            <button class="de-qb-toolbar-btn">Links <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg></button>
          </div>
        </div>

        <!-- Time Bar -->
        <div class="de-qb-timebar">
          <div class="de-qb-time-range">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
            <span>3 hours ago</span>
          </div>
          <span class="de-qb-time-sep">‚Äî</span>
          <div class="de-qb-time-range">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
            <span>now</span>
          </div>
          <div class="de-qb-time-pills">
            <button class="de-qb-time-pill">30M</button>
            <button class="de-qb-time-pill">1H</button>
            <button class="de-qb-time-pill active">3H</button>
            <button class="de-qb-time-pill">6H</button>
            <button class="de-qb-time-pill">12H</button>
            <button class="de-qb-time-pill">1D</button>
            <button class="de-qb-time-pill">3D</button>
            <button class="de-qb-time-pill">7D</button>
            <button class="de-qb-time-pill">14D</button>
            <button class="de-qb-time-pill">30D</button>
          </div>
          <button class="de-qb-refresh-btn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>
            Refresh
          </button>
        </div>

        <!-- Query Builder Main -->
        <div class="de-qb-main">
          <!-- Left Panel - Queries -->
          <div class="de-qb-queries-panel">
            <div class="de-qb-queries-header">
              <span>All Queries</span>
              <div class="de-qb-queries-actions">
                <button>Include All</button>
                <span>‚Ä¢</span>
                <button>Exclude All</button>
              </div>
            </div>
            <div class="de-qb-query-item active">(DS1) ODS</div>
          </div>

          <!-- Right Panel - Query Fields -->
          <div class="de-qb-fields-panel">
            <div class="de-qb-fields-header">
              <div class="de-qb-fields-title">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/></svg>
                <span>(DS1) ODS</span>
                <svg class="de-qb-warning" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
              </div>
              <button class="de-qb-clear-btn" onclick="clearAllFields()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                Clear All
              </button>
            </div>

            <!-- Query Fields -->
            <div class="de-qb-field-wrapper">
              <div class="de-qb-field" data-field="entities">
                <div class="de-qb-field-label">
                  <span class="de-qb-field-badge">?</span>
                  <span class="de-qb-field-q">Q</span>
                  <span>Entities</span>
                </div>
                <div class="de-qb-field-input">
                  <div class="de-qb-pills" id="entitiesPills"></div>
                  <input type="text" placeholder="Add entity..." id="entitiesInput" autocomplete="off" />
                </div>
              </div>
              <div class="de-qb-dropdown" id="entitiesDropdown"></div>
            </div>
            <div class="de-qb-field-wrapper">
              <div class="de-qb-field" data-field="keys">
                <div class="de-qb-field-label">
                  <span class="de-qb-field-badge">?</span>
                  <span class="de-qb-field-q">Q</span>
                  <span>Keys</span>
                </div>
                <div class="de-qb-field-input">
                  <div class="de-qb-pills" id="keysPills"></div>
                  <input type="text" placeholder="Add key..." id="keysInput" autocomplete="off" />
                </div>
              </div>
              <div class="de-qb-dropdown" id="keysDropdown"></div>
            </div>
            <div class="de-qb-field-wrapper">
              <div class="de-qb-field" data-field="transform">
                <div class="de-qb-field-label">
                  <span class="de-qb-field-badge">?</span>
                  <span class="de-qb-field-q">Q</span>
                  <span>Transform</span>
                </div>
                <div class="de-qb-field-input">
                  <div class="de-qb-pills" id="transformPills"></div>
                  <input type="text" placeholder="Add transform..." id="transformInput" autocomplete="off" />
                </div>
              </div>
              <div class="de-qb-dropdown" id="transformDropdown"></div>
            </div>
            <div class="de-qb-field-wrapper">
              <div class="de-qb-field" data-field="reduce">
                <div class="de-qb-field-label">
                  <span class="de-qb-field-badge">?</span>
                  <span class="de-qb-field-q">Q</span>
                  <span>Reduce</span>
                </div>
                <div class="de-qb-field-input">
                  <div class="de-qb-pills" id="reducePills"></div>
                  <input type="text" placeholder="Add reduce..." id="reduceInput" autocomplete="off" />
                </div>
              </div>
              <div class="de-qb-dropdown" id="reduceDropdown"></div>
            </div>

            <!-- Datatypes -->
            <div class="de-qb-datatypes">
              <span>Datatypes</span>
              <button class="de-qb-datatype-btn active">RAW <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg></button>
              <button class="de-qb-datatype-btn">Table</button>
              <button class="de-qb-datatype-btn">AUTO <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg></button>
            </div>
          </div>
        </div>

        <!-- Bottom Toolbar -->
        <div class="de-qb-bottom-toolbar">
          <div class="de-qb-bottom-left">
            <button class="de-qb-add-btn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
              New Query
            </button>
            <button class="de-qb-add-btn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
              Formula
            </button>
          </div>
          <div class="de-qb-bottom-right">
            <span>View as</span>
            <button class="de-qb-view-btn">Time Series <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg></button>
            <button class="de-qb-run-btn" id="runQueryBtn" onclick="runQuery()">Run (‚åò ‚Üµ)</button>
          </div>
        </div>

        <!-- Chart Area -->
        <div class="de-qb-chart-area">
          <div class="de-qb-chart-header">
            <span class="de-qb-chart-title">ODS</span>
            <div class="de-qb-chart-options">
              <label><input type="checkbox" /> Start at 0</label>
              <label><input type="checkbox" /> Log Y-axis</label>
              <label><input type="checkbox" /> Point Markers</label>
            </div>
          </div>
          <div class="de-qb-chart-info">
            rapido query from <span id="deQueryTime"></span>
          </div>
          <div class="de-qb-chart" id="deChart">
            <div class="de-qb-chart-empty" id="deChartEmpty">
              <h3>No data.</h3>
              <p>Build a query above to view it here.</p>
            </div>
            <div id="deChartEcharts" style="display: none; width: 100%; height: 100%; min-height: 350px;"></div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Task Panel Flyout -->
  <div class="task-panel-overlay" id="taskPanelOverlay" onclick="closeTaskPanel()"></div>
  <div class="task-panel" id="taskPanel">
    <!-- Panel Header -->
    <div class="task-panel-header">
      <div class="task-panel-header-left">
        <button class="task-status-btn" id="taskStatusBtn">
          <svg class="task-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          <span id="taskStatusText">No Progress</span>
          <span class="task-closed-badge" id="taskStatusClosed" style="display: none;">Closed</span>
          <svg class="task-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
        </button>
        <span class="task-id" id="taskPanelId">T251794064</span>
        <button class="task-star-btn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
        </button>
      </div>
      <div class="task-panel-header-right">
        <button class="task-header-btn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg>
        </button>
        <button class="task-header-btn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/></svg>
        </button>
        <button class="task-header-btn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
        </button>
        <button class="task-header-btn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/></svg>
        </button>
        <button class="task-close-btn" onclick="closeTaskPanel()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
      </div>
    </div>
    
    <!-- Scrollable Content -->
    <div class="task-panel-content">
      <!-- Title -->
      <div class="task-panel-title-section">
        <h1 class="task-panel-main-title" id="taskPanelTitle">T251794064: Refactor authentication module</h1>
      </div>

      <!-- Meta Row -->
      <div class="task-meta-row">
        <div class="task-meta-left">
          <div class="task-owner-team-wrapper">
            <div class="task-owner-team-combined" onclick="toggleOwnerDropdown(event)">
              <button class="task-owner-btn">
                <svg class="task-user-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                Owner
              </button>
              <div class="task-combined-divider"></div>
              <button class="task-team-btn">
                <svg class="task-team-icon" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="6" r="4"/><path d="M12 12c-4 0-7 2-7 5v1h14v-1c0-3-3-5-7-5z"/><circle cx="20" cy="8" r="2.5"/><path d="M20 12c1.5 0 3 .8 3 2.5v.5h-3"/><circle cx="4" cy="8" r="2.5"/><path d="M4 12c-1.5 0-3 .8-3 2.5v.5h3"/></svg>
                Owning Team
                <svg class="task-chevron-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
              </button>
            </div>
            <!-- Owner/Team Dropdown -->
            <div class="task-owner-dropdown" id="ownerDropdown" style="display: none;">
              <div class="task-owner-dropdown-section">
                <div class="task-owner-dropdown-header">
                  <span>Assign to individual</span>
                  <a href="#" class="task-owner-claim-link" onclick="claimOwnership(event)">Claim</a>
                </div>
                <div class="task-owner-input-container">
                  <div class="task-owner-input-wrapper">
                    <svg class="task-owner-input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                    <input type="text" class="task-owner-input" id="ownerSearchInput" placeholder="Enter owner (user or oncall)" onfocus="showOwnerSuggestions()" oninput="filterOwnerSuggestions(this.value)" />
                  </div>
                  <div class="task-owner-suggestions" id="ownerSuggestions">
                    <!-- Populated by JS -->
                  </div>
                </div>
              </div>
              <div class="task-owner-dropdown-section">
                <div class="task-owner-dropdown-header">
                  <span>Set owning team</span>
                </div>
                <div class="task-owner-input-wrapper">
                  <svg class="task-owner-input-icon" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="6" r="4"/><path d="M12 12c-4 0-7 2-7 5v1h14v-1c0-3-3-5-7-5z"/><circle cx="20" cy="8" r="2.5"/><path d="M20 12c1.5 0 3 .8 3 2.5v.5h-3"/><circle cx="4" cy="8" r="2.5"/><path d="M4 12c-1.5 0-3 .8-3 2.5v.5h3"/></svg>
                  <input type="text" class="task-owner-input" placeholder="Enter an owning team" />
                </div>
              </div>
            </div>
          </div>
          <button class="task-priority-btn">Mid <svg class="task-chevron-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg></button>
          <button class="task-size-btn">Size <svg class="task-chevron-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg></button>
        </div>
        <button class="task-fields-btn">+ Fields <svg class="task-chevron-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg></button>
      </div>

      <!-- SEV Task Badge Row -->
      <div class="task-badge-row">
        <span class="task-badge"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg> SEV Task</span>
      </div>

      <!-- SEVs Section -->
      <div class="task-section task-section-sevs">
        <div class="task-section-row">
          <div class="task-section-label">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 6h16M4 10h16M4 14h16M4 18h16"/></svg>
            SEVs
          </div>
          <div class="task-dropdowns">
            <button class="task-dropdown-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg> Set SEV Task Criticality <svg class="task-chevron-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg></button>
            <button class="task-dropdown-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg> Set SEV Task Category <svg class="task-chevron-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg></button>
          </div>
          <div class="task-section-right">
            <span class="task-outcome">Outcome</span>
            <button class="task-more-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/></svg></button>
            <svg class="task-chevron-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
          </div>
        </div>
        <div class="task-sev-item">
          <div class="task-sev-left">
            <span class="task-sev-badge sev-3">SEV 3</span>
            <div class="task-sev-avatar"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg></div>
            <span class="task-sev-id">S448319</span>
            <a href="#" class="task-sev-link">Taylor Swift - Life of a Showgirl - Only In Polish</a>
          </div>
          <div class="task-sev-right">
            <span class="task-term-badge" id="taskPanelTermBadge">Medium Term</span>
            <span class="task-detection-badge">DETECTION</span>
            <button class="task-sev-more"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/></svg></button>
          </div>
        </div>
        <div class="task-time-remaining">Time Remaining: <span class="task-time-value">90 Days</span></div>
      </div>

      <!-- Rich Text Toolbar -->
      <div class="task-toolbar">
        <button class="task-toolbar-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg> Write with AI</button>
        <div class="task-toolbar-divider"></div>
        <button class="task-toolbar-btn">Paragraph <svg class="task-chevron-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg></button>
        <div class="task-toolbar-divider"></div>
        <button class="task-toolbar-format"><strong>B</strong></button>
        <button class="task-toolbar-format"><em>I</em></button>
        <button class="task-toolbar-format"><s>S</s></button>
        <button class="task-toolbar-format"><u>U</u></button>
        <button class="task-toolbar-format"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg></button>
      </div>

      <!-- Content Area -->
      <div class="task-content-area">
        <div class="task-content-text" id="taskPanelContent">Criticality: Medium Term

The authentication module currently fails silently when token refresh operations encounter network timeouts or service unavailability. This task involves implementing proper error handling, retry logic with exponential backoff, and user-facing error states when tokens cannot be refreshed.

Acceptance Criteria:
‚Ä¢ Implement retry mechanism with configurable max attempts
‚Ä¢ Add exponential backoff between retry attempts
‚Ä¢ Surface clear error messages to users when auth fails
‚Ä¢ Add telemetry for token refresh failure patterns</div>
      </div>

      <!-- Tags Section -->
      <div class="task-section task-section-inline">
        <div class="task-section-label">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
          Tags
        </div>
        <div class="task-tags" id="taskPanelTags">
          <span class="task-tag">SEV Task <button>√ó</button></span>
          <span class="task-tag">SEV Task: Medium-term <button>√ó</button></span>
          <span class="task-tag">SEV Task: Root cause <button>√ó</button></span>
          <span class="task-tag">test <button>√ó</button></span>
          <span class="task-tag-more">+ 2 items</span>
        </div>
      </div>

      <!-- Subscribers Section -->
      <div class="task-section task-section-inline">
        <div class="task-section-label">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
          Subscribers
        </div>
        <div class="task-subscriber">
          <div class="task-subscriber-avatar"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg></div>
          <span>Christian Gin</span>
        </div>
      </div>

      <!-- SEV Manager Section -->
      <div class="task-section task-section-twocol">
        <div class="task-section-label task-section-label-multiline">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
          <span>SEV<br>Manager</span>
        </div>
        <div class="task-section-body">
          <h4 class="task-subsection-title">Mentioned in 1 SEVs</h4>
          <p class="task-subsection-text">Find below a list of SEVs where this task was mentioned:</p>
          <div class="task-sev-mention">
            <span class="task-bullet">‚Ä¢</span>
            <span class="task-sev-badge">SEV 3</span>
            <div class="task-warning-icon"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-1-7v2h2v-2h-2zm0-8v6h2V7h-2z"/></svg></div>
            <span class="task-sev-id">S448319</span>
            <a href="#" class="task-sev-link">Taylor Swift - Life of a Showgirl - Only In Polish</a>
          </div>
        </div>
      </div>

      <!-- SEV Follow Up Plugin Section -->
      <div class="task-section task-section-twocol">
        <div class="task-section-label task-section-label-multiline">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/></svg>
          <span>SEV Follow<br>Up Plugin</span>
        </div>
        <div class="task-section-body">
          <h4 class="task-subsection-title">Create PBA for contracts</h4>
          <ul class="task-bullet-list">
            <li>While defining contracts, you will be asked for SEV1/2 and SEV3 threshold. Only SEV1/2 threshold would be used to create PBA.</li>
            <li>Provide tenant information and use the <a href="#" class="task-link">same approach</a> for creating PBA for your contracts.</li>
          </ul>
          <p class="task-followup-label">Follow-up Information</p>
        </div>
      </div>

      <!-- Activity Section -->
      <div class="task-activity-section">
        <div class="task-activity-header">
          <h3>Activity & Comments</h3>
        </div>
        <div class="task-activity-list">
          <div class="task-activity-item">
            <svg class="task-activity-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 6h16M4 10h16M4 14h16M4 18h16"/></svg>
            <div>
              <p><strong>Christian Gin</strong> made several changes</p>
              <p class="task-activity-meta">January 16, 3:52 PM ¬∑ <a href="#">Show all 2 updates</a></p>
            </div>
          </div>
          <div class="task-activity-item">
            <svg class="task-activity-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 6h16M4 10h16M4 14h16M4 18h16"/></svg>
            <div>
              <p><strong>Christian Gin</strong> created this task.</p>
              <p class="task-activity-meta">January 16, 3:52 PM ¬∑ <a href="#">Show all 7 updates</a></p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Opsmate Panel (Slide from Right) -->
  <div class="opsmate-panel-overlay" id="opsmatePanelOverlay" onclick="closeOpsmatePanel()"></div>
  <div class="opsmate-panel" id="opsmatePanel">
    <iframe id="opsmatePanelFrame" src="" frameborder="0"></iframe>
  </div>

  <!-- Opsmate Overlay -->
  <div class="opsmate-overlay" id="opsmateOverlay">
    <iframe id="opsmateFrame" src="" frameborder="0"></iframe>
  </div>

  <!-- Initialize Left Nav Components -->
  <!-- Floating Experiment Button -->
  <a href="sev-header-experiment.html" class="floating-experiment-btn" title="SEV Header Experiment">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24">
      <path d="M9 3h6v2H9zM12 5v6"/>
      <path d="M8 11c-1.5 2-2 4-2 6 0 2.21 2.69 4 6 4s6-1.79 6-4c0-2-.5-4-2-6"/>
      <circle cx="10" cy="15" r="1" fill="currentColor"/>
      <circle cx="14" cy="17" r="1" fill="currentColor"/>
    </svg>
  </a>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Render main sidebar
      LeftNav.activePage = 'Incidents';
      LeftNav.render('mainNavContainer');
      
      // Render Data Exploration sidebar
      LeftNav.render('deNavContainer', { isDataExploration: true });
      
      // Check for #dataExploration hash and open panel if present
      if (window.location.hash === '#dataExploration') {
        openDataExploration();
        // Clear the hash to avoid re-triggering on refresh
        history.replaceState(null, '', window.location.pathname);
      }
    });
  </script>
</body>
</html>

